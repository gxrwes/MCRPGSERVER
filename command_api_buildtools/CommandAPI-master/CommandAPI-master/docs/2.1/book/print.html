<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>1.13 CommandAPI Documentation v2.1</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body class="light">
        <!-- Provide site root to javascript -->
        <script type="text/javascript">var path_to_root = "";</script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { } 
            if (theme === null || theme === undefined) { theme = 'light'; }
            document.body.className = theme;
            document.querySelector('html').className = theme + ' js';
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <ol class="chapter"><li class="affix"><a href="intro.html">Introduction</a></li><li><a href="installation.html"><strong aria-hidden="true">1.</strong> Installation for server owners</a></li><li><a href="quickstart.html"><strong aria-hidden="true">2.</strong> Setting up your development environment</a></li><li><a href="commandregistration.html"><strong aria-hidden="true">3.</strong> Command registration</a></li><li><a href="commandexecutors.html"><strong aria-hidden="true">4.</strong> Command executors</a></li><li><ol class="section"><li><a href="proxysender.html"><strong aria-hidden="true">4.1.</strong> Proxied commandsenders</a></li><li><a href="resultingcommandexecutors.html"><strong aria-hidden="true">4.2.</strong> Resulting command executors</a></li></ol></li><li><a href="arguments.html"><strong aria-hidden="true">5.</strong> Arguments</a></li><li><ol class="section"><li><a href="primitivearguments.html"><strong aria-hidden="true">5.1.</strong> Primitive arguments</a></li><li><a href="locationargument.html"><strong aria-hidden="true">5.2.</strong> Location arguments</a></li><li><a href="chatarguments.html"><strong aria-hidden="true">5.3.</strong> Chat arguments</a></li><li><a href="stringarguments.html"><strong aria-hidden="true">5.4.</strong> String arguments</a></li><li><a href="entityarguments.html"><strong aria-hidden="true">5.5.</strong> Entity &amp; player arguments</a></li><li><a href="literalarguments.html"><strong aria-hidden="true">5.6.</strong> Literal arguments</a></li><li><a href="dynsugargs.html"><strong aria-hidden="true">5.7.</strong> Dynamically suggested arguments</a></li><li><a href="customarguments.html"><strong aria-hidden="true">5.8.</strong> Custom arguments</a></li><li><a href="technicalargs.html"><strong aria-hidden="true">5.9.</strong> Technical arguments</a></li><li><ol class="section"><li><a href="soundargument.html"><strong aria-hidden="true">5.9.1.</strong> Sound argument</a></li><li><a href="advancementarg.html"><strong aria-hidden="true">5.9.2.</strong> Advancement argument</a></li><li><a href="recipeargument.html"><strong aria-hidden="true">5.9.3.</strong> Recipe argument</a></li><li><a href="loottableargument.html"><strong aria-hidden="true">5.9.4.</strong> LootTable argument</a></li></ol></li></ol></li><li><a href="functions.html"><strong aria-hidden="true">6.</strong> Functions &amp; Tags</a></li><li><ol class="section"><li><a href="functionsetup.html"><strong aria-hidden="true">6.1.</strong> Setting up functions &amp; tags</a></li><li><a href="functionwrapper.html"><strong aria-hidden="true">6.2.</strong> The FunctionWrapper class</a></li><li><a href="functionarguments.html"><strong aria-hidden="true">6.3.</strong> Function arguments</a></li></ol></li><li><a href="permissions.html"><strong aria-hidden="true">7.</strong> Permissions</a></li><li><a href="aliases.html"><strong aria-hidden="true">8.</strong> Aliases</a></li><li><a href="conversion.html"><strong aria-hidden="true">9.</strong> Command conversion</a></li><li class="affix"><a href="troubleshooting.html">Troubleshooting</a></li><li class="affix"><a href="afterword.html">Afterword</a></li></ol>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light <span class="default">(default)</span></button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title">1.13 CommandAPI Documentation v2.1</h1> 

                        <div class="right-buttons">
                            <a href="print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <a class="header" href="#introduction" id="introduction"><h1>Introduction</h1></a>
<p>Welcome to the documentation for the CommandAPI. The CommandAPI lets you create vanilla Minecraft commands which utilize the new command features which were implemented in Minecraft 1.13, including but not limited to:</p>
<ul>
<li>Having commands compatible with the vanilla <code>/execute</code> command</li>
<li>Having commands which can be run using Minecraft functions</li>
<li>Having better auto-completion and suggestions</li>
<li>Having command type checks before execution (e.g. ensuring a number is within a certain range)</li>
</ul>
<a class="header" href="#how-the-commandapi-works" id="how-the-commandapi-works"><h2>How the CommandAPI works</h2></a>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>This is a pretty important section, I would recommend reading before implementing the CommandAPI in your own projects. This section tells you about setup which is not stated anywhere else in the documentation. Think of it as the &quot;knowledge you should know before using this API&quot;.</p>
</blockquote>
<p>The CommandAPI does not follow the &quot;standard&quot; method of registering commands. In other words, commands which are registered with the CommandAPI will be registered as pure vanilla Minecraft commands as opposed to Bukkit or Spigot commands. This means that the following implications exist:</p>
<ul>
<li>Commands do not need to be declared in the <code>plugin.yml</code> file</li>
<li>Commands are not &quot;linked&quot; to a certain plugin. In other words, you cannot look up which commands are registered by which plugin.</li>
</ul>
<a class="header" href="#how-this-documentation-works" id="how-this-documentation-works"><h2>How this documentation works</h2></a>
<p>This documentation is split into the major sections that build up the CommandAPI. It's been designed in such a way that it should be easy to find exactly what you want to help you get started with the CommandAPI, how it's structured and how to make effective use of it. Each step of the way, the documentation will include examples which showcase how to use the CommandAPI.</p>
<p>You can use the side bar on the left to access the various sections of the documentation and can change the theme to your liking using the paintbrush icon in the top left corner.</p>
<p>Using the search icon in the top left corner, typing &quot;Example&quot; will show a list of examples which are included throughout the documentation.</p>
<a class="header" href="#documentation-changelog" id="documentation-changelog"><h2>Documentation changelog</h2></a>
<p>Whenever a new version of the CommandAPI comes out, the version number changes <em>(as you'd expect)</em>. In the same manner, if any changes to the documentation were made, the documentation version number changes. Ensure you keep up to date on the latest changes to the documentation (You can view the documentation version at the top of the page) when new versions of the CommandAPI are released. This changelog below gives a brief overview of the changes to pages that were made between each version of the documentation, as only the latest version of the documentation is hosted online.</p>
<ul>
<li><strong>2.0 → 2.1</strong>
<ul>
<li><strong><a href="./commandregistration.html#command-registration">Click here</a></strong> - Include information about tooltips</li>
<li><strong><a href="./technicalargs.html">Click here</a></strong> - Adds information on technical arguments</li>
<li><strong><a href="./quickstart.html#using-maven-recommended">Click here</a></strong> - Improve documentation for adding dependencies and repositories to the <code>pom.xml</code> file</li>
</ul>
</li>
<li><strong>1.8 → 2.0</strong>
<ul>
<li><strong><a href="./arguments.html#arguments-with-overrideable-suggestions">Click here</a></strong> - Deprecated <code>SuggestedStringArgument</code>, use <code>.overrideSuggestions()</code> instead</li>
<li><strong><a href="./customarguments.html">Click here</a></strong> - Adds a new argument, the <code>CustomArgument</code></li>
<li><strong><a href="./dynsugargs.html">Click here</a></strong> - The <code>DynamicSuggestedArgument</code> now has access to the <code>CommandSender</code> object</li>
</ul>
</li>
</ul>
<a class="header" href="#installation" id="installation"><h1>Installation</h1></a>
<p>Installing the CommandAPI is easy! Just download the CommandAPI.jar file and place it in your server's <code>plugins/</code> folder!</p>
<p><br></p>
<p><a href="https://github.com/JorelAli/1.13-Command-API/releases/latest/download/CommandAPI.jar" style="
background-color:#EB7035;
border-radius:3px;
color:#ffffff;
display:block;
line-height:44px;
text-align:center;
width:50%;
margin-left:auto;
margin-right: auto;">Download latest CommandAPI.jar</a></p>
<a class="header" href="#configuring-the-commandapi" id="configuring-the-commandapi"><h2>Configuring the CommandAPI</h2></a>
<p>The CommandAPI can be configured in the <code>plugins/CommandAPI/config.yml</code> file.</p>
<p>The default <code>config.yml</code> settings are as follows:</p>
<pre><code class="language-yaml">verbose-outputs: true
create-dispatcher-json: true
</code></pre>
<ul>
<li><code>verbose-outputs</code> - Outputs command registration and unregistration logs in the console</li>
<li><code>create-dispatcher-json</code> - Creates a <code>command_registration.json</code> file showing the mapping of registered commands</li>
</ul>
<a class="header" href="#setting-up-your-development-environment" id="setting-up-your-development-environment"><h1>Setting up your development environment</h1></a>
<p>To use the CommandAPI in your plugins, there are two methods of adding it to your development environment:</p>
<a class="header" href="#manually-using-the-jar" id="manually-using-the-jar"><h2>Manually using the .jar</h2></a>
<ul>
<li>Download the latest CommandAPI.jar from the download page <a href="https://github.com/JorelAli/1.13-Command-API/releases/latest">here</a></li>
<li>Add the CommandAPI.jar file to your project/environment's build path</li>
<li>Add the plugin as a dependent in the plugin.yml (<code>depend: [CommandAPI]</code>)</li>
</ul>
<a class="header" href="#using-maven-recommended" id="using-maven-recommended"><h2>Using Maven (recommended)</h2></a>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>If you've never used maven before, I highly recommend it! It makes it easier to keep your code updated with the latest dependency updates. For information on how to set up a plugin using maven, you can read <a href="https://bukkit.gamepedia.com/Plugin_Tutorial">Bukkit's plugin tutorial</a>.</p>
</blockquote>
<ul>
<li>
<p>Add the maven repository to your <code>pom.xml</code> file:</p>
<pre><code>&lt;repositories&gt;
    &lt;repository&gt;
        &lt;id&gt;mccommandapi&lt;/id&gt;
        &lt;url&gt;https://raw.githubusercontent.com/JorelAli/1.13-Command-API/mvn-repo/1.13CommandAPI/&lt;/url&gt;
    &lt;/repository&gt;
&lt;/repositories&gt;
</code></pre>
</li>
<li>
<p>Add the dependency to your <code>pom.xml</code>:</p>
<pre><code>&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;io.github.jorelali&lt;/groupId&gt;
        &lt;artifactId&gt;commandapi&lt;/artifactId&gt;
        &lt;version&gt;VERSION&lt;/version&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>
<p>A list of version numbers can be found <a href="https://github.com/JorelAli/1.13-Command-API/tree/mvn-repo/1.13CommandAPI/io/github/jorelali/commandapi">here</a>.
For example, if you wanted to use version 2.0, you would use <code>&lt;version&gt;2.0&lt;/version&gt;</code></p>
</li>
<li>
<p>Add the plugin as a dependent in the plugin.yml (<code>depend: [CommandAPI]</code>)</p>
</li>
</ul>
<a class="header" href="#using-gradle" id="using-gradle"><h2>Using Gradle</h2></a>
<ul>
<li>
<p>Add the repository to your <code>build.gradle</code> file:</p>
<pre><code>repositories {
    maven {
        name = 'mccommandapi'
        url = 'https://raw.githubusercontent.com/JorelAli/1.13-Command-API/mvn-repo/1.13CommandAPI/'
    }
}
</code></pre>
</li>
<li>
<p>Add the dependency to your list of dependencies in your <code>build.gradle</code> file:</p>
<pre><code>dependencies {
    compile &quot;io.github.jorelali:commandapi:VERSION&quot;
}
</code></pre>
<p>A list of version numbers can be found <a href="https://github.com/JorelAli/1.13-Command-API/tree/mvn-repo/1.13CommandAPI/io/github/jorelali/commandapi">here</a>.
For example, if you wanted to use version 2.0, you would use <code>compile &quot;io.github.jorelali:commandapi:2.0&quot;</code></p>
</li>
<li>
<p>Add the plugin as a dependent in the plugin.yml (<code>depend: [CommandAPI]</code>)</p>
</li>
</ul>
<a class="header" href="#command-registration" id="command-registration"><h1>Command registration</h1></a>
<p>To register commands with the CommandAPI, there are several methods which can be used, depending on whether you want your command to have aliases or permissions in order to run it.</p>
<table><thead><tr><th> CommandRegistration method                                   </th><th> Outcome                                                   </th></tr></thead><tbody>
<tr><td> <code>CommandAPI.getInstance().register(String, LinkedHashMap, CommandExecutor)</code> </td><td> Basic command registration                                </td></tr>
<tr><td> <code>CommandAPI.getInstance().register(String, String[], LinkedHashMap, CommandExecutor)</code> </td><td> Register command with an array of aliases                 </td></tr>
<tr><td> <code>CommandAPI.getInstance().register(String, CommandPermission, LinkedHashMap, CommandExecutor)</code> </td><td> Register command which need certain permissions           </td></tr>
<tr><td> <code>CommandAPI.getInstance().register(String, CommandPermission, String[], LinkedHashMap, CommandExecutor)</code> </td><td> Register command with aliases and permission requirements </td></tr>
</tbody></table>
<p>The following fields are as follows:</p>
<ul>
<li>
<p><code>String</code> - The command name</p>
<p>The first argument represents the command name which will be registered. For instance, to register the command <code>/god</code>, you would use the following:</p>
<pre><code class="language-java">CommandAPI.getInstance().register(&quot;god&quot;, ...);
</code></pre>
</li>
<li>
<p><code>LinkedHashMap&lt;String, Argument&gt;</code> - The list of arguments</p>
<p>The CommandAPI requires a list of arguments which are used for the command. The argument map consists of a key which is the tooltip that is displayed as a prompt to users entering commands, and a value which is an instance of an argument (See the section on arguments). This list of arguments is interpreted in the <em>order that arguments are added to the LinkedHashMap</em>.</p>
</li>
<li>
<p><code>String[]</code> - An array of aliases that the command can be run via</p>
</li>
<li>
<p><code>CommandPermission</code> - The required permission to execute a command. (See the section on permissions).</p>
</li>
</ul>
<a class="header" href="#command-loading-order" id="command-loading-order"><h2>Command loading order</h2></a>
<p>In order to register commands properly, <strong>commands must be registered before the server finishes loading</strong>. The CommandAPI will prevent command registration after the server has loaded. This basically means that all command registration must occur during a plugin's <code>onLoad()</code> or <code>onEnable()</code> method. With the CommandAPI, depending on which of these functions you load your commands is crutial if your plugin is used with Minecraft's functions.</p>
<table><thead><tr><th> When to load        </th><th> What to do                                                                               </th></tr></thead><tbody>
<tr><td> <code>onLoad()</code> method   </td><td> Register commands to be used in Minecraft functions (see Function section for more info) </td></tr>
<tr><td> <code>onEnable()</code> method </td><td> Register regular commands                                                                </td></tr>
</tbody></table>
<a class="header" href="#command-unregistration" id="command-unregistration"><h2>Command unregistration</h2></a>
<p>The CommandAPI has support to unregister commands completely from Minecraft's command list. This includes Minecraft built in commands!</p>
<table><thead><tr><th> Method                                                       </th><th> Result                                                       </th></tr></thead><tbody>
<tr><td> <code>CommandAPI.getInstance().unregister(String cmd)</code>            </td><td> Unregisters a command from the game                          </td></tr>
<tr><td> <code>CommandAPI.getInstance().unregister(String cmd, boolean force)</code> </td><td> Attempts to unregister a command from the game by force. This includes <code>/minecraft:cmd</code>, <code>/bukkit:cmd</code> and <code>/spigot:cmd</code> commands as well. </td></tr>
</tbody></table>
<a class="header" href="#example---replacing-minecrafts-gamemode-command" id="example---replacing-minecrafts-gamemode-command"><h3>Example - Replacing Minecraft's <code>/gamemode</code> command</h3></a>
<p>To replace a command, we can first unregister it and then register our implementation of that command.</p>
<pre><code class="language-java">//Unregister the gamemode command from the server (by force)
CommandAPI.getInstance().unregister(&quot;gamemode&quot;, true);

LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();

/* Arguments for the gamemode command. In this sample, I'm just 
 * using a simple literal argument which allows for /gamemode survival */
arguments.put(&quot;gamemode&quot;, new LiteralArgument(&quot;survival&quot;));

CommandAPI.getInstance().register(&quot;gamemode&quot;, arguments, (sender, args) -&gt; {
    //Implementation of our /gamemode command
});
</code></pre>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>Command unregistration, although powerful, is highly unrecommended. It is the CommandAPI's most &quot;dangerous&quot; feature as it can cause unexpected sideffects, such as command blocks executing commands you wouldn't expect them to. In almost every case, I'd recommend just creating a new command instead of unregistering one to replace it.</p>
<p>For instance, instead of unregistering <code>/gamemode</code>, you could register a command <code>/gm</code> or <code>/customgamemode</code>.</p>
</blockquote>
<a class="header" href="#command-executors" id="command-executors"><h1>Command executors</h1></a>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>This section can be a little bit difficult to follow. If you only want the bare basic features <em>(executes a command)</em>, read the section below on <em>Normal command executors</em> - this behaves very similar to the <code>onCommand</code> method in Bukkit.</p>
</blockquote>
<hr />
<p>The CommandAPI provides two separate command executors which are lambdas which execute the code you want when a command is called. These are the classes <code>CommandExecutor</code> <em>(Not to be confused with Bukkit's <code>CommandExecutor</code> class)</em>, which just runs the contents of a command, and <code>ResultingCommandExecutor</code> that returns an integral <em>(whole number)</em> result.</p>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>In general, you need not focus too much on what type of command executor to implement. If you know for certain that you're going to be using your command with command blocks, just ensure you return an integer at the end of your declared command executor. Java will infer the type <em>(whether it's a CommandExecutor or ResultingCommandExecutor)</em> automatically, so feel free to return an integer or not.</p>
</blockquote>
<a class="header" href="#normal-command-executors" id="normal-command-executors"><h2>Normal command executors</h2></a>
<p>Command executors are of the following format, where <code>sender</code> is a <a href="https://hub.spigotmc.org/javadocs/bukkit/org/bukkit/command/CommandSender.html"><code>CommandSender</code></a>, and <code>args</code> is an <code>Object[]</code>, which represents arguments which are parsed by the CommandAPI.</p>
<pre><code class="language-java">(sender, args) -&gt; {
  //Code here  
};
</code></pre>
<p>With normal command executors, these do not need to return anything. By default, this will return a <em>success value</em> of 1 if it runs successfully, and a <em>success value</em> of 0 if it runs unsuccessfully, either by throwing an exception <em>(RuntimeException)</em> or by forcing the command to fail.</p>
<a class="header" href="#forcing-commands-to-fail" id="forcing-commands-to-fail"><h2>Forcing commands to fail</h2></a>
<p>Sometimes, you want your command to fail on purpose. This is basically the way to &quot;gracefully&quot; handle errors in your command execution. This is performed using the following method:</p>
<pre><code class="language-java">CommandAPI.fail(&quot;Error message goes here&quot;);
</code></pre>
<p>When the CommandAPI calls the fail method, it will cause the command to return a <em>success value</em> of 0, to indicate failure.</p>
<a class="header" href="#example---command-failing-for-element-not-in-a-list" id="example---command-failing-for-element-not-in-a-list"><h3>Example - Command failing for element not in a list</h3></a>
<p>Say we have some list, <code>List&lt;String&gt;</code> containing a bunch of fruit and the player can choose from it. In order to do that, we can use a <code>StringArgument</code> and suggest it to the player using <code>.overrideSuggestions(String[])</code>. However, because this only lists <em>suggestions</em> to the player, it does <strong>not</strong> stop the player from entering an option that isn't on the list of suggestions.</p>
<p>Therefore, to gracefully handle this with a proper error message, we use <code>CommandAPI.fail(String)</code> with a meaningful error message which is displayed to the user.</p>
<pre><code class="language-java">//Array of fruit
List&lt;String&gt; fruit = new ArrayList&lt;&gt;();
fruit.add(&quot;banana&quot;);
fruit.add(&quot;apple&quot;);
fruit.add(&quot;orange&quot;);

//Argument accepting a String, suggested with the list of fruit
LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;item&quot;, new StringArgument().overrideSuggestions(fruit.toArray(new String[fruit.size()])));

//Register the command
CommandAPI.getInstance().register(&quot;getfruit&quot;, arguments, (sender, args) -&gt; {
    String inputFruit = (String) args[0];
    if(fruit.contains(inputFruit)) {
        //Do something with inputFruit
    } else {
        //The player's input is not in the list of fruit
        CommandAPI.fail(&quot;That fruit doesn't exist!&quot;);
    }
});
</code></pre>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>In general, it's a good idea to handle unexpected cases with the <code>CommandAPI.fail()</code> method. Most arguments used by the CommandAPI will have their own builtin failsafe system <em>(e.g. the <code>EntitySelectorArgument</code> will not execute the command executor if it fails to find an entity)</em>, so this feature is for those extra cases.</p>
</blockquote>
<a class="header" href="#proxied-commandsenders" id="proxied-commandsenders"><h1>Proxied commandsenders</h1></a>
<p>The CommandAPI has extra support for vanilla Minecraft's <code>/execute</code> command, by allowing the CommandSender to be an instance of the <code>ProxiedCommandSender</code> class. This allows the CommandSender to contain two extra pieces of information: The &quot;proxied sender&quot; and the original sender.</p>
<a class="header" href="#example---running-a-command-as-a-chicken" id="example---running-a-command-as-a-chicken"><h2>Example - Running a command as a chicken</h2></a>
<p>Say we have a command which kills the sender of a command. This is easily implemented as follows:</p>
<pre><code class="language-java">CommandAPI.getInstance().register(&quot;killme&quot;, new LinkedHashMap&lt;String, Argument&gt;(), (sender, args) -&gt; {
    if(sender instanceof Player) {
        Player player = (Player) sender;
        player.setHealth(0);
    }
});
</code></pre>
<p>But what if the sender of the command is <em>not</em> a player? By using Minecraft's <code>/execute</code> command, we could execute the command as <em>any</em> arbitrary entity, as shown with the command below:</p>
<pre><code>/execute as @e[type=chicken] run killme
</code></pre>
<p>To handle this case, we can check if the sender is an instance of a <code>ProxiedCommandSender</code>, and kill the <code>callee</code> <em>(the entity which is being 'forced' to run the command /killme)</em></p>
<pre><code class="language-java">CommandAPI.getInstance().register(&quot;killme&quot;, new LinkedHashMap&lt;String, Argument&gt;(), (sender, args) -&gt; {
    if(sender instanceof Player) {
        Player player = (Player) sender;
        player.setHealth(0);
    } else if(sender instanceof ProxiedCommandSender) {

        //Get the proxy CommandSender object from the CommandSender
        ProxiedCommandSender proxy = (ProxiedCommandSender) sender;

        //Check if the callee is an Entity
        if(proxy.getCallee() instanceof Entity) {

            //If so, kill the entity
            Entity target = (Entity) proxy.getCallee();
            entity.setHealth(0);
        }
    }
});

</code></pre>
<p>This allows the command above to run successfully, killing all chickens it can find.</p>
<a class="header" href="#resulting-command-executors" id="resulting-command-executors"><h1>Resulting command executors</h1></a>
<p>Resulting command executors are very similar to normal command executors, the only difference is that they can return an integer <em>result value</em>.</p>
<pre><code class="language-java">(sender, args) -&gt; {
    //Code here
    return /*some integer here*/ ;
};
</code></pre>
<a class="header" href="#example---random-number-result-command" id="example---random-number-result-command"><h2>Example - Random number result command</h2></a>
<p>Say we want a command that returns a random number as a result. This can then be used by vanilla Minecraft's <code>/execute store result ...</code> command, which can be used for other command block chains.</p>
<pre><code class="language-java">CommandAPI.getInstance().register(&quot;randnum&quot;, new LinkedHashMap&lt;String, Argument&gt;(), (sender, args) -&gt; {
    return new Random().nextInt();
});
</code></pre>
<p>This returns a success value of 1 <em>(Because no errors or <code>CommandAPI.fail(String)</code> was thrown)</em> and a return value of a random number.</p>
<a class="header" href="#example---lootbox-system-with-execute-command" id="example---lootbox-system-with-execute-command"><h2>Example - Lootbox system with <code>/execute</code> command</h2></a>
<p>We can store state using <code>/execute store</code> and we can perform conditional checks using <code>/execute if</code>. By combining these, we can create a system which can be used with commandblocks to say, give players random lootboxes and redeem them.</p>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();

//Register random number generator command from 1 to 99 (inclusive)
CommandAPI.getInstance().register(&quot;randomnumber&quot;, arguments, (sender, args) -&gt; {
    return ThreadLocalRandom.current().nextInt(1, 100); //Returns random number from 1 &lt;= x &lt; 100
});

//Register reward giving system for a target player
arguments.put(&quot;target&quot;, new EntitySelectorArgument(EntitySelector.ONE_PLAYER));

CommandAPI.getInstance().register(&quot;givereward&quot;, arguments, (sender, args) -&gt; {
    Player player = (Player) args[0];
    player.getInventory().addItem(new ItemStack(Material.DIAMOND, 64));
    Bukkit.broadcastMessage(player.getName() + &quot; won a rare 64 diamonds from a loot box!&quot;);
}
</code></pre>
<p>Store a random number under the scoreboard score <code>randVal</code> for a player called <code>SomePlayer</code>, by executing the command /randomnumber</p>
<pre><code>/execute store success score SomePlayer randVal run randomnumber
</code></pre>
<p>Check if the random number is equal to 1 (say we have some plugin which gives a reward to a player that happened to get a 1 from a random number command, thus giving them a 1/99 chance of winning)</p>
<pre><code>/execute if score SomePlayer randVal matches 1 run givereward SomePlayer
</code></pre>
<a class="header" href="#arguments" id="arguments"><h1>Arguments</h1></a>
<p>Arguments in the CommandAPI are registered by using a <code>LinkedHashMap&lt;String, Argument&gt;</code> object. There are two things you need to keep in mind when creating arguments:</p>
<ul>
<li>The order which they will be used</li>
<li>The type of each argument</li>
</ul>
<p>By definition of a LinkedHashMap, the order of the elements inserted into it are preserved, meaning the order you add arguments to the LinkedHashMap will be the resulting order of which arguments are presented to the user when they run that command.</p>
<p>Adding arguments for registration is simple:</p>
<pre><code class="language-java">//Create LinkedHashMap
LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();

//Add an argument called &quot;target&quot;, which is a PlayerArgument
arguments.put(&quot;target&quot;, new PlayerArgument());
</code></pre>
<p>The String value is the tooltip that is shown to a player when they are entering the command.</p>
<a class="header" href="#argument-casting" id="argument-casting"><h2>Argument Casting</h2></a>
<p>To access arguments, they have to be casted to the type that the argument represents. The order of the arguments in the <code>args[]</code> is the same as the order in which the arguments were declared.</p>
<pre><code class="language-java">LinkedHashMap&lt;String, ArgumentType&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;arg0&quot;, new StringArgument());
arguments.put(&quot;arg1&quot;, new PotionEffectArgument());
arguments.put(&quot;arg2&quot;, new LocationArgument());

CommandAPI.getInstance().register(&quot;cmd&quot;, arguments, (sender, args) -&gt; {
    String stringArg = (String) args[0];
    PotionEffectType potionArg = (PotionEffectType) args[1];
    Location locationArg = (Location) args[2];
});
</code></pre>
<p>The types of the arguments declared by the CommandAPI are all listed below:</p>
<a class="header" href="#list-of-arguments" id="list-of-arguments"><h2>List of arguments</h2></a>
<p>Arguments are found in the <code>io.github.jorelali.commandapi.api.arguments</code> package.</p>
<table><thead><tr><th align="center">          Argument class          </th><th align="center">                          Data type                           </th><th align="center">                      Description                       </th></tr></thead><tbody>
<tr><td align="center">      <code>AdvancementArgument</code>       </td><td align="center">                        <code>Advancement</code>                         </td><td align="center">                                                        </td></tr>
<tr><td align="center">        <code>BooleanArgument</code>         </td><td align="center">                          <code>boolean</code>                           </td><td align="center">                                                        </td></tr>
<tr><td align="center">       <code>ChatColorArgument</code>        </td><td align="center">                         <code>ChatColor</code>                          </td><td align="center">                                                        </td></tr>
<tr><td align="center">     <code>ChatComponentArgument</code>      </td><td align="center">                      <code>BaseComponent[]</code>                       </td><td align="center">                 Formatted chat object                  </td></tr>
<tr><td align="center">         <code>DoubleArgument</code>         </td><td align="center">                           <code>double</code>                           </td><td align="center">                                                        </td></tr>
<tr><td align="center"> <code>DynamicSuggestedStringArgument</code> </td><td align="center">                           <code>String</code>                           </td><td align="center">       Suggested string using a supplier function       </td></tr>
<tr><td align="center">      <code>EnchantmentArgument</code>      </td><td align="center">                        <code>Enchantment</code>                         </td><td align="center">                                                        </td></tr>
<tr><td align="center">    <code>EntitySelectorArgument</code>     </td><td align="center"> <code>Entity</code>, <code>Player</code>, <code>Collection&lt;Entity&gt;</code>, <code>Collection&lt;Player&gt;</code> </td><td align="center">      Selects an entity (similar to <code>@a</code> or <code>@p</code>)       </td></tr>
<tr><td align="center">      <code>EntityTypeArgument</code>       </td><td align="center">                         <code>EntityType</code>                         </td><td align="center">          Selects a type of entity (e.g. Pig)           </td></tr>
<tr><td align="center">         <code>FloatArgument</code>         </td><td align="center">                           <code>float</code>                            </td><td align="center">                                                        </td></tr>
<tr><td align="center">       <code>FunctionArgument</code>        </td><td align="center">                     <code>FunctionWrapper[]</code>                      </td><td align="center">     A declared Minecraft function from a data pack     </td></tr>
<tr><td align="center">     <code>GreedyStringArgument</code>      </td><td align="center">                           <code>String</code>                           </td><td align="center">                 A string of any length                 </td></tr>
<tr><td align="center">        <code>IntegerArgument</code>        </td><td align="center">                            <code>int</code>                             </td><td align="center">                                                        </td></tr>
<tr><td align="center">       <code>ItemStackArgument</code>       </td><td align="center">                         <code>ItemStack</code>                          </td><td align="center">          Returns an <code>ItemStack</code> with amount 1          </td></tr>
<tr><td align="center">        <code>LiteralArgument</code>        </td><td align="center">                             N/A                              </td><td align="center">          A predefined hardcoded argument name          </td></tr>
<tr><td align="center">       <code>LocationArgument</code>        </td><td align="center">                          <code>Location</code>                          </td><td align="center">                                                        </td></tr>
<tr><td align="center">       <code>LootTableArgument</code>        </td><td align="center">                         <code>LootTable</code>                          </td><td align="center">                                                        </td></tr>
<tr><td align="center">       <code>ParticleArgument</code>        </td><td align="center">                          <code>Particle</code>                          </td><td align="center">                                                        </td></tr>
<tr><td align="center">         <code>PlayerArgument</code>         </td><td align="center">                           <code>Player</code>                           </td><td align="center"> Similar to EntitySelector, but always returns 1 player </td></tr>
<tr><td align="center">     <code>PotionEffectArgument</code>      </td><td align="center">                      <code>PotionEffectType</code>                      </td><td align="center">                                                        </td></tr>
<tr><td align="center">         <code>RecipeArgument</code>         </td><td align="center">                           <code>Recipe</code>                           </td><td align="center">                                                        </td></tr>
<tr><td align="center">         <code>SoundArgument</code>          </td><td align="center">                           <code>Sound</code>                            </td><td align="center">                                                        </td></tr>
<tr><td align="center">         <code>StringArgument</code>         </td><td align="center">                           <code>String</code>                           </td><td align="center">              String consisting of 1 word               </td></tr>
<tr><td align="center">    <code>SuggestedStringArgument</code>     </td><td align="center">                           <code>String</code>                           </td><td align="center">          A list of suggested one word strings          </td></tr>
<tr><td align="center">          <code>TextArgument</code>          </td><td align="center">                           <code>String</code>                           </td><td align="center">      String which can have spaces (used for text)      </td></tr>
</tbody></table>
<a class="header" href="#arguments-with-overrideable-suggestions" id="arguments-with-overrideable-suggestions"><h2>Arguments with overrideable suggestions</h2></a>
<p>Some arguments have a feature allowing you to override the list of suggestions they provide. This is achieved by using <code>.overrideSuggestions(String[])</code> on an instance of an argument, with the String array consisting of suggestions that will be shown to the user whilst they type their command. It's been designed such that this returns the same argument so it can be used inline (handy, eh?)</p>
<a class="header" href="#example---friend-list-by-overriding-suggestions" id="example---friend-list-by-overriding-suggestions"><h3>Example - Friend list by overriding suggestions</h3></a>
<p>Say you have a plugin which has a &quot;friend list&quot; for players. If you want to teleport to a friend in that list, you could use a <code>PlayerArgument</code>, which has the list of suggestions overridden with the list of friends that that player has.</p>
<pre><code class="language-java">String[] friends = //Some String array populated with friends

LinkedHashMap&lt;String, ArgumentType&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;friend&quot;, new PlayerArgument().overrideSuggestions(friends));

CommandAPI.getInstance().register(&quot;friendtp&quot;, arguments, (sender, args) -&gt; {
    Player target = (Player) args[0];
    Player player = (Player) sender;
    player.teleport(target);
});
</code></pre>
<a class="header" href="#primitive-arguments" id="primitive-arguments"><h1>Primitive arguments</h1></a>
<a class="header" href="#boolean-arguments" id="boolean-arguments"><h2>Boolean arguments</h2></a>
<p>The <code>BooleanArgument</code> class represents boolean values <code>true</code> and <code>false</code>.</p>
<a class="header" href="#example---config-editing-plugin" id="example---config-editing-plugin"><h3>Example - Config editing plugin</h3></a>
<pre><code class="language-java">String[] configKeys = getConfig().getKeys(true).toArray(new String[getConfig().getKeys(true).size()]);

LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;config-key&quot;, new TextArgument().overrideSuggestions(configKeys));
arguments.put(&quot;value&quot;, new BooleanArgument());

CommandAPI.getInstance().register(&quot;editconfig&quot;, arguments, (sender, args) -&gt; {
    getConfig().set((String) args[0], (boolean) args[1]);
});
</code></pre>
<a class="header" href="#numerical-arguments" id="numerical-arguments"><h2>Numerical arguments</h2></a>
<p>Numbers are represented using the designated number classes:</p>
<table><thead><tr><th> Class </th><th> Description </th></tr></thead><tbody>
<tr><td> <code>IntegerArgument</code> </td><td> Whole numbers </td></tr>
<tr><td> <code>DoubleArgument</code> </td><td> Double precision floating point numbers </td></tr>
<tr><td> <code>FloatArgument</code> </td><td> Single precision floating point numbers </td></tr>
</tbody></table>
<p>Each numerical argument can have ranges applied to them, which restricts the user to only entering numbers from within a certain range. This is done using the constructor, and the range specified:</p>
<table><thead><tr><th> Constructor </th><th> Description </th></tr></thead><tbody>
<tr><td> <code>new IntegerArgument()</code> </td><td> Any range </td></tr>
<tr><td> <code>new IntegerArgument(2)</code> </td><td> Values greater than <em>or equal to</em> 2 </td></tr>
<tr><td> <code>new IntegerArgument(2, 10)</code> </td><td> Values greater than or equal to 2 and less than or equal to 10 </td></tr>
</tbody></table>
<p>Each range is <em>inclusive</em>, so it includes the number given to it.</p>
<a class="header" href="#location-argument" id="location-argument"><h1>Location argument</h1></a>
<p>The <code>LocationArgument</code> class is used to specify a location in the <em>command sender's current world</em>. This allows the user to enter three numbers as coordinates, or use relative coordinates (i.e. the <code>~</code> and <code>^</code> operators)</p>
<p>The <code>LocationArgument</code> constructor requires a <code>LocationType</code>, which specifies the type of location that is accepted by the command.</p>
<a class="header" href="#locationtypeblock_position" id="locationtypeblock_position"><h3><code>LocationType.BLOCK_POSITION</code></h3></a>
<p>Integer block coordinates. The suggested location is the coordinates of block you are looking at when you type the command.
<img src="https://user-images.githubusercontent.com/42968178/50574833-92ef9e00-0df0-11e9-9ae5-59235b1bb8cb.png" alt="BLOCK_POSITION" /></p>
<a class="header" href="#locationtypeprecise_position" id="locationtypeprecise_position"><h3><code>LocationType.PRECISE_POSITION</code></h3></a>
<p>Exact coordinates. The suggested location is the exact coordinates of where your cursor is pointing at when you type the command.
<img src="https://user-images.githubusercontent.com/42968178/50574841-b6b2e400-0df0-11e9-9003-481b139d190f.png" alt="PRECISE_POSITION" /></p>
<p><strong>By default, the <code>LocationArgument</code> will use <code>PRECISE_POSITION</code></strong>.</p>
<a class="header" href="#example---break-block-by-coordinates-command" id="example---break-block-by-coordinates-command"><h3>Example - Break block by coordinates command</h3></a>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();

//We want to target blocks in particular, so use BLOCK_POSITION
arguments.put(&quot;block&quot;, new LocationArgument(LocationType.BLOCK_POSITION));

CommandAPI.getInstance().register(&quot;break&quot;, arguments, (sender, args) -&gt; {
    ((Location) args[0]).getBlock().setType(Material.AIR);
});
</code></pre>
<a class="header" href="#chat-arguments" id="chat-arguments"><h1>Chat arguments</h1></a>
<a class="header" href="#chat-color-argument" id="chat-color-argument"><h2>Chat color argument</h2></a>
<p>The <code>ChatColorArgument</code> class is used to represent a given chat color (e.g. red or green)</p>
<a class="header" href="#example---username-color-changing-plugin" id="example---username-color-changing-plugin"><h3>Example - Username color changing plugin</h3></a>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;chatcolor&quot;, new ChatColorArgument());

CommandAPI.getInstance().register(&quot;namecolor&quot;, arguments, (sender, args) -&gt; {
    Player player = (Player) sender;
    ChatColor color = (ChatColor) args[0];
    player.setDisplayName(color + player.getDisplayName());
});
</code></pre>
<a class="header" href="#chat-component-argument" id="chat-component-argument"><h2>Chat component argument</h2></a>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>The <code>ChatComponentArgument</code> class is dependent on a Spigot based server. This means that the <code>ChatComponentArgument</code> will not work on a non-Spigot based server, such as CraftBukkit. If you use this class on a non-Spigot based server, it will throw a <code>SpigotNotFoundException</code></p>
<p>Spigot based servers include, but are not limited to:</p>
<ul>
<li>Spigot</li>
<li>PaperSpigot</li>
<li>TacoSpigot</li>
</ul>
</blockquote>
<p>The <code>ChatComponentArgument</code> class accepts raw JSON as valid input. This is converted into Spigot's <code>BaseComponent[]</code> which can be used for books and raw messages. You can read more about raw JSON <a href="https://minecraft.gamepedia.com/Commands#Raw_JSON_text">here</a>.</p>
<a class="header" href="#example---book-made-from-raw-json" id="example---book-made-from-raw-json"><h3>Example - Book made from raw JSON</h3></a>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;contents&quot;, new ChatComponentArgument());

CommandAPI.getInstance().register(&quot;makebook&quot;, arguments, (sender, args) -&gt; {
    if (sender instanceof Player) {
        Player player = (Player) sender;
        BaseComponent[] arr = (BaseComponent[]) args[0];
        
        //Create book
        ItemStack is = new ItemStack(Material.WRITTEN_BOOK);
        BookMeta meta = (BookMeta) is.getItemMeta(); 
        meta.spigot().addPage(arr);
        is.setItemMeta(meta);
        
        //Give player the book
        player.getInventory().addItem(is);
    }
});
</code></pre>
<a class="header" href="#string-arguments" id="string-arguments"><h1>String arguments</h1></a>
<a class="header" href="#string-argument" id="string-argument"><h2>String argument</h2></a>
<p>The <code>StringArgument</code> class is used to represent a single word. These words <strong>can only contain alphanumeric characters (A-Z, a-z and 0-9), and the underscore character</strong>.</p>
<p>Accepted <code>StringArgument</code> values:</p>
<pre><code>Hello
123
hello123
Hello_world
</code></pre>
<p>Rejected <code>StringArgument</code> values:</p>
<pre><code>hello@email.com
yesn't
</code></pre>
<a class="header" href="#potential-uses-for-string-arguments" id="potential-uses-for-string-arguments"><h3>Potential uses for string arguments</h3></a>
<ul>
<li>Entering Strings to identify offline players</li>
</ul>
<a class="header" href="#text-argument" id="text-argument"><h2>Text argument</h2></a>
<p>The <code>TextArgument</code> acts similar to any String in Java. These can be single words, like to the <code>StringArgument</code>, or have additional characters (e.g. spaces, symbols) <strong>if surrounded by quotes</strong>. To type quotation marks, you can use <code>\&quot;</code> (as similar to Java) to escape these special characters.</p>
<p>Accepted <code>TextArgument</code> values:</p>
<pre><code>hello
&quot;hello world!&quot;
&quot;hello@gmail.com&quot;
&quot;this has \&quot; &lt;&lt;-- speech marks! &quot;
</code></pre>
<p>Rejected <code>TextArgument</code> values:</p>
<pre><code>hello world
私
&quot;speech marks: &quot;&quot;
</code></pre>
<a class="header" href="#potential-uses-for-text-arguments" id="potential-uses-for-text-arguments"><h3>Potential uses for text arguments</h3></a>
<ul>
<li>A command to edit the contents on a sign</li>
<li>Any command that may require multiple text arguments</li>
</ul>
<a class="header" href="#greedy-string-argument" id="greedy-string-argument"><h2>Greedy string argument</h2></a>
<p>The <code>GreedyStringArgument</code> takes the <code>TextArgument</code> a step further. <strong>Any characters and symbols are allowed</strong> and quotation marks are not required. <strong>However, the <code>GreedyStringArgument</code> uses the entirety of the argument array from its position</strong>.</p>
<a class="header" href="#example---messaging-command" id="example---messaging-command"><h3>Example - Messaging command</h3></a>
<p>Say we have a command <code>/msg &lt;target&gt; &lt;message&gt;</code></p>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;target&quot;, new PlayerArgument());
arguments.put(&quot;message&quot;, new GreedyStringArgument());

CommandAPI.getInstance().register(&quot;msg&quot;, arguments, (sender, args) -&gt; {
    ((Player) args[0]).sendMessage((String) args[1]);
});
</code></pre>
<p>Any text entered after the <code>&lt;target&gt;</code> argument would be sent to the player. For example, the command could be used as follows:</p>
<pre><code>/msg Skepter This is some incredibly long string with &quot;symbols&quot; and $p3c!aL characters~
</code></pre>
<p>Due to the fact that <strong>the <code>GreedyStringArgument</code> has no terminator</strong> (it has infinite length), <strong>a <code>GreedyStringArgument</code> must be defined at the end of the <code>LinkedHashMap</code></strong> (otherwise the CommandAPI will throw a <code>GreedyStringException</code>)</p>
<p>For example, if the syntax was<code>/msg &lt;message&gt; &lt;target&gt;</code>, it would not be able to determine where the message ends and the <code>&lt;target&gt;</code> argument begins.</p>
<a class="header" href="#potential-uses-for-greedy-strings" id="potential-uses-for-greedy-strings"><h3>Potential uses for greedy strings</h3></a>
<ul>
<li>A messaging/whisper command</li>
<li>A mailing command</li>
<li>Any command involving lots of text, such as a book writing command</li>
<li>Any command which involves an unreasonable/unknown amount of arguments</li>
<li>Any command where you want to parse arguments similar to how regular Bukkit would</li>
</ul>
<a class="header" href="#entity--player-arguments" id="entity--player-arguments"><h1>Entity &amp; player arguments</h1></a>
<a class="header" href="#entity-selector-argument" id="entity-selector-argument"><h2>Entity selector argument</h2></a>
<p>Minecraft's <a href="https://minecraft.gamepedia.com/Commands#Target_selectors">target selectors</a> (e.g. <code>@a</code> or <code>@e</code>) are implemented using the <code>EntitySelectorArgument</code> class. This allows you to select specific entities based on certain attributes.</p>
<p>The <code>EntitySelectorArgument</code> constructor requires an <code>EntitySelector</code> argument to determine what type of data to return. There are 4 types of entity selections which are available:</p>
<ul>
<li><code>EntitySelector.ONE_ENTITY</code> - A single entity, which returns a <code>Entity</code> object.</li>
<li><code>EntitySelector.MANY_ENTITIES</code>  - A collection of many entities, which returns a <code>Collection&lt;Entity&gt;</code> object.</li>
<li><code>EntitySelector.ONE_PLAYER</code> - A single player, which returns a <code>Player</code> object.</li>
<li><code>EntitySelector.MANY_PLAYERS</code> - A collection of players, which returns a <code>Collection&lt;Player&gt;</code> object.</li>
</ul>
<p>The return type is the type to be cast when retrieved from the <code>Object[] args</code> in the command declaration.</p>
<a class="header" href="#example---kill-entities-command" id="example---kill-entities-command"><h3>Example - Kill entities command</h3></a>
<pre><code class="language-java">//LinkedHashMap to store arguments for the command
LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();

//Using a collective entity selector to select multiple entities
arguments.put(&quot;entities&quot;, new EntitySelectorArgument(EntitySelector.MANY_ENTITIES));

CommandAPI.getInstance().register(&quot;kill&quot;, arguments, (sender, args) -&gt; {
    
    //Parse the argument as a collection of entities (as stated above in the documentation)
    Collection&lt;Entity&gt; entities = (Collection&lt;Entity&gt;) args[0];
    sender.sendMessage(&quot;killed &quot; + entities.size() + &quot;entities&quot;);
    for(Entity e : entity)
        e.remove();
});
</code></pre>
<p>Example command usage for the above code would be:</p>
<ul>
<li>Kill all cows:
<pre><code>/kill @e[type=cow]
</code></pre>
</li>
<li>Kill the 10 furthest pigs from the command sender:
<pre><code>/kill @e[type=pig,limit=10,sort=furthest]
</code></pre>
</li>
</ul>
<a class="header" href="#player-argument" id="player-argument"><h2>Player argument</h2></a>
<p>The <code>PlayerArgument</code> class is very similar <em>(almost identical)</em> to <code>EntitySelectorArgument</code>, with the EntitySelector <code>ONE_PLAYER</code>. It also allows you to select a player based on their UUID.</p>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>I've not tested the <code>PlayerArgument</code> enough to recommend using it over the <code>EntitySelectorArgument(EntitySelector.ONE_PLAYER)</code>. There may be other advantages to using this than the regular EntitySelectorArgument, but as of writing this documentation, I know not of the advantages nor disadvantages to using this argument type. Internally, the <code>PlayerArgument</code> uses the <code>GameProfile</code> class from Mojang's authlib, which may be able to retrieve offline players (untested).</p>
</blockquote>
<a class="header" href="#entity-type-argument" id="entity-type-argument"><h2>Entity type argument</h2></a>
<p>The <code>EntityTypeArgument</code> class is used to retrieve a type of entity as defined in the <a href="https://hub.spigotmc.org/javadocs/bukkit/org/bukkit/entity/EntityType.html"><code>EntityType</code></a> enum. In other words, this is an entity type, for example a pig or a zombie.</p>
<a class="header" href="#example---spawning-entities" id="example---spawning-entities"><h3>Example - Spawning entities</h3></a>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();

arguments.put(&quot;entity&quot;, new EntityTypeArgument());
arguments.put(&quot;amount&quot;, new IntegerArgument(1, 100)); //Prevent spawning too many entities

CommandAPI.getInstance().register(&quot;spawnmob&quot;, arguments, (sender, args) -&gt; {
    Player player = (Player) sender;
    for(int i = 0; i &lt; (int) args[1]; i++) {
        player.getWorld().spawnEntity(player.getLocation(), (EntityType) args[0]);
    }
});
</code></pre>
<a class="header" href="#literal-arguments" id="literal-arguments"><h1>Literal arguments</h1></a>
<p>Literal arguments are used to represent &quot;forced options&quot; for a command. For instance, take Minecraft's <code>/gamemode</code> command. The syntax consists of the following:</p>
<pre><code>/gamemode &lt;mode&gt; [player]
</code></pre>
<p>It consists of a gamemode, followed by an optional player argument. The list of gamemodes are as follows:</p>
<pre><code>/gamemode survival 
/gamemode creative
/gamemode adventure
/gamemode spectator
</code></pre>
<p>Unlike regular commands (as those implemented by Bukkit for example), these four options are &quot;hardcoded&quot; - they're not &quot;suggestions&quot;. The user can <em>only</em> enter one of these four examples, no other values are allowed.</p>
<a class="header" href="#literal-arguments-vs-regular-arguments" id="literal-arguments-vs-regular-arguments"><h2>Literal arguments vs regular arguments</h2></a>
<p>Unlike regular arguments that are shown in this chapter, the literal argument is <em>technically</em> not an argument. Due to this fact, the literal argument is <strong>not</strong> present in the <code>args[]</code> for the command declaration.</p>
<a class="header" href="#example---literal-arguments-and-regular-arguments" id="example---literal-arguments-and-regular-arguments"><h3>Example - Literal arguments and regular arguments</h3></a>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;literal&quot;, new LiteralArgument(&quot;hello&quot;));
arguments.put(&quot;text&quot;, new TextArgument());

CommandAPI.getInstance().register(&quot;mycommand&quot;, arguments, (sender, args) -&gt; {
    /* This gives the variable &quot;text&quot; the contents of the 
     * TextArgument, and not the literal &quot;hello&quot; */
    String text = (String) args[0];
});
</code></pre>
<p>As you can see from this example, when you retrieve <code>args[0]</code>, it returns the value of the <code>TextArgument</code> instead of the <code>LiteralArgument</code></p>
<a class="header" href="#example---gamemode-command-using-literal-arguments" id="example---gamemode-command-using-literal-arguments"><h2>Example - Gamemode command using literal arguments</h2></a>
<p>This is a demonstration of how you could create a command similar to Minecraft's <code>/gamemode</code> command by using literal arguments. To do this, we are effectively registering 4 separate commands, each called <code>/gamemode</code>, but with different literal arguments.</p>
<pre><code class="language-java">//Create a map of gamemode names to their respective objects
HashMap&lt;String, GameMode&gt; gamemodes = new HashMap&lt;&gt;();
gamemodes.put(&quot;adventure&quot;, GameMode.ADVENTURE);
gamemodes.put(&quot;creative&quot;, GameMode.CREATIVE);
gamemodes.put(&quot;spectator&quot;, GameMode.SPECTATOR);
gamemodes.put(&quot;survival&quot;, GameMode.SURVIVAL);

//Iterate over the map
for(String key : gamemodes.keySet()) {
    
    //Create our arguments as usual, using the LiteralArgument for the name of the gamemode
    LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
    arguments.put(key, new LiteralArgument(key));
    
    //Register the command as usual
    CommandAPI.getInstance().register(&quot;gamemode&quot;, arguments, (sender, args) -&gt; {
        if(sender instanceof Player) {
            Player player = (Player) sender;
            
            //Retrieve the object from the map via the key and NOT the args[]
            player.setGameMode(gamemodes.get(key));
        }
    });
}
</code></pre>
<a class="header" href="#literal-argument-warnings" id="literal-argument-warnings"><h2>Literal argument warnings</h2></a>
<p>Literal arguments require a string in the constructor. If the literal is an empty String or is null, the CommandAPI will throw a <code>BadLiteralException</code>.</p>
<p>Because literal arguments are <em>&quot;hardcoded&quot;</em>, each literal is effectively mapped to a single command. This is shown when using the configuration option <code>create-dispatcher-json: true</code> which shows the JSON result of registered commands. For instance, take the <code>/defaultgamemode</code> command:</p>
<pre><code class="language-json">&quot;defaultgamemode&quot;: {
    &quot;type&quot;: &quot;literal&quot;,
    &quot;children&quot;: {
        &quot;adventure&quot;: {
            &quot;type&quot;: &quot;literal&quot;,
            &quot;executable&quot;: true
        },
        &quot;creative&quot;: {
            &quot;type&quot;: &quot;literal&quot;,
            &quot;executable&quot;: true
        },
        &quot;spectator&quot;: {
            &quot;type&quot;: &quot;literal&quot;,
            &quot;executable&quot;: true
        },
        &quot;survival&quot;: {
            &quot;type&quot;: &quot;literal&quot;,
            &quot;executable&quot;: true
        }
    }
},
</code></pre>
<p>Each option produces a new &quot;command&quot; in the tree of commands. This means that having exceptionally large lists of literals, or nested literals (e.g. <code>/command &lt;literal1&gt; &lt;literal2&gt;</code>) can cause very large trees which cannot be sent to the clients <em>(it can cause clients to crash)</em>.</p>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>Take care when using literal arguments. If your list of arguments is exceptionally large, or contains many nested arguments, the server may be unable to send the command information to the client. If many command argument choices are required, consider using a <code>StringArgument</code> and using <code>.overrideSuggestions()</code> to create your own list of required arguments.</p>
</blockquote>
<a class="header" href="#dynamically-suggested-arguments" id="dynamically-suggested-arguments"><h1>Dynamically suggested arguments</h1></a>
<p>Dynamically suggested arguments lets you provide a function to generate arguments dynamically. This is achieved using the <code>DynamicSuggestedStringArgument</code> class, which has two constuctor formats:</p>
<pre><code class="language-java">//Constructor requires a function which returns a String[]
new DynamicSuggestedStringArgument(() -&gt; return new String[]);

//Constructor requires a function which returns a String[] and receives a sender input
new DynamicSuggestedStringArgument((sender) -&gt; return new String[]);
</code></pre>
<p>The first one simply lets you return a list of strings as suggestions. Whenever a player begins typing a command, a packet is sent to the server and it will return the list of suggestions <em>(similar to tab completion)</em>. The second constructor allows you to also use the command sender as an input <em>(of type <code>CommandSender</code>)</em>, which can be used for more intricate suggestions.</p>
<a class="header" href="#example---friend-command-with-dynamic-suggestions" id="example---friend-command-with-dynamic-suggestions"><h2>Example - Friend command with dynamic suggestions</h2></a>
<p>Say we want a plugin which is a friend system. The friend system allows you to add friends and when you've made a friend, you can message them.</p>
<pre><code>/friend &lt;player&gt;       - Adds a player as a friend
/msgf   &lt;player&gt; &lt;msg&gt; - Message a friend
</code></pre>
<pre><code class="language-java">//Global mapping of a player to a list of their friends
final Map&lt;String, List&lt;String&gt;&gt; friends = new ArrayList&lt;&gt;();

//Register /friend command
LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;friend&quot;, new PlayerArgument());

CommandAPI.getInstance().register(&quot;friend&quot;, arguments, (sender, args) -&gt; {
    
    //Get list of friends from the sender
    List&lt;String&gt; senderFriends;

    if(friends.containsKey(sender.getName())) {
        senderFriends = friends.get(sender.getName());
    } else {
        senderFriends = new ArrayList&lt;&gt;(); 
    }

    //Add friend to the global map
    senderFriends.put(((Player) args[0]).getName());
    friends.put(sender.getName(), senderFriends);
});

//Register /msgf command
arguments.clear();

/* Use a DynamicSuggestedStringArgument which consists of the names of
 * friends for that player. Don't forget that this returns a String */
arguments.put(&quot;friend&quot;, new DynamicSuggestedStringArgument((sender) -&gt; {
    List&lt;String&gt; senderFriends = friends.get(sender.getName());
    return senderFriends.toArray(new String[senderFriends.size()]);
}));

arguments.put(&quot;message&quot;, new GreedyStringArgument());

CommandAPI.getInstance().register(&quot;msgf&quot;, arguments, (sender, args) -&gt; {
    //Parse the target player from the String, failing if it can't find that player
    Player target = Bukkit.getPlayer((String) args[0]);
    if(target == null) {
        CommandAPI.fail(&quot;Couldn't find that player!&quot;);
    } else {
        target.sendMessage((String) args[1]);
    }
});
</code></pre>
<p>A thing to note from the code above: The DynamicSuggestedStringArgument is a <em>String</em> argument, meaning that the resulting type is a <em>String</em>. Despite the fact that we want a player object, the CommandAPI only lets you make dynamic suggestions for Strings. Therefore, it <em>could</em> fail in this situation (if the target player isn't found), and we have to handle that case on our own. If we had used a <code>PlayerArgument</code>, that argument would automatically fail due to the implementation of the player argument.</p>
<a class="header" href="#custom-arguments" id="custom-arguments"><h1>Custom arguments</h1></a>
<p>Custom arguments are arguably the most powerful argument that the CommandAPI offers. This argument is used to represent any String, or Minecraft key <em>(Something of the form <code>String:String</code>, such as <code>minecraft:diamond</code>)</em></p>
<p>In order to specify which type of custom argument is being used, the additional flag <code>keyed</code> can be added by, instead of using the default constructor which requires a lambda, you use the alternate constructor which requires a lambda, followed by <code>true</code>, which represents a Minecraft key input.</p>
<pre><code class="language-java">new CustomArgument&lt;T&gt;((input) -&gt; { 
    /* Code which handles input */ 
    return //Some object of type T;
}, true);
</code></pre>
<p>The custom argument requires the type of the target object that the custom argument will return when parsing the arguments for a command. For instance, if you have a <code>CustomArgument&lt;Player&gt;</code>, then when parsing the arguments for the command, you would cast to a Player object: <code>(Player) args[n]</code>.</p>
<a class="header" href="#example---scoreboard-objectives-as-a-custom-argument" id="example---scoreboard-objectives-as-a-custom-argument"><h2>Example - Scoreboard objectives as a custom argument</h2></a>
<p>Here, we aim to create a custom argument that represents the <a href="https://hub.spigotmc.org/javadocs/bukkit/org/bukkit/scoreboard/Objective.html">Objective</a> object for a scoreboard.</p>
<pre><code class="language-java">//Function that returns a CustomArgument&lt;Object&gt;
private CustomArgument&lt;Objective&gt; objectiveArgument() {
    Scoreboard scoreboard = Bukkit.getScoreboardManager().getMainScoreboard();

    /* Create our CustomArgument instance. This takes an input of a 
     * lambda that takes in a String and returns an Objective object. */
    return new CustomArgument&lt;Objective&gt;((input) -&gt; {

        //Parse the objective
        if(scoreboard.getObjective(input) == null) {

            //Throw a custom error to the user if it fails to get the objective
            CustomArgument.throwError(new MessageBuilder(&quot;Unknown objective: &quot;).appendArgInput());
            return null;
        } else {
            return scoreboard.getObjective(input);
        }
    
    //Use .overrideSuggestions to suggest the list of names of objectives
    }).overrideSuggestions(scoreboard.getObjectives().stream().map(o -&gt; o.getName()).toArray(String[]::new));
}
</code></pre>
<p>From the code above, it uses the <code>CustomArgument.throwError</code> function which throws an error to the command sender if the command that they input is invalid. The <code>throwError</code> function can accept one of two parameters:</p>
<pre><code class="language-javaHookedUpHentai">CustomArgument.throwError(String message)
CustomArgument.throwError(MessageBuilder message)
</code></pre>
<a class="header" href="#message-builders" id="message-builders"><h2>Message Builders</h2></a>
<p>The <code>MessageBuilder</code> class is a class to easily create messages to describe errors when a sender sends a command which does not meet the expected syntax for an argument. It acts in a similar way to a <code>StringBuilder</code>, where you can append content to the end of a String.</p>
<p>The following methods are as follows:</p>
<table><thead><tr><th> Method </th><th> Description </th></tr></thead><tbody>
<tr><td> <code>appendArgInput()</code> </td><td> Appends the argument that failed that the sender submitted to the end of the builder. E.g. <code>/foo bar</code> will append <code>bar</code> </td></tr>
<tr><td> <code>appendFullInput()</code> </td><td> Appends the full command that a sender submitted to the end of the builder. E.g. <code>/foo bar</code> will append <code>foo bar</code> </td></tr>
<tr><td> <code>appendHere()</code> </td><td> Appends the text <code>&lt;--[HERE]</code> to the end of the builder </td></tr>
<tr><td> <code>append(Object)</code></td><td> Appends the object to the end of the builder </td></tr>
</tbody></table>
<a class="header" href="#example---message-builder-for-invalid-objective-argument" id="example---message-builder-for-invalid-objective-argument"><h3>Example - Message builder for invalid objective argument</h3></a>
<p>See the code above, which uses the following code snippet:</p>
<pre><code class="language-java">//Creates a MessageBuilder object that handles an invalid objective. 
new MessageBuilder(&quot;Unknown objective: &quot;).appendArgInput();
</code></pre>
<a class="header" href="#defined-custom-arguments" id="defined-custom-arguments"><h2>Defined custom arguments</h2></a>
<p>The CommandAPI has a few custom arguments which have been predefined, in the <code>DefinedCustomArguments</code> class. The methods are as follows:</p>
<pre><code class="language-java">DefinedCustomArguments.objectiveArgument(); //CustomArgument&lt;Objective&gt;
DefinedCustomArguments.teamArgument();      //CustomArgument&lt;Team&gt;
</code></pre>
<p>These are included to help reduce the amount of code required if you were to implement custom arguments for the types stated above.</p>
<a class="header" href="#technical-arguments" id="technical-arguments"><h1>Technical arguments</h1></a>
<p>As of version 2.1, the CommandAPI has additional support for <em>technical arguments</em>. These consist of Minecraft &quot;Keyed&quot; arguments <em>(something that takes the form of <code>String:String</code>, such as <code>minecraft:diamond</code>)</em>.</p>
<p>Based on the nature of technical arguments, <strong>these are unlikely to survive Minecraft updates</strong> and support for these will be implemented as soon as possible when new Minecraft updates are released. <em>(For example, advancement arguments are compatible with Minecraft 1.14, 1.14.1 and 1.14.2, but required a rewrite to enable support for 1.14.3+)</em></p>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>As with any future bug, if you notice that a technical argument does not work with a specific version of Minecraft <em>(1.13.2+)</em>, I'd be grateful if you could submit a bug report on <a href="https://github.com/JorelAli/1.13-Command-API/issues/new/choose">the CommandAPI's issues page</a> and I'll try to fix it as soon as I can!</p>
</blockquote>
<p>Technical arguments are also compatible with data packs which allow you to add additional content to the game. In particular, Advancements, Loot Tables and Recipes are supported to allow extra interaction between Bukkit and data packs.</p>
<a class="header" href="#sound-argument" id="sound-argument"><h1>Sound argument</h1></a>
<p>The <code>SoundArgument</code> class allows a command sender to retrieve the Bukkit <code>Sound</code> object to represent in-game sound effects (such as mob sounds or ambient sound effects), as well as in-game music.</p>
<a class="header" href="#example---playing-sound-to-yourself" id="example---playing-sound-to-yourself"><h2>Example - Playing sound to yourself</h2></a>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;sound&quot;, new SoundArgument());

CommandAPI.getInstance().register(&quot;sound&quot;, arguments, (sender, args) -&gt; {
    Sound sound = (Sound) args[0];
    Player player = (Player) sender;
    player.getWorld().playSound(player.getLocation(), sound, 100.0f, 1.0f);
});
</code></pre>
<a class="header" href="#advancement-argument" id="advancement-argument"><h1>Advancement argument</h1></a>
<p>The <code>AdvancementArgument</code> class is used to represent Bukkit <code>Advancement</code> objects. This can be used to get the advancement progress for a player and a specific advancement, as well as awarding advancements programmatically.</p>
<a class="header" href="#example---awarding-an-advancement-to-a-player" id="example---awarding-an-advancement-to-a-player"><h2>Example - Awarding an advancement to a player</h2></a>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;advancement&quot;, new AdvancementArgument());

CommandAPI.getInstance().register(&quot;giveadvancement&quot;, arguments, (sender, args) -&gt; {
    Advancement advancement = (Advancement) args[0];
    Player player = (Player) sender;
    
    advancement.getCriteria().forEach(criteria -&gt; {
        player.getAdvancementProgress(advancement).awardCriteria(criteria);
    });
});
</code></pre>
<a class="header" href="#recipe-argument" id="recipe-argument"><h1>Recipe argument</h1></a>
<p>The <code>RecipeArgument</code> class lets you retrieve Bukkit's <code>Recipe</code> object.</p>
<a class="header" href="#example---giving-the-result-of-a-recipe" id="example---giving-the-result-of-a-recipe"><h2>Example - Giving the result of a recipe</h2></a>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;recipe&quot;, new RecipeArgument());

CommandAPI.getInstance().register(&quot;giverecipe&quot;, arguments, (sender, args) -&gt; {
    Recipe recipe = (Recipe) args[0];
    Player player = (Player) sender;        

    player.getInventory().addItem(recipe.getResult());
});
</code></pre>
<a class="header" href="#loottable-argument" id="loottable-argument"><h1>LootTable argument</h1></a>
<p>The <code>LootTableArgument</code> class can be used to get a Bukkit <code>LootTable</code> object.</p>
<a class="header" href="#example---_ツ_" id="example---_ツ_"><h2>Example - ¯\_(ツ)_/¯</h2></a>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;loottable&quot;, new LootTableArgument());

CommandAPI.getInstance().register(&quot;giveloottable&quot;, arguments, (sender, args) -&gt; {
    LootTable lootTable = (LootTable) args[0];
    Player player = (Player) sender;
    
    LootContext context = /* Some generated LootContext relating to the lootTable*/
    lootTable.fillInventory(player.getInventory(), new Random(), context);
}); 
</code></pre>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>Honestly, I've not managed to get a successful example of using a <code>LootTable</code> in practice, due to being unable to generate a suitable <code>LootContext</code>. If you believe you can supply a suitable example for this page, feel free to send an example <a href="https://github.com/JorelAli/1.13-Command-API/issues/new/choose">on the CommandAPI issues page</a>.</p>
</blockquote>
<a class="header" href="#functions" id="functions"><h1>Functions</h1></a>
<p>The CommandAPI has support to use Minecraft's <a href="https://minecraft.gamepedia.com/Function_(Java_Edtion)">functions</a> within your plugins. This is handled by using a class provided by the CommandAPI called <code>FunctionWrapper</code>, which allows you to execute functions. The CommandAPI also provides support to let you run your own commands within Minecraft function files.</p>
<a class="header" href="#using-custom-commands-in-functions" id="using-custom-commands-in-functions"><h2>Using custom commands in functions</h2></a>
<p>In order to use a command from your plugin in a <code>.mcfunction</code> file, you must register your command in your plugin's <code>onLoad()</code> method, instead of the <code>onEnable()</code> method. Failure to do so will not allow the command to be registered for Minecraft functions, causing the function file to fail to load during the server startup phase.</p>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>In short, if you want to register a command which can be used in Minecraft functions, register it in your plugin's <code>onLoad()</code> method.</p>
</blockquote>
<a class="header" href="#example---registering-command-for-use-in-a-function" id="example---registering-command-for-use-in-a-function"><h3>Example - Registering command for use in a function</h3></a>
<pre><code class="language-java">public class Main extends JavaPlugin {

    @Override
    public void onLoad() {
        //Commands which will be used in Minecraft functions are registered here

        CommandAPI.getInstance().register(&quot;killall&quot;, new LinkedHashMap&lt;&gt;(), (sender, args) -&gt; {
            //Kills all enemies in all worlds
            Bukkit.getWorlds()
                .forEach(w -&gt; w.getLivingEntities()
                    .forEach(e -&gt; e.setHealth(0))
                );
        });
    }
    
    @Override
    public void onEnable() {
        //Register all other commands here
    } 
}
</code></pre>
<a class="header" href="#setting-up-functions--tags" id="setting-up-functions--tags"><h1>Setting up functions &amp; tags</h1></a>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>Most developers can completely skip this section. This is for those that are unfamiliar with functions and tags and is less about how the CommandAPI works.</p>
</blockquote>
<p>This section explains how functions are declared and set up for use in a Minecraft server. This is ideal for server owners who've never set up functions, or developers <em>(like the Command API's creator)</em> that has no idea how to set this sort of thing up.</p>
<a class="header" href="#creating-functions" id="creating-functions"><h2>Creating functions</h2></a>
<p>Functions are text files <em>(with the <code>.mcfunction</code> extension)</em> which contains lists of functions which are executed one after another. Each line of the file is a valid Minecraft command. Say we have <code>text.mcfunction</code>:</p>
<pre><code>killall
say Killed all living entities on the server
</code></pre>
<p>This will run the custom command killall <em>(as declared in <strong>Chapter 5 - Functions</strong>)</em>, and then broadcast a message to all players stating that all entities were killed.</p>
<a class="header" href="#creating-tags" id="creating-tags"><h2>Creating tags</h2></a>
<p>Tags are json files which contain a list of functions. Tags let you run multiple functions at a time. Say we have a tag called <code>mytag.json</code>:</p>
<pre><code class="language-json">{
    &quot;values&quot;: [
        &quot;mycustomnamespace:test&quot;,
        &quot;mycustomnamespace:test2&quot;
    ]
}
</code></pre>
<p>This will run the function <code>test</code> and the function <code>test2</code>, which are in the namespace <code>mycustomnamespace</code>.</p>
<a class="header" href="#namespaces--where-to-place-everything" id="namespaces--where-to-place-everything"><h2>Namespaces &amp; where to place everything</h2></a>
<p>The following hierarchy explains where functions and tags go. In this diagram, the two functions <code>test</code> and <code>test2</code> are in a directory called <code>functions</code>. There is also a tag called <code>mytag</code> which is placed in the <code>tags</code> directory under <code>functions</code>. These are all under the <em>namespace</em> called <code>mycustomnamespace</code></p>
<pre><code>server/
├── world/
│   ├── advancements/
│   ├── data/
│   ├── datapacks/
│   │   └── bukkit/
│   │       ├── pack.mcmeta
│   │       └── data/
│   │           └── mycustomnamespace/
│   │               ├── functions/
│   │               │   ├── test.mcfunction
│   │               │   └── test2.mcfunction
│   │               └── tags/
│   │                   └── functions/
│   │                       └── mytag.json
│   └── ...
├── world_nether/
├── world_the_end/
├── ...
└── spigot.jar
</code></pre>
<p>To execute the <code>test</code> function, you would run the following command:</p>
<pre><code>/function mycustomnamespace:test
</code></pre>
<p>To execute the <code>mytag</code> tag, you would run the following command:</p>
<pre><code>/function #mycustomnamespace:mytag
</code></pre>
<a class="header" href="#the-functionwrapper" id="the-functionwrapper"><h1>The FunctionWrapper</h1></a>
<p>The CommandAPI includes the <code>FunctionWrapper</code> class which is a wrapper for Minecraft's functions. It allows you to execute the commands that are represented by the respective <code>.mcfunction</code> file. There most important thing to note with the <code>FunctionWrapper</code>, and that it <em>does not &quot;store&quot; the functions inside it</em>, instead it just <em>stores what the function does</em>. In other words, you cannot &quot;extract&quot; the list of commands from a <code>FunctionWrapper</code> object.</p>
<a class="header" href="#functionwrapper-methods" id="functionwrapper-methods"><h2>FunctionWrapper methods</h2></a>
<p>The <code>FunctionWrapper</code> class consists of two methods:</p>
<table><thead><tr><th> Method            </th><th> Result on execution                                  </th></tr></thead><tbody>
<tr><td> <code>run()</code>           </td><td> Executes the Minecraft function                      </td></tr>
<tr><td> <code>runAs(Entity)</code>   </td><td> Executes the Minecraft function as a specific Entity </td></tr>
</tbody></table>
<p>The <code>FunctionWrapper</code> also implements the <code>Keyed</code> interface, allowing you to retrieve the NamespacedKey for this function using <code>getKey()</code>.</p>
<a class="header" href="#function-arguments" id="function-arguments"><h1>Function arguments</h1></a>
<p>The <code>FunctionArgument</code> class is used to represent a function or a tag in Minecraft. When retrieving an instance of the argument, it will return a <code>FunctionWrapper[]</code>, where each <code>FunctionWrapper</code> consists of a Minecraft function.</p>
<p>Therefore, if a user supplies a single function, the <code>FunctionWrapper[]</code> will be of size 1, and if the user supplies a tag which can consist of multiple functions, the <code>FunctionWrapper[]</code> will consist of the array of functions as declared by that tag.</p>
<a class="header" href="#example---minecrafts-function-command" id="example---minecrafts-function-command"><h2>Example - Minecraft's /function command</h2></a>
<p>Here, we implement Minecraft's <code>/function</code> command which is used to execute a function.</p>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;function&quot;, new FunctionArgument());

CommandAPI.getInstance().register(&quot;runfunction&quot;, arguments, (sender, args) -&gt; {
    FunctionWrapper[] functions = (FunctionWrapper[]) args[0];

    //Run all functions that the user stated
    for(FunctionWrapper function : functions) {
        function.run();
    }

});
</code></pre>
<a class="header" href="#permissions" id="permissions"><h1>Permissions</h1></a>
<p>Permissions let you control which players are allowed to execute which commands. This is handled using the <code>CommandPermission</code> class, which has the following uses:</p>
<ul>
<li>Requires OP to execute a command:
<pre><code class="language-java">CommandPermission.OP
</code></pre>
</li>
<li>Anyone can execute a command:
<pre><code class="language-java">CommandPermission.NONE
</code></pre>
</li>
<li>Requires a specific permission node to exeucte a command:
<pre><code class="language-java">CommandPermission.fromString(&quot;my.permission&quot;)
</code></pre>
</li>
</ul>
<a class="header" href="#registering-permissions-to-commands" id="registering-permissions-to-commands"><h2>Registering permissions to commands</h2></a>
<p>To add a permission to a command, you can use any of the following constructors with a valid <code>CommandAPI</code> instance:</p>
<pre><code class="language-java">register(String commandName, CommandPermission, LinkedHashMap&lt;String, Argument&gt;, CommandExecutor);
register(String commandName, CommandPermission, String[] aliases, LinkedHashMap&lt;String, Argument&gt;, CommandExecutor)
</code></pre>
<a class="header" href="#example---god-command-with-permissions" id="example---god-command-with-permissions"><h3>Example - /god command with permissions</h3></a>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();

//Register the /god command with the permission node &quot;command.god&quot;
CommandAPI.getInstance().register(&quot;god&quot;, CommandPermission.fromString(&quot;command.god&quot;), arguments, (sender, args) -&gt; {
    if(sender instanceof Player) {
        ((Player) sender).setInvulnerable(true);
    }
});

//Add a target argument to allow /god &lt;target&gt;
arguments.put(&quot;target&quot;, new EntitySelectorArgument(EntitySelector.ONE_PLAYER));

//Require &quot;command.god&quot; permission node to execute /god &lt;target&gt;
CommandAPI.getInstance().register(&quot;god&quot;, CommandPermission.fromString(&quot;command.god&quot;), arguments, (sender, args) -&gt; {
    ((Player) args[0]).setInvulnerable(true);
});
</code></pre>
<a class="header" href="#registering-permissions-to-arguments" id="registering-permissions-to-arguments"><h2>Registering permissions to arguments</h2></a>
<p>For further fine-tuning of permission management, the CommandAPI allows you to add permissions to individual arguments. This prevents the user from executing a command with a specific argument if they do not have a specific permission.</p>
<p>This is done by using the <code>.withPermission(CommandPermission)</code> method at the end of an argument.</p>
<p>If a player does not have the required permission:</p>
<ul>
<li>The argument hover text which suggests what the command is will not be shown</li>
<li>The player will receive an error if they try to type something in for that argument</li>
<li>Suggestions, such as a list of materials or players will not be shown</li>
</ul>
<a class="header" href="#example---kill-command-with-argument-permissions" id="example---kill-command-with-argument-permissions"><h3>Example - /kill command with argument permissions</h3></a>
<pre><code class="language-java">LinkedHashMap&lt;String, ArgumentType&gt; arguments = new LinkedHashMap&lt;&gt;();

//Register /kill command normally. Since no permissions are applied, anyone can run this command
CommandAPI.getInstance().register(&quot;kill&quot;, arguments, (sender, args) -&gt; {
    ((Player) sender).setHealth(0);
});

//Adds the OP permission to the &quot;target&quot; argument. The sender requires OP to execute /kill &lt;target&gt;
arguments.put(&quot;target&quot;, new PlayerArgument().withPermission(CommandPermission.OP));

CommandAPI.getInstance().register(&quot;kill&quot;, arguments, (sender, args) -&gt; {
    ((Player) args[0]).setHealth(0);
});
</code></pre>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>As you can see, there are multiple ways of applying permissions to commands with arguments. In the /god command shown above, the permission was applied to the whole command. In the /kill command shown above, the permission was applied to the argument.</p>
<p>There's not really much difference between the two methods, but I personally would use argument permissions with <code>.withPermission()</code> as it has greater control over arguments.</p>
</blockquote>
<a class="header" href="#aliases" id="aliases"><h1>Aliases</h1></a>
<p>Aliases let you create aliases for commands. They are simply added at command regisration time by using either of the following methods:</p>
<pre><code class="language-java">CommandAPI.getInstance().register(String, String[], LinkedHashMap, CommandExecutor);
CommandAPI.getInstance().register(String, CommandPermission, String[], LinkedHashMap, CommandExecutor);
</code></pre>
<p>The <code>String[]</code> represents a list of aliases which can be used to execute a command.</p>
<a class="header" href="#example---using-aliases-for-gamemode" id="example---using-aliases-for-gamemode"><h2>Example - Using aliases for /gamemode</h2></a>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
//populate arguments here

CommandAPI.getInstance().register(&quot;gamemode&quot;, new String[] {&quot;gm&quot;}, arguments, (sender, args) -&gt; {
    //Handle gamemode command here
});
</code></pre>
<a class="header" href="#command-conversion" id="command-conversion"><h1>Command conversion</h1></a>
<p>Since the CommandAPI is used to register commands as a vanilla Minecraft command, you may want to use other plugins that are not written with the CommandAPI. For instance, if you want to include a command from a plugin which doesn't use the CommandAPI in a commandblock, <em>(such as the <code>/execute</code> command)</em>, you can use the CommandAPI's command conversion system.</p>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>The command conversion system is nowhere near perfect. It tries its best to connect Bukkit plugins to vanilla Minecraft commands, but is not guaranteed to run flawlessly. If possible, consider forking/requesting a plugin and writing it with compatibility for the CommandAPI.</p>
</blockquote>
<a class="header" href="#entire-plugins" id="entire-plugins"><h2>Entire plugins</h2></a>
<p>To register all commands that are declared by a plugin, the <code>Converter.convert(Plugin)</code> method can be used. This attempts to register all commands declared in a plugin's <code>plugin.yml</code> file, as well as any aliases or permissions stated in the <code>plugin.yml</code> file.</p>
<p>It is important to note that the plugin must be loaded before your plugin before attempting conversion. <em>(Use <code>loadbefore: [YourPlugin, CommandAPI]</code> to ensure it loads before your plugin)</em></p>
<a class="header" href="#example---converting-commands-for-a-plugin" id="example---converting-commands-for-a-plugin"><h3>Example - Converting commands for a plugin</h3></a>
<p>Say you have some <code>plugin.yml</code> file for a plugin.</p>
<pre><code class="language-yaml">name: myPlugin
main: some.random.package.Main
loadbefore: [CommandAPI]
version: 1.0
commands:
  gmc:
    aliases: gm1
  gms:
  i:
    permission: item.permission
</code></pre>
<p>Then, the following code will register the commands <code>/gmc</code>, <code>/gm1</code>, <code>/gms</code> and <code>/i</code>:</p>
<pre><code class="language-java">Converter.convert(Bukkit.getPluginManager().getPlugin(&quot;myPlugin&quot;));
</code></pre>
<a class="header" href="#only-specific-commands" id="only-specific-commands"><h2>Only specific commands</h2></a>
<p>In addition to converting the whole plugin, the CommandAPI allows you to convert single commands at a time using the <code>Converter.convert(Plugin, String)</code> method, where the <code>String</code> argument refers to the command name as declared in the plugin's <code>plugin.yml</code> file.</p>
<a class="header" href="#troubleshooting" id="troubleshooting"><h1>Troubleshooting</h1></a>
<p>This section basically summarizes the list of things that <em>could</em> go wrong with the CommandAPI and how to mitigate these circumstances.</p>
<a class="header" href="#serverplugin-reloading" id="serverplugin-reloading"><h2>Server/Plugin reloading</h2></a>
<p>Due to the implementation of the CommandAPI, the CommandAPI does <strong>not</strong> support plugin reloading for plugins that use the CommandAPI. This includes, but is not limited to:</p>
<ul>
<li>The <code>/reload</code> command which reloads all plugins on the server</li>
<li>Plugin reloading plugins, such as <a href="https://dev.bukkit.org/projects/plugman">PlugMan</a></li>
<li>Any form of plugin enabling/disabling process for plugins which register commands via the CommandAPI</li>
</ul>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>Plugin reloading gets very complicated with respect to the CommandAPI. Since the loading sequence of Minecraft commands is so picky, reloading the CommandAPI or a plugin which registers commands can cause commands to be re-registered. This can lead to very odd effects, such as command collisions <em>(commands just don't work)</em>, to duplicate commands being registered under different namespaces <em>(e.g. plugins are registered under Bukkit as well as Minecraft)</em>. These effects are not &quot;100% guaranteed&quot; and have only been seen during dodgy tests. In short, <strong>do not enable or reload plugins</strong>, and <strong>absolutely do not reload the server with <code>/reload</code></strong></p>
</blockquote>
<a class="header" href="#players-cannot-connecttimeout-when-joining" id="players-cannot-connecttimeout-when-joining"><h2>Players cannot connect/timeout when joining</h2></a>
<p>If players cannot connect, this could be due to the size of the command data packet. To see the resultant packet being sent to players when they log in, enable the <code>create-dispatcher-json: true</code> setting and view the file size of the resultant file. If the file size is abnormally large <em>(Over 2MB is considered very large)</em>, consider reducing the number of <code>LiteralArguments</code> which your plugin uses.</p>
<a class="header" href="#the-server-just-hangsslows-down-on-my-paperspigot-server" id="the-server-just-hangsslows-down-on-my-paperspigot-server"><h2>The server just hangs/slows down on my PaperSpigot server</h2></a>
<p>Officially, the CommandAPI does <em>not</em> really support PaperSpigot. As PaperSpigot is a fork of Spigot, it just assumes that it'll work on PaperSpigot if it works on Spigot.</p>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>There's a few things I personally don't like about PaperSpigot:</p>
<ul>
<li><a href="https://paper.readthedocs.io/en/stable/about/faq.html#what-can-i-do-with-paper">Their developer documentation is non-existant</a></li>
<li><a href="https://papermc.io/javadocs/paper/1.13/overview-summary.html">Their JavaDocs</a> are very... lacking of documentation</li>
<li>I personally think it's harder to keep track of new changes between Minecraft upgrades for PaperSpigot compared to Spigot's BuildTools</li>
</ul>
</blockquote>
<a class="header" href="#command-conversion-throws-a-nullpointerexception" id="command-conversion-throws-a-nullpointerexception"><h2>Command conversion throws a <code>NullPointerException</code></h2></a>
<p>This is likely caused by the fact that the plugin you want to convert hasn't been loaded yet. Ensure that it loads before your plugin by adding the following to the target plugin's <code>plugin.yml</code> file:</p>
<pre><code class="language-yaml">loadbefore: [YourPlugin, CommandAPI]
</code></pre>
<a class="header" href="#aliases-dont-work-properly-it-says-unknown-command" id="aliases-dont-work-properly-it-says-unknown-command"><h2>Aliases don't work properly (It says unknown command)</h2></a>
<p>This is a persistent bug which has been resolved in version 2.1+ of the CommandAPI.</p>
<a class="header" href="#my-issue-isnt-on-here-what-do-i-do" id="my-issue-isnt-on-here-what-do-i-do"><h2>My issue isn't on here, what do I do?!</h2></a>
<p>If you've found a bug that isn't solvable here, submit a bug report on <a href="https://github.com/JorelAli/1.13-Command-API/issues/new/choose">the CommandAPI's issues page</a> and I'll try my best to resolve the issue!</p>
<a class="header" href="#afterword" id="afterword"><h1>Afterword</h1></a>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>Congratulations on making it to the end of the documentation! I hope it was easy to understand everything ... I feel like it's a bit content heavy.</p>
<p>This project is by far my most worked on and probably the project I'm most proud of. You can read about the creation of the CommandAPI in my blog post <a href="https://www.jorelsblog.co.uk/Creating-the-CommandAPI/">here</a>.</p>
<p>I'd like to give credit to all of the people that have opened issues on GitHub, that have truly made it what it is now. In particular, I'd like to thank:</p>
<ul>
<li><strong>Combustible</strong> - My #1 supporter who motivated me to keep this project alive after its release</li>
<li><strong>DerpNerb</strong> - Giving me the idea to change this to a Maven project has made the CommandAPI that much more accessible for everyone</li>
<li><strong>Draycia</strong> - Suggesting that I put CommandSender objects inside DynamicSuggestedStringArguments allow that argument to be that much more powerful</li>
<li><strong>HielkeMinecraft</strong> - Improving the LocationArgument class, adding results and successes for commandsd and being a great bug reporter in general</li>
<li><strong>i509VCB</strong> - Generally a really good bug spotter. Discovered a severe bug that made libraries depending on the CommandAPI depend on Brigadier</li>
<li><strong>Tinkot</strong> - Gave a review of the CommandAPI on its spigot page. This motivated me to fix a 6 month old bug</li>
</ul>
<p>I never really expected more than 5 or so people to use this API, so it was truly an exciting time creating this for everyone - seeing everyone's responses, issues and problems helped me keep going.</p>
<p>In short, thank you, and everyone else that helped make the commandAPI what it is.</p>
</blockquote>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
