<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js rust">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>1.13 CommandAPI Documentation v3.3</title>
        
        <meta name="robots" content="noindex" />
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
        <link rel="stylesheet" href="style.css">
        

        
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "rust";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="intro.html">Introduction</a></li><li class="spacer"></li><li class="chapter-item affix "><li class="part-title active">Section 1: CommandAPI Setup</li><li class="chapter-item "><a href="installation.html"><strong aria-hidden="true">1.</strong> Installation for server owners</a></li><li class="chapter-item "><a href="quickstart.html"><strong aria-hidden="true">2.</strong> Setting up your development environment</a></li><li class="chapter-item affix "><li class="part-title active">Section 2: Creating Commands</li><li class="chapter-item "><a href="commandregistration.html"><strong aria-hidden="true">3.</strong> Command registration</a></li><li class="chapter-item "><a href="commandexecutors.html"><strong aria-hidden="true">4.</strong> Command executors</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="normalexecutors.html"><strong aria-hidden="true">4.1.</strong> Normal command executors</a></li><li class="chapter-item "><a href="proxysender.html"><strong aria-hidden="true">4.2.</strong> Proxied commandsenders</a></li><li class="chapter-item "><a href="resultingcommandexecutors.html"><strong aria-hidden="true">4.3.</strong> Resulting command executors</a></li><li class="chapter-item "><a href="commandfailures.html"><strong aria-hidden="true">4.4.</strong> Handling command failures</a></li></ol></li><li class="chapter-item "><a href="arguments.html"><strong aria-hidden="true">5.</strong> Arguments</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="argumentsuggestions.html"><strong aria-hidden="true">5.1.</strong> Argument suggestions</a></li><li class="chapter-item "><a href="primitivearguments.html"><strong aria-hidden="true">5.2.</strong> Primitive arguments</a></li><li class="chapter-item "><a href="rangedarguments.html"><strong aria-hidden="true">5.3.</strong> Ranged arguments</a></li><li class="chapter-item "><a href="stringarguments.html"><strong aria-hidden="true">5.4.</strong> String arguments</a></li><li class="chapter-item "><a href="positionargs.html"><strong aria-hidden="true">5.5.</strong> Positional arguments</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="locationargument.html"><strong aria-hidden="true">5.5.1.</strong> Location arguments</a></li><li class="chapter-item "><a href="rotationargs.html"><strong aria-hidden="true">5.5.2.</strong> Rotation arguments</a></li><li class="chapter-item "><a href="axisarg.html"><strong aria-hidden="true">5.5.3.</strong> AxisArguments</a></li></ol></li><li class="chapter-item "><a href="chatarguments.html"><strong aria-hidden="true">5.6.</strong> Chat arguments</a></li><li class="chapter-item "><a href="entityarguments.html"><strong aria-hidden="true">5.7.</strong> Entity &amp; player arguments</a></li><li class="chapter-item "><a href="scoreboardargs.html"><strong aria-hidden="true">5.8.</strong> Scoreboard arguments</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="scoreboardarguments.html"><strong aria-hidden="true">5.8.1.</strong> Scoreboard arguments</a></li><li class="chapter-item "><a href="objectivearguments.html"><strong aria-hidden="true">5.8.2.</strong> Objective arguments</a></li><li class="chapter-item "><a href="teamarguments.html"><strong aria-hidden="true">5.8.3.</strong> Team arguments</a></li></ol></li><li class="chapter-item "><a href="miscargs.html"><strong aria-hidden="true">5.9.</strong> Miscellaneous arguments</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="advancementargument.html"><strong aria-hidden="true">5.9.1.</strong> Advancement arguments</a></li><li class="chapter-item "><a href="biomeargument.html"><strong aria-hidden="true">5.9.2.</strong> Biome arguments</a></li><li class="chapter-item "><a href="enchantmentargument.html"><strong aria-hidden="true">5.9.3.</strong> Enchantment arguments</a></li><li class="chapter-item "><a href="environmentargs.html"><strong aria-hidden="true">5.9.4.</strong> Environment arguments</a></li><li class="chapter-item "><a href="itemstackarguments.html"><strong aria-hidden="true">5.9.5.</strong> Itemstack arguments</a></li><li class="chapter-item "><a href="loottableargument.html"><strong aria-hidden="true">5.9.6.</strong> LootTable argument</a></li><li class="chapter-item "><a href="mathoperationarguments.html"><strong aria-hidden="true">5.9.7.</strong> MathOperation arguments</a></li><li class="chapter-item "><a href="particlearguments.html"><strong aria-hidden="true">5.9.8.</strong> Particle arguments</a></li><li class="chapter-item "><a href="potionarguments.html"><strong aria-hidden="true">5.9.9.</strong> Potion effect arguments</a></li><li class="chapter-item "><a href="recipeargument.html"><strong aria-hidden="true">5.9.10.</strong> Recipe arguments</a></li><li class="chapter-item "><a href="soundargument.html"><strong aria-hidden="true">5.9.11.</strong> Sound arguments</a></li><li class="chapter-item "><a href="timeargs.html"><strong aria-hidden="true">5.9.12.</strong> Time arguments</a></li></ol></li><li class="chapter-item "><a href="nbtarguments.html"><strong aria-hidden="true">5.10.</strong> NBT arguments</a></li><li class="chapter-item "><a href="literalarguments.html"><strong aria-hidden="true">5.11.</strong> Literal arguments</a></li><li class="chapter-item "><a href="customarguments.html"><strong aria-hidden="true">5.12.</strong> Custom arguments</a></li></ol></li><li class="chapter-item "><a href="functions.html"><strong aria-hidden="true">6.</strong> Functions &amp; Tags</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="functionsetup.html"><strong aria-hidden="true">6.1.</strong> Setting up functions &amp; tags</a></li><li class="chapter-item "><a href="functionwrapper.html"><strong aria-hidden="true">6.2.</strong> The FunctionWrapper class</a></li><li class="chapter-item "><a href="functionarguments.html"><strong aria-hidden="true">6.3.</strong> Function arguments</a></li></ol></li><li class="chapter-item "><a href="permissions.html"><strong aria-hidden="true">7.</strong> Permissions</a></li><li class="chapter-item "><a href="aliases.html"><strong aria-hidden="true">8.</strong> Aliases</a></li><li class="chapter-item affix "><li class="part-title active">Section 3: CommandAPI Utilities</li><li class="chapter-item "><a href="conversion.html"><strong aria-hidden="true">9.</strong> Command conversion</a></li><li class="spacer"></li><li class="chapter-item affix "><a href="upgrading.html">Upgrading guide</a></li><li class="chapter-item affix "><a href="troubleshooting.html">Troubleshooting</a></li><li class="spacer"></li><li class="chapter-item affix "><a href="afterword.html">Afterword</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="skepter">Skepter Likes Purple</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">1.13 CommandAPI Documentation v3.3</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        <a href="https://github.com/JorelAli/1.13-Command-API" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <!-- Page table of contents -->
                        <div class="sidetoc"><nav class="pagetoc"></nav></div>
                        
                        <h1><a class="header" href="#introduction" id="introduction">Introduction</a></h1>
<p>Welcome to the documentation for the CommandAPI. The CommandAPI lets you create vanilla Minecraft commands which utilize the new command features which were implemented in Minecraft 1.13, including but not limited to:</p>
<ul>
<li>Having commands compatible with the vanilla <code>/execute</code> command</li>
<li>Having commands which can be run using Minecraft functions</li>
<li>Having better auto-completion and suggestions</li>
<li>Having command type checks before execution (e.g. ensuring a number is within a certain range)</li>
</ul>
<hr />
<h2><a class="header" href="#how-the-commandapi-works" id="how-the-commandapi-works">How the CommandAPI works</a></h2>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>This is a pretty important section, I would recommend reading before implementing the CommandAPI in your own projects. This section tells you about setup which is not stated anywhere else in the documentation. Think of it as the &quot;knowledge you should know before using this API&quot;.</p>
</blockquote>
<p>The CommandAPI does not follow the &quot;standard&quot; method of registering commands. In other words, commands which are registered with the CommandAPI will be registered as pure vanilla Minecraft commands as opposed to Bukkit or Spigot commands. This means that the following implications exist:</p>
<ul>
<li>Commands do not need to be declared in the <code>plugin.yml</code> file</li>
<li>Commands are not &quot;linked&quot; to a certain plugin. In other words, you cannot look up which commands are registered by which plugin.</li>
</ul>
<hr />
<h2><a class="header" href="#how-this-documentation-works" id="how-this-documentation-works">How this documentation works</a></h2>
<p>This documentation is split into the major sections that build up the CommandAPI. It's been designed in such a way that it should be easy to find exactly what you want to help you get started with the CommandAPI, and how to make effective use of it. Each step of the way, the documentation will include examples which showcase how to use the CommandAPI. </p>
<p>You can use the side bar on the left to access the various sections of the documentation and can change the theme to your liking using the paintbrush icon in the top left corner. </p>
<p>Using the search icon in the top left corner, you can search for anything in this entire documentation. For example, typing &quot;Example&quot; will show a list of examples which are included throughout the documentation.</p>
<hr />
<h2><a class="header" href="#documentation-changelog" id="documentation-changelog">Documentation changelog</a></h2>
<p>Here's the list of changes to the documentation between each update. You can view the current documentation version at the top of this page.</p>
<h3><a class="header" href="#documentation-changes-31-rightarrow-33" id="documentation-changes-31-rightarrow-33">Documentation changes 3.1 \(\rightarrow\) 3.3:</a></h3>
<ul>
<li>Adds information on how functions are loaded in 1.16+ in section <a href="./functions.html#functions-in-116">6. Functions &amp; Tags</a></li>
<li>Added function error messages to section <a href="./troubleshooting.html#server-errors-when-loading-datapacks-in-116">Troubleshooting</a></li>
</ul>
<h3><a class="header" href="#documentation-changes-30-rightarrow-31" id="documentation-changes-30-rightarrow-31">Documentation changes 3.0 \(\rightarrow\) 3.1:</a></h3>
<ul>
<li>Adds new section <a href="./argumentsuggestions.html">5.1 Argument suggestions</a> to cover how to override suggestions - Having it all in section <em>5. Arguments</em> was a bit too content-heavy</li>
<li>Adds documentation for the new <code>.overrideSuggestions()</code> method in section <a href="./argumentsuggestions.html#suggestions-depending-on-previous-arguments">5.1 Argument suggestions</a></li>
<li>Simplified the description of the documentation updates</li>
<li>Changed the artifact ID for the dependency of the CommandAPI. Instead of being <code>commandapi</code>, it is now <code>commandapi-core</code>. You can view the changes in section <a href="./quickstart.html">2 Setting up your development environment</a></li>
<li>Changed the repository information for gradle in section <a href="./quickstart.html">2 Setting up your development environment</a>. You now have to include the NBTAPI repository because gradle can't automatically detect this for some reason. Kinda stupid tbh.</li>
<li>Adds a section on using multiple or optional arguments in section <a href="./arguments.html#optionaldifferent-arguments">5 Arguments</a></li>
</ul>
<h3><a class="header" href="#documentation-changes-21-rightarrow-30" id="documentation-changes-21-rightarrow-30">Documentation changes 2.1 \(\rightarrow\) 3.0:</a></h3>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>Lots of changes occurred in version 3.0. I highly recommend reading the <a href="./upgrading.html">Upgrading guide</a> section which covers the changes in more detail and how to update your plugin for this version.</p>
</blockquote>
<ul>
<li>Sections on the left have been tidied up and should be more &quot;approachable&quot;</li>
<li>Installation section (<a href="./installation.html">1. Installation for server owners</a>) now includes information about additional dependencies</li>
<li>Dependency section (<a href="./quickstart.html">2. Setting up your development environment</a>) updated to use the new dependency Group ID</li>
<li>Command registration section (<a href="./commandregistration.html">3. Command registration</a>) updated to reflect new API changes</li>
<li>Command execution section (<a href="./commandexecutors.html">4. Command Executors</a>) updated to reflect new API changes</li>
<li>Arguments section (<a href="./arguments.html">5. Arguments</a>) completely rewritten to reflect new API changes. Adds more detailed examples for each argument</li>
<li>Function arguments section (<a href="./functionarguments.html">6.3 Function Arguments</a>) updated to reflect new API changes</li>
<li>Permissions section (<a href="./permissions.html">7. Permissions</a>) updated to reflect new API changes</li>
<li>Aliases section (<a href="./aliases.html">8. Aliases</a>) updated to reflect new API changes</li>
<li>Command conversion section (<a href="./conversion.html">9. Command conversion</a>) rewrite example to be more detailed</li>
</ul>
<h1><a class="header" href="#installation" id="installation">Installation</a></h1>
<p>Installing the CommandAPI is easy! Just download the latest <code>CommandAPI.jar</code> file using the button below and place it in your server's <code>plugins</code> folder!</p>
<br>
<p><a href="https://github.com/JorelAli/1.13-Command-API/releases/latest/download/CommandAPI.jar" style="
background-color:#EB7035;
border-radius:3px;
color:#ffffff;
display:block;
line-height:44px;
text-align:center;
width:40%;
margin-top: -30px;
margin-bottom: 30px;
margin-left:auto;
margin-right: auto;">Download latest CommandAPI.jar</a></p>
<hr />
<h2><a class="header" href="#additional-dependencies" id="additional-dependencies">Additional dependencies</a></h2>
<ul>
<li>If you use NBT data, you'll also need the <a href="https://www.spigotmc.org/resources/nbt-api.7939/">NBT API</a>. (you can find out from your developers if you need this or not)</li>
<li>If you are using raw JSON chat data, you'll need to be running <a href="https://www.spigotmc.org/wiki/about-spigot/">Spigot</a> or another spigot-related server such as <a href="https://papermc.io/">Paper Spigot</a> or <a href="https://tacospigot.github.io/">Taco Spigot</a>. (Again, you can find out from your developers if you need this or not)</li>
</ul>
<hr />
<h2><a class="header" href="#configuring-the-commandapi" id="configuring-the-commandapi">Configuring the CommandAPI</a></h2>
<p>The CommandAPI can be configured in the <code>plugins/CommandAPI/config.yml</code> file.</p>
<p>The default <code>config.yml</code> settings are as follows:</p>
<pre><code class="language-yaml">verbose-outputs: true
create-dispatcher-json: false
</code></pre>
<ul>
<li><code>verbose-outputs</code> - Outputs command registration and unregistration logs in the console</li>
<li><code>create-dispatcher-json</code> - Creates a <code>command_registration.json</code> file showing the mapping of registered commands</li>
</ul>
<h1><a class="header" href="#setting-up-your-development-environment" id="setting-up-your-development-environment">Setting up your development environment</a></h1>
<p>To use the CommandAPI in your plugins, there are a few methods of adding it to your development environment.</p>
<hr />
<h2><a class="header" href="#manually-using-the-jar" id="manually-using-the-jar">Manually using the .jar</a></h2>
<ul>
<li>
<p>Download the latest CommandAPI.jar from the download page <a href="https://github.com/JorelAli/1.13-Command-API/releases/latest">here</a></p>
</li>
<li>
<p>Add the CommandAPI.jar file to your project/environment's build path:</p>
<p><img src="images/eclipse.jpg" alt="" /></p>
</li>
<li>
<p>Add the CommandAPI as a dependent in the plugin.yml (<code>depend: [CommandAPI]</code>)</p>
</li>
</ul>
<hr />
<h2><a class="header" href="#using-maven-recommended" id="using-maven-recommended">Using Maven (recommended)</a></h2>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>If you've never used maven before, I highly recommend it! It makes it easier to keep your code updated with the latest dependency updates. For information on how to set up a plugin using maven, you can read <a href="https://bukkit.gamepedia.com/Plugin_Tutorial">Bukkit's plugin tutorial</a>.</p>
</blockquote>
<ul>
<li>
<p>Add the maven repository to your <code>pom.xml</code> file:</p>
<pre><code class="language-xml">&lt;repositories&gt;
    &lt;repository&gt;
        &lt;id&gt;mccommandapi&lt;/id&gt;
        &lt;url&gt;https://raw.githubusercontent.com/JorelAli/1.13-Command-API/mvn-repo/1.13CommandAPI/&lt;/url&gt;
    &lt;/repository&gt;
&lt;/repositories&gt;
</code></pre>
</li>
<li>
<p>Add the dependency to your <code>pom.xml</code>:</p>
<pre><code class="language-xml">&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;dev.jorel&lt;/groupId&gt;
        &lt;artifactId&gt;commandapi-core&lt;/artifactId&gt;
        &lt;version&gt;VERSION&lt;/version&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>
<p>A list of version numbers can be found <a href="https://github.com/JorelAli/1.13-Command-API/tree/mvn-repo/1.13CommandAPI/io/github/jorelali/commandapi">here</a>
For example, if you wanted to use version 3.0, you would use <code>&lt;version&gt;3.0&lt;/version&gt;</code></p>
</li>
<li>
<p>Add the CommandAPI as a dependent in the plugin.yml (<code>depend: [CommandAPI]</code>)</p>
</li>
</ul>
<blockquote>
<p><strong>Please Note:</strong></p>
<p>In version 3.0 onwards, the group ID is no longer <code>io.github.jorelali</code>. Instead, the group ID is <code>dev.jorel</code>, as shown above. If you would like to use a version of the CommandAPI that is less than 3.0, you must make sure the group ID is <code>io.github.jorelali</code>.</p>
</blockquote>
<hr />
<h2><a class="header" href="#using-gradle" id="using-gradle">Using Gradle</a></h2>
<ul>
<li>
<p>Add the repository to your <code>build.gradle</code> file:</p>
<pre><code class="language-gradle">repositories {
    maven { url = &quot;https://raw.githubusercontent.com/JorelAli/1.13-Command-API/mvn-repo/1.13CommandAPI/&quot; }
    maven { url = &quot;https://repo.codemc.org/repository/maven-public/&quot; }
}
</code></pre>
</li>
<li>
<p>Add the dependency to your list of dependencies in your <code>build.gradle</code> file:</p>
<pre><code class="language-gradle">dependencies {
    compile &quot;dev.jorel:commandapi-core:VERSION&quot;
}
</code></pre>
<p>A list of version numbers can be found <a href="https://github.com/JorelAli/1.13-Command-API/tree/mvn-repo/1.13CommandAPI/io/github/jorelali/commandapi">here</a>.
For example, if you wanted to use version 3.0, you would use <code>compile &quot;dev.jorel:commandapi-core:3.0&quot;</code></p>
</li>
<li>
<p>Add the CommandAPI as a dependent in the plugin.yml (<code>depend: [CommandAPI]</code>)</p>
</li>
</ul>
<h1><a class="header" href="#command-registration" id="command-registration">Command registration</a></h1>
<p>To register commands with the CommandAPI, we use the <code>CommandAPICommand</code> class. It follows a simple builder pattern to improve readability.</p>
<p>I think the easiest way to explain it is with an example:</p>
<pre><code class="language-java">// Create our arguments
LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;message&quot;, new GreedyStringArgument());

//Create our command
new CommandAPICommand(&quot;broadcastmsg&quot;)
	.withArguments(arguments)                     // The arguments
	.withAliases(&quot;broadcast&quot;, &quot;broadcastmessage&quot;) // Command aliases
	.withPermission(CommandPermission.OP)         // Required permissions
	.executes((sender, args) -&gt; {
		String message = (String) args[0];
		Bukkit.getServer().broadcastMessage(message);
	}).register();
</code></pre>
<ul>
<li>First, we create our arguments for the command. This is described in more detail in <a href="./arguments.html">the section on arguments</a>. </li>
<li>We then create a new <code>CommandAPICommand</code>, with the name of the command that the sender must enter to run it. </li>
<li>We then add the arguments to the command with <code>withArguments</code>.</li>
<li>In this example, we add an alias, &quot;broadcast&quot;, to the command. This allows the sender to use either <code>/broadcastmsg &lt;message&gt;</code> or <code>/broadcast &lt;message&gt;</code>.</li>
<li>By using <code>withPermission</code>, we require the sender to be an OP in order to run the command.</li>
<li>We control what the command does using <code>executes</code> (this is described in more detail in <a href="./commandexecutors.html">the section on command executors</a>).</li>
<li>Finally, we register the command to the CommandAPI using <code>register</code>.</li>
</ul>
<p>That's it! This simple snippet of code fully registers the command to the server. No hassling with a plugin instance, no messing with <code>plugin.yml</code> files.</p>
<hr />
<h2><a class="header" href="#commandapicommand-methods" id="commandapicommand-methods"><code>CommandAPICommand</code> methods</a></h2>
<p>The <code>CommandAPICommand</code> has various methods, which are outlined below:</p>
<h4><a class="header" href="#setting-the-command-name" id="setting-the-command-name">Setting the command name</a></h4>
<ul>
<li><code>new CommandAPICommand(String)</code> - This constructor is used to set the command's name. </li>
</ul>
<h4><a class="header" href="#setting-command-properties" id="setting-command-properties">Setting command properties</a></h4>
<ul>
<li>
<p><code>withArguments(LinkedHashMap&lt;String, Argument&gt;)</code> - The list of arguments.</p>
<p>The CommandAPI requires a list of arguments which are used for the command. The argument map consists of a key which is the tooltip that is displayed as a prompt to users entering commands, and a value which is an instance of an argument (See the section on arguments). This list of arguments is interpreted in the <em>order that arguments are added to the LinkedHashMap</em>.</p>
</li>
<li>
<p><code>withPermission(CommandPermission)</code> - The required permission to execute a command. (See <a href="permissions.html">the section on permissions</a>).</p>
</li>
<li>
<p><code>withAliases(String... args)</code> - An array of aliases that the command can be run via.</p>
</li>
</ul>
<h4><a class="header" href="#setting-the-commands-executor" id="setting-the-commands-executor">Setting the command's executor</a></h4>
<ul>
<li><code>executes((sender, args) -&gt; {})</code> - Executes a command using the <code>CommandSender</code> object.</li>
<li><code>executesPlayer((player, args) -&gt; {})</code> - Executes a command using the <code>Player</code> object.</li>
<li><code>executesEntity((entity, args) -&gt; {})</code> - Executes a command using the <code>Entity</code> object.</li>
<li><code>executesCommandBlock((cmdblock, args) -&gt; {})</code> - Executes a command using the <code>BlockCommandSender</code> object.</li>
<li><code>executesConsole((console, args) -&gt; {})</code> - Executes a command using the <code>ConsoleCommandSender</code> object.</li>
<li><code>executesProxy((proxy, args) -&gt; {})</code> - Executes a command using the <code>ProxiedCommandSender</code> object.</li>
</ul>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>Sometimes, the Java compiler throws an error saying that a method is ambiguous for the type CommandAPICommand. This is due to a limitation in Java's type inference system and is not a fault of the CommandAPI. If we take the following code, used to spawn a pig:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;spawnpigs&quot;)
 .executesPlayer((player, args) -&gt; {
     for(int i = 0; i &lt; 10; i++) {
         player.getWorld().spawnEntity(player.getLocation(), (EntityType) args[0]);
     }
 })
 .register();
</code></pre>
<p>The Java type inference system cannot determine what the type of the lambda <code>(player, args) -&gt; ()</code> is, therefore it produces the following compilation error:</p>
<pre><code>The method executesPlayer(PlayerCommandExecutor) is ambiguous for the type CommandAPICommand
</code></pre>
<p>This can easily be resolved by declaring the specific type of the command sender and the arguments. For example:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;spawnpigs&quot;)
 .executesPlayer((Player player, Object[] args) -&gt; {
     for(int i = 0; i &lt; 10; i++) {
         player.getWorld().spawnEntity(player.getLocation(), (EntityType) args[0]);
     }
 })
 .register();
</code></pre>
</blockquote>
<h4><a class="header" href="#registering-the-command" id="registering-the-command">Registering the command</a></h4>
<ul>
<li><code>register()</code> - Registers the command.</li>
</ul>
<hr />
<h2><a class="header" href="#command-loading-order" id="command-loading-order">Command loading order</a></h2>
<p>In order to register commands properly, <strong>commands must be registered before the server finishes loading</strong>. The CommandAPI will prevent command registration after the server has loaded. This basically means that all command registration must occur during a plugin's <code>onLoad()</code> or <code>onEnable()</code> method. With the CommandAPI, depending on whether you use <code>onLoad()</code> or <code>onEnable()</code> to load your commands depends on whether your plugin is used with Minecraft's functions:</p>
<table><thead><tr><th>When to load</th><th>What to do</th></tr></thead><tbody>
<tr><td><code>onLoad()</code> method</td><td>Register commands to be used in Minecraft functions (<a href="functions.html">see the Function section for more info</a>)</td></tr>
<tr><td><code>onEnable()</code> method</td><td>Register regular commands</td></tr>
</tbody></table>
<hr />
<h2><a class="header" href="#command-unregistration" id="command-unregistration">Command unregistration</a></h2>
<p>The CommandAPI has support to unregister commands completely from Minecraft's command list. This includes Minecraft built in commands!</p>
<table><thead><tr><th>Method</th><th>Result</th></tr></thead><tbody>
<tr><td><code>CommandAPI.unregister(String cmd)</code></td><td>Unregisters a command from the game</td></tr>
<tr><td><code>CommandAPI.unregister(String cmd, boolean force)</code></td><td>Attempts to unregister a command from the game by force. This includes <code>/minecraft:cmd</code>, <code>/bukkit:cmd</code> and <code>/spigot:cmd</code> commands as well.</td></tr>
</tbody></table>
<div class="example">
<h3><a class="header" href="#example---replacing-minecrafts-gamemode-command" id="example---replacing-minecrafts-gamemode-command">Example - Replacing Minecraft's <code>/gamemode</code> command</a></h3>
<p>To replace a command, we can first unregister it and then register our implementation of that command.</p>
<pre><code class="language-java">//Unregister the gamemode command from the server (by force)
CommandAPI.getInstance().unregister(&quot;gamemode&quot;, true);

LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();

/* Arguments for the gamemode command. In this sample, I'm just 
 * using a simple literal argument which allows for /gamemode survival */
arguments.put(&quot;gamemode&quot;, new LiteralArgument(&quot;survival&quot;));

new CommandAPICommand(&quot;gamemode&quot;)
    .withArguments(arguments)
    .executes((sender, args) -&gt; {
        //Implementation of our /gamemode command
    }).register();
</code></pre>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>Command unregistration, although powerful, is highly unrecommended. It is the CommandAPI's most &quot;dangerous&quot; feature as it can cause unexpected sideffects, such as command blocks executing commands you wouldn't expect them to. In almost every case, I'd recommend just creating a new command instead of unregistering one to replace it.</p>
<p>For instance, instead of unregistering <code>/gamemode</code>, you could register a command <code>/gm</code> or <code>/changegamemode</code>.</p>
</blockquote>
</div><h1><a class="header" href="#command-executors" id="command-executors">Command executors</a></h1>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>This section can be a little bit difficult to follow. If you only want the bare basic features <em>(executes a command)</em>, read the section on <em>Normal command executors</em> - this behaves very similar to the <code>onCommand</code> method in Bukkit.</p>
</blockquote>
<hr />
<p>The CommandAPI provides various command executors which are lambdas which execute the code you want when a command is called. With a lot of simplification, there are two main types of command executors: </p>
<ul>
<li>Ones that just runs the command (let's call it a <em>normal command executor</em>)</li>
<li>Ones that returns an integer as a result (let's call it a <em>resulting command executor</em>)</li>
</ul>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>In general, you need not focus too much on what type of command executor to implement. If you know for certain that you're going to be using your command with command blocks, and specifically want to state whether a command returns a value, just ensure you return an integer at the end of your declared command executor. Java will infer the type <em>(whether it's a normal command executor or a resulting command executor)</em> automatically, so feel free to return an integer or not. </p>
</blockquote>
<p>In addition to these two types of command executors, there are ways to restrict the execution of commands to certain <code>CommandSender</code> subclasses. In other words, you can make commands executable by players in game only for instance. These restrictions are covered in more detail in <a href="./normalexecutors.html">Normal command executors</a>.</p>
<h1><a class="header" href="#normal-command-executors" id="normal-command-executors">Normal command executors</a></h1>
<p>Command executors are of the following format, where <code>sender</code> is a <a href="https://hub.spigotmc.org/javadocs/bukkit/org/bukkit/command/CommandSender.html"><code>CommandSender</code></a>, and <code>args</code> is an <code>Object[]</code>, which represents arguments which are parsed by the CommandAPI.</p>
<pre><code class="language-java">new CommandAPICommand(&quot;...&quot;).executes((sender, args) -&gt; {
    //Code here  
}).register();
</code></pre>
<p>With normal command executors, these do not need to return anything. By default, this will return a <em>success value</em> of 1 if it runs successfully, and a <em>success value</em> of 0 if it runs unsuccessfully, either by throwing an exception <em>(RuntimeException)</em> or by forcing the command to fail (See the section on <a href="./commandfailures.html">handling command failures</a>.</p>
<p>In short, this is what values are returned when a command is executed from a normal command executor:</p>
<table><thead><tr><th align="center"></th><th align="center">Command Works</th><th align="center">Command Doesn't Work</th></tr></thead><tbody>
<tr><td align="center"><strong>Success Value</strong></td><td align="center">1</td><td align="center">0</td></tr>
<tr><td align="center"><strong>Result Value</strong></td><td align="center">1</td><td align="center">0</td></tr>
</tbody></table>
<div class="example">
<h3><a class="header" href="#example---creating-a-message-broadcasting-system" id="example---creating-a-message-broadcasting-system">Example - Creating a message broadcasting system</a></h3>
<p>To illustrate this, let's take a look at a simple message broadcasting command. We declare our arguments (in this case, &quot;message&quot;), we provide some aliases and set a permission required to run the command. Then we declare our main command body by using the <code>.executes()</code> method, before finally registering the command:</p>
<pre><code class="language-java">// Create our arguments
LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;message&quot;, new GreedyStringArgument());

//Create our command
new CommandAPICommand(&quot;broadcastmsg&quot;)
    .withArguments(arguments)                     // The arguments
    .withAliases(&quot;broadcast&quot;, &quot;broadcastmessage&quot;) // Command aliases
    .withPermission(CommandPermission.OP)         // Required permissions
    .executes((sender, args) -&gt; {
        String message = (String) args[0];
        Bukkit.getServer().broadcastMessage(message);
    }).register();
</code></pre>
<p>Note how when we finish up our implementation of <code>.executes()</code>, we don't return anything. This is unlike commands in the standard Bukkit API where the <code>onCommand</code> method returns a Boolean value:</p>
<pre><code class="language-java">boolean onCommand(CommandSender, Command, String, String[])
</code></pre>
<p>The returning of this Boolean value is handled automatically by the CommandAPI on a much lower level.</p>
</div>
<hr />
<h2><a class="header" href="#restricting-who-can-run-your-command" id="restricting-who-can-run-your-command">Restricting who can run your command</a></h2>
<p>The <code>CommandAPICommand</code> has multiple different <code>executes...()</code> methods that can restrict the command sender to any of the following objects:</p>
<ul>
<li><code>CommandSender</code> - No restriction, players, the console etc. can use this command. This is what Bukkit normally uses.</li>
<li><code>Player</code> - Only in-game players can run this command</li>
<li><code>Entity</code> - Only entities (therefore, players as well) can run this command</li>
<li><code>BlockCommandSender</code> - Only command blocks can run this command</li>
<li><code>ConsoleCommandSender</code> - Only the console can run this command</li>
<li><code>ProxiedCommandSender</code> - Only proxied command senders (e.g. other entities via the <code>/execute as ...</code> command)</li>
</ul>
<p>This is done using the respective method:</p>
<table><thead><tr><th>Restricted sender</th><th>Method to use</th></tr></thead><tbody>
<tr><td><code>CommandSender</code></td><td><code>.executes()</code></td></tr>
<tr><td><code>Player</code></td><td><code>.executesPlayer()</code></td></tr>
<tr><td><code>Entity</code></td><td><code>.executesEntity()</code></td></tr>
<tr><td><code>BlockCommandSender</code></td><td><code>.executesCommandBlock()</code></td></tr>
<tr><td><code>ConsoleCommandSender</code></td><td><code>.executesConsole()</code></td></tr>
<tr><td><code>ProxiedCommandSender</code></td><td><code>.executesProxy()</code></td></tr>
</tbody></table>
<div class="example">
<h3><a class="header" href="#example---a-suicide-command" id="example---a-suicide-command">Example - A <code>/suicide</code> command</a></h3>
<p>Say we wanted to create a command <code>/suicide</code>, which kills the player that executes it. Since this command isn't really &quot;designed&quot; for command senders that are not players, we can restrict it so only players can execute this command (meaning that the console and command blocks cannot run this command). Since it's a player, we can use the <code>.executesPlayer()</code> method:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;suicide&quot;)
    .executesPlayer((player, args) -&gt; {
		player.setHealth(0);
    }).register();
</code></pre>
</div>
<hr />
<h2><a class="header" href="#multiple-command-executor-implementations" id="multiple-command-executor-implementations">Multiple command executor implementations</a></h2>
<p>The CommandAPI allows you to chain different implementations of the command depending on the type of <code>CommandSender</code>. This allows you to easily specify what types of <code>CommandSender</code>s are required to run a command.</p>
<p>Extending on the suicide example above, we could write another implementation for a different <code>CommandSender</code>. Here, we write an implementation to make entities (non-player) go out with a bang when they run the command (using <code>/execute as &lt;entity&gt; run &lt;command&gt;</code> command).</p>
<div class="example">
<h3><a class="header" href="#example---a-suicide-command-with-different-implementations" id="example---a-suicide-command-with-different-implementations">Example - A <code>/suicide</code> command with different implementations</a></h3>
<pre><code class="language-java">new CommandAPICommand(&quot;suicide&quot;)
    .executesPlayer((player, args) -&gt; {
		player.setHealth(0);
    })
    .executesEntity((entity, args) -&gt; {
        entity.getWorld().createExplosion(e.getLocation(), 4);
		entity.remove();
    }).register();
</code></pre>
<p>This saves having to use <code>instanceof</code> multiple times to check the type of the <code>CommandSender</code>.</p>
</div><h1><a class="header" href="#proxied-commandsenders" id="proxied-commandsenders">Proxied commandsenders</a></h1>
<p>The CommandAPI has extra support for vanilla Minecraft's <code>/execute</code> command, by allowing the CommandSender to be an instance of the <code>ProxiedCommandSender</code> class. This allows the CommandSender to contain two extra pieces of information: The &quot;proxied sender&quot; and the original sender.</p>
<div class="example">
<h3><a class="header" href="#example---running-a-command-as-a-chicken" id="example---running-a-command-as-a-chicken">Example - Running a command as a chicken</a></h3>
<p>Say we have a command which kills the sender of a command. This is easily implemented as follows:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;killme&quot;)
    .executesPlayer((player, args) -&gt; {
		player.setHealth(0);
	})
    .register();
</code></pre>
<p>But what if the sender of the command is <em>not</em> a player? By using Minecraft's <code>/execute</code> command, we could execute the command as <em>any</em> arbitrary entity, as shown with the command below:</p>
<pre><code>/execute as @e[type=chicken] run killme
</code></pre>
<p>To handle this case, we can use the <code>.executesProxy()</code> method to ensure that the command sender is a <code>ProxiedCommandSender</code>. Then, we can kill the <code>callee</code> <em>(the entity which is being 'forced' to run the command /killme)</em></p>
<pre><code class="language-java">new CommandAPICommand(&quot;killme&quot;)
    .executesPlayer((player, args) -&gt; {
		player.setHealth(0);
	})
    .executesProxy((proxy, args) -&gt; {
		//Check if the callee is an Entity
		if(proxy.getCallee() instanceof LivingEntity) {

			//If so, kill the entity
			LivingEntity target = (LivingEntity) proxy.getCallee();
			target.setHealth(0);
		}
    })
    .register();
</code></pre>
<p>This allows the command above to run successfully, killing all chickens it can find.</p>
</div><h1><a class="header" href="#resulting-command-executors" id="resulting-command-executors">Resulting command executors</a></h1>
<p>Resulting command executors are very similar to normal command executors, except they can return an integer <em>result value</em>.</p>
<pre><code class="language-java">(sender, args) -&gt; {
	//Code here
	return /*some integer here*/ ;
};
</code></pre>
<p>Similarly, these will return a <em>success value</em> of 1 if it runs successfully, and a <em>success value</em> of 0 if it runs unsuccessfully. <strong>If a success value of 0 occurs, the <em>result value</em> will be 0</strong>. In short:</p>
<table><thead><tr><th align="center"></th><th align="center">Command Works</th><th align="center">Command Doesn't Work</th></tr></thead><tbody>
<tr><td align="center"><strong>Success Value</strong></td><td align="center">1</td><td align="center">0</td></tr>
<tr><td align="center"><strong>Result Value</strong></td><td align="center">result defined in your code</td><td align="center">0</td></tr>
</tbody></table>
<p>The concept of result values are better explained through examples:</p>
<div class="example">
<h3><a class="header" href="#example---random-number-result-command" id="example---random-number-result-command">Example - Random number result command</a></h3>
<p>Say we want a command that returns a random number as a result. This can then be used by vanilla Minecraft's <code>/execute store result ...</code> command, which can be used for other command block chains.</p>
<pre><code class="language-java">new CommandAPICommand(&quot;randnum&quot;)
    .executes((sender, args) -&gt; {
        return new Random().nextInt();
    })
    .register();
</code></pre>
<p>This returns a <strong>success value of 1</strong> <em>(Because no errors or <code>CommandAPI.fail(String)</code> was thrown)</em> and a <strong>result value of a random number</strong>.</p>
</div>
<div class="example">
<h3><a class="header" href="#example---lootbox-system-with-execute-command" id="example---lootbox-system-with-execute-command">Example - Lootbox system with <code>/execute</code> command</a></h3>
<p>We can store state using <code>/execute store</code> and we can perform conditional checks using <code>/execute if</code>. By combining these, we can create a system which can be used with commandblocks to say, give players random lootboxes and redeem them. The concept is to create a command that generates a random number from 1 to 100. If the number is 1 (thus, the chance of being chosen is \(\frac{1}{100}\)), then we award a player with some reward, say 64 diamonds.</p>
<p>To do this, we'll declare two commands:</p>
<pre><code>/randomnumber        - returns a random number between 1 and 99 (inclusive)
/givereward &lt;player&gt; - gives a player 64 diamonds and broadcasts it in the chat
</code></pre>
<p>Since we're declaring commands that are to be used in <code>/execute</code>, we must ensure that these commands are registered in your plugin's <code>onLoad()</code> method. First, we write our implementation for <code>/randomnumber</code>. It is fairly straight forward using Java's <code>ThreadLocalRandom</code> to generate a random number:</p>
<pre><code class="language-java">//Register random number generator command from 1 to 99 (inclusive)
new CommandAPICommand(&quot;randomnumber&quot;)
    .executes((sender, args) -&gt; {
        return ThreadLocalRandom.current().nextInt(1, 100); //Returns random number from 1 &lt;= x &lt; 100
    })
    .register();
</code></pre>
<p>Now we write our implementation for <code>/givereward</code>. In this example, we use the <code>EntitySelectorArgument</code> to select a single player. We cast it to <code>Player</code> and then add the items to their inventory.</p>
<pre><code class="language-java">//Register reward giving system for a target player
LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;target&quot;, new EntitySelectorArgument(EntitySelector.ONE_PLAYER));

new CommandAPICommand(&quot;givereward&quot;)
    .withArguments(arguments)
    .executes((sender, args) -&gt; {
        Player player = (Player) args[0];
        player.getInventory().addItem(new ItemStack(Material.DIAMOND, 64));
        Bukkit.broadcastMessage(player.getName() + &quot; won a rare 64 diamonds from a loot box!&quot;);
    })
    .register();
</code></pre>
<hr />
<p>Now that we've declared these commands, we can now use them in practice. We can use a command block to store a random number under the scoreboard score <code>randVal</code> for a player called <code>SomePlayer</code>, by executing the command <code>/randomnumber</code>. Since <code>/randomnumber</code> <strong>returns</strong> an integer, this value is stored in the scoreboard score:</p>
<pre><code>/execute store result score SomePlayer randVal run randomnumber
</code></pre>
<p>To check if the random number is equal to 1, we can use the <code>/execute if</code> command. If their score stored in <code>randVal</code> matches 1, then we run the <code>/givereward</code> command.</p>
<pre><code>/execute if score SomePlayer randVal matches 1 run givereward SomePlayer
</code></pre>
</div><h1><a class="header" href="#handling-command-failures" id="handling-command-failures">Handling command failures</a></h1>
<p>Sometimes, you want your command to fail on purpose. This is basically the way to &quot;gracefully&quot; handle errors in your command execution. This is performed using the following method:</p>
<pre><code class="language-java">CommandAPI.fail(&quot;Error message goes here&quot;);
</code></pre>
<p>When the CommandAPI calls the fail method, it will cause the command to return a <em>success value</em> of 0, to indicate failure.</p>
<div class="example">
<h3><a class="header" href="#example---command-failing-for-element-not-in-a-list" id="example---command-failing-for-element-not-in-a-list">Example - Command failing for element not in a list</a></h3>
<p>Say we have some list containing fruit and the player can choose from it. In order to do that, we can use a <code>StringArgument</code> and suggest it to the player using <code>.overrideSuggestions(String[])</code>. However, because this only lists <em>suggestions</em> to the player, it does <strong>not</strong> stop the player from entering an option that isn't on the list of suggestions.</p>
<p>Therefore, to gracefully handle this with a proper error message, we use <code>CommandAPI.fail(String)</code> with a meaningful error message which is displayed to the user.</p>
<pre><code class="language-java">//Array of fruit
String[] fruit = new String[] {&quot;banana&quot;, &quot;apple&quot;, &quot;orange&quot;};

//Argument accepting a String, suggested with the list of fruit
LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;item&quot;, new StringArgument().overrideSuggestions(fruit));

//Register the command
new CommandAPICommand(&quot;getfruit&quot;)
    .withArguments(arguments)
    .executes((sender, args) -&gt; {
        String inputFruit = (String) args[0];
        if(fruit.contains(inputFruit)) {
            //Do something with inputFruit
        } else {
            //The player's input is not in the list of fruit
            CommandAPI.fail(&quot;That fruit doesn't exist!&quot;);
        }
	})
    .register();
</code></pre>
</div>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>In general, it's a good idea to handle unexpected cases with the <code>CommandAPI.fail()</code> method. Most arguments used by the CommandAPI will have their own built-in failsafe system <em>(e.g. the <code>EntitySelectorArgument</code> will not execute the command executor if it fails to find an entity)</em>, so this feature is for those extra cases.</p>
</blockquote>
<h1><a class="header" href="#arguments" id="arguments">Arguments</a></h1>
<p>Arguments in the CommandAPI are registered by using a <code>LinkedHashMap&lt;String, Argument&gt;</code> object. There are two things you need to keep in mind when creating arguments:</p>
<ul>
<li>The order which they will be used</li>
<li>The type of each argument</li>
</ul>
<p>By definition of a <code>LinkedHashMap</code>, the order of the elements inserted into it are preserved, meaning the order you add arguments to the <code>LinkedHashMap</code> will be the resulting order of which arguments are presented to the user when they run that command.</p>
<p>Adding arguments for registration is simple:</p>
<pre><code class="language-java">//Create LinkedHashMap
LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();

//Add an argument called &quot;target&quot;, which is a PlayerArgument
arguments.put(&quot;target&quot;, new PlayerArgument());
</code></pre>
<p>The String value is the tooltip that is shown to a player when they are entering the command.</p>
<hr />
<h2><a class="header" href="#argument-casting" id="argument-casting">Argument Casting</a></h2>
<p>To access arguments, they have to be casted to the type that the argument represents. The order of the arguments in the <code>args[]</code> is the same as the order in which the arguments were declared.</p>
<pre><code class="language-java">LinkedHashMap&lt;String, ArgumentType&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;arg0&quot;, new StringArgument());
arguments.put(&quot;arg1&quot;, new PotionEffectArgument());
arguments.put(&quot;arg2&quot;, new LocationArgument());

new CommandAPICommand(&quot;cmd&quot;)
    .withArguments(arguments)
    .executes((sender, args) -&gt; {
        String stringArg = (String) args[0];
        PotionEffectType potionArg = (PotionEffectType) args[1];
        Location locationArg = (Location) args[2];
    })
	.register();
</code></pre>
<p>The type to cast each argument (declared in the <code>dev.jorel.commandapi.arguments</code> package) is listed below:</p>
<table><thead><tr><th align="right">Argument class</th><th align="left">Data type</th></tr></thead><tbody>
<tr><td align="right"><a href="./advancementargument.html"><code>AdvancementArgument</code></a></td><td align="left"><code>org.bukkit.advancement.Advancement</code></td></tr>
<tr><td align="right"><a href="./axisarg.html"><code>AxisArgument</code></a></td><td align="left"><code>java.util.EnumSet&lt;org.bukkit.Axis&gt;</code></td></tr>
<tr><td align="right"><a href="./biomeargument.html"><code>BiomeArgument</code></a></td><td align="left"><code>org.bukkit.block.Biome</code></td></tr>
<tr><td align="right"><a href="./primitivearguments.html#boolean-arguments"><code>BooleanArgument</code></a></td><td align="left"><code>boolean</code></td></tr>
<tr><td align="right"><a href="./chatarguments.html#chat-argument"><code>ChatArgument</code></a></td><td align="left"><code>net.md_5.bungee.api.chat.BaseComponent[]</code></td></tr>
<tr><td align="right"><a href="./chatarguments.html#chat-color-argument"><code>ChatColorArgument</code></a></td><td align="left"><code>org.bukkit.ChatColor</code></td></tr>
<tr><td align="right"><a href="./chatarguments.html#chat-component-argument"><code>ChatComponentArgument</code></a></td><td align="left"><code>net.md_5.bungee.api.chat.BaseComponent[]</code></td></tr>
<tr><td align="right"><a href="./customarguments.html"><code>CustomArgument&lt;T&gt;</code></a></td><td align="left"><code>T</code></td></tr>
<tr><td align="right"><a href="./primitivearguments.html#numerical-arguments"><code>DoubleArgument</code></a></td><td align="left"><code>double</code></td></tr>
<tr><td align="right"><a href="./enchantmentargument.html"><code>EnchantmentArgument</code></a></td><td align="left"><code>org.bukkit.enchantments.Enchantment</code></td></tr>
<tr><td align="right"><a href="./entityarguments.html#entity-selector-argument"><code>EntitySelectorArgument</code></a></td><td align="left">The cast type changes depending on the input parameter:<br /><ul><li><code>EntitySelector.MANY_ENTITIES</code> - <code>Collection&lt;org.bukkit.entity.Entity&gt;</code></li><br /><li><code>EntitySelector.MANY_PLAYERS</code> - <code>Collection&lt;org.bukkit.entity.Player&gt;</code></li><br /><li><code>EntitySelector.ONE_ENTITY</code> - <code>org.bukkit.entity.Entity</code></li><br /><li><code>EntitySelector.ONE_PLAYER</code> - <code>org.bukkit.entity.Player</code></li></ul></td></tr>
<tr><td align="right"><a href="./entityarguments.html#entity-type-argument"><code>EntityTypeArgument</code></a></td><td align="left"><code>org.bukkit.entity.EntityType</code></td></tr>
<tr><td align="right"><a href="./environmentargs.html"><code>EnvironmentArgument</code></a></td><td align="left"><code>org.bukkit.World.Environment</code></td></tr>
<tr><td align="right"><a href="./primitivearguments.html#numerical-arguments"><code>FloatArgument</code></a></td><td align="left"><code>float</code></td></tr>
<tr><td align="right"><a href="./rangedarguments.html#the-integerrange--floatrange-class"><code>FloatRangeArgument</code></a></td><td align="left"><code>dev.jorel.commandapi.wrappers.FloatRange</code></td></tr>
<tr><td align="right"><a href="./functionwrapper.html"><code>FunctionArgument</code></a></td><td align="left"><code>dev.jorel.commandapi.wrappers.FunctionWrapper[]</code></td></tr>
<tr><td align="right"><a href="./stringarguments.html#greedy-string-argument"><code>GreedyStringArgument</code></a></td><td align="left"><code>String</code></td></tr>
<tr><td align="right"><a href="./primitivearguments.html#numerical-arguments"><code>IntegerArgument</code></a></td><td align="left"><code>int</code></td></tr>
<tr><td align="right"><a href="./rangedarguments.html#the-integerrange--floatrange-class"><code>IntegerRangeArgument</code></a></td><td align="left"><code>dev.jorel.commandapi.wrappers.IntegerRange</code></td></tr>
<tr><td align="right"><a href="./itemstackarguments.html"><code>ItemStackArgument</code></a></td><td align="left"><code>org.bukkit.inventory.ItemStack</code></td></tr>
<tr><td align="right"><a href="./literalarguments.html"><code>LiteralArgument</code></a></td><td align="left">N/A</td></tr>
<tr><td align="right"><a href="./locationargument.html#location-2d-space"><code>Location2DArgument</code></a></td><td align="left"><code>dev.jorel.commandapi.wrappers.Location2D</code></td></tr>
<tr><td align="right"><a href="./locationargument.html#location-3d-space"><code>LocationArgument</code></a></td><td align="left"><code>org.bukkit.Location</code></td></tr>
<tr><td align="right"><a href="./primitivearguments.html#numerical-arguments"><code>LongArgument</code></a></td><td align="left"><code>long</code></td></tr>
<tr><td align="right"><a href="./loottableargument.html"><code>LootTableArgument</code></a></td><td align="left"><code>org.bukkit.loot.LootTable</code></td></tr>
<tr><td align="right"><a href="./mathoperationarguments.html"><code>MathOperationArgument</code></a></td><td align="left"><code>dev.jorel.commandapi.wrappers.MathOperation</code></td></tr>
<tr><td align="right"><a href="./nbtarguments.html"><code>NBTCompoundArgument</code></a></td><td align="left"><code>de.tr7zw.nbtapi.NBTContainer</code></td></tr>
<tr><td align="right"><a href="./objectivearguments.html#objective-argument"><code>ObjectiveArgument</code></a></td><td align="left"><code>String</code></td></tr>
<tr><td align="right"><a href="./objectivearguments.html#objective-criteria-argument"><code>ObjectiveCriteriaArgument</code></a></td><td align="left"><code>String</code></td></tr>
<tr><td align="right"><a href="./particlearguments.html"><code>ParticleArgument</code></a></td><td align="left"><code>org.bukkit.Particle</code></td></tr>
<tr><td align="right"><a href="./entityarguments.html#player-argument"><code>PlayerArgument</code></a></td><td align="left"><code>org.bukkit.entity.Player</code></td></tr>
<tr><td align="right"><a href="./potionarguments.html"><code>PotionEffectArgument</code></a></td><td align="left"><code>org.bukkit.potion.PotionEffectType</code></td></tr>
<tr><td align="right"><a href="./recipeargument.html"><code>RecipeArgument</code></a></td><td align="left"><code>org.bukkit.inventory.Recipe</code></td></tr>
<tr><td align="right"><a href="./rotationargs.html"><code>RotationArgument</code></a></td><td align="left"><code>dev.jorel.commandapi.wrappers.Rotation</code></td></tr>
<tr><td align="right"><a href="./scoreboardarguments.html#scoreboard-slot-argument"><code>ScoreboardSlotArgument</code></a></td><td align="left"><code>dev.jorel.commandapi.wrappers.ScoreboardSlot</code></td></tr>
<tr><td align="right"><a href="./scoreboardarguments.html#score-holder-argument"><code>ScoreHolderArgument</code></a></td><td align="left">The cast type changes depending on the input parameter:<br /><ul><li><code>ScoreHolderType.SINGLE</code> - <code>String</code></li><br /><li><code>ScoreHolderType.MULTIPLE</code> - <code>Collection&lt;String&gt;</code></li></ul></td></tr>
<tr><td align="right"><a href="./soundargument.html"><code>SoundArgument</code></a></td><td align="left"><code>org.bukkit.Sound</code></td></tr>
<tr><td align="right"><a href="./stringarguments.html#string-argument"><code>StringArgument</code></a></td><td align="left"><code>String</code></td></tr>
<tr><td align="right"><a href="./teamarguments.html"><code>TeamArgument</code></a></td><td align="left"><code>String</code></td></tr>
<tr><td align="right"><a href="./stringarguments.html#text-argument"><code>TextArgument</code></a></td><td align="left"><code>String</code></td></tr>
<tr><td align="right"><a href="./timeargs.html"><code>TimeArgument</code></a></td><td align="left"><code>int</code></td></tr>
</tbody></table>
<hr />
<h2><a class="header" href="#optionaldifferent-arguments" id="optionaldifferent-arguments">Optional/Different Arguments</a></h2>
<p>Sometimes, you want to register a command that has a different effect whether arguments are included or not. For example, take the <code>/kill</code> command. If you run <code>/kill</code> on its own, it will kill the command sender. If however you run <code>/kill &lt;target&gt;</code>, it will kill the target. In other words, we have the following command structure:</p>
<pre><code>/kill          - Kills yourself
/kill &lt;target&gt; - Kills a target player
</code></pre>
<p>As shown by the command structure, we need to register <em>two commands</em>.</p>
<div class="example">
<h3><a class="header" href="#example---kill-command-with-two-separate-arguments" id="example---kill-command-with-two-separate-arguments">Example - /kill command with two separate arguments</a></h3>
<p>For example, say we're registering a command <code>/kill</code>:</p>
<pre><code>/kill          - Kills yourself
/kill &lt;target&gt; - Kills a target player
</code></pre>
<p>We first register the first <code>/kill</code> command as normal:</p>
<pre><code class="language-java">new CommandAPICommand(&quot;kill&quot;)
    .executesPlayer((player, args) -&gt; {
        player.setHealth(0);
    })
    .register();
</code></pre>
<p>Now we declare our command with arguments for our second command. Then, we can register our second command <code>/kill &lt;target&gt;</code> as usual:</p>
<pre><code class="language-java">// Declare our arguments
LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;target&quot;, new PlayerArgument());

// Register our second /kill &lt;target&gt; command
new CommandAPICommand(&quot;kill&quot;)
    .withArguments(arguments)
    .executesPlayer((player, args) -&gt; {
        ((Player) args[0]).setHealth(0);
    })
    .register();
</code></pre>
<p>This gives us the ability to run both <code>/kill</code> and <code>/kill &lt;target&gt;</code> with the same command name &quot;kill&quot;, but have different results based on the arguments used.</p>
</div><h1><a class="header" href="#argument-suggestions" id="argument-suggestions">Argument suggestions</a></h1>
<p>Sometimes, you want to override the list of suggestions that are provided by an argument. To handle this, CommandAPI arguments contain three methods to override suggestions:</p>
<pre><code class="language-java">Argument overrideSuggestions(String... suggestions);
Argument overrideSuggestions(Function&lt;CommandSender, String[]&gt; suggestions);
Argument overrideSuggestions(BiFunction&lt;CommandSender, Object[], String[]&gt; suggestions);
</code></pre>
<p>We will describe these methods in detail in this section.</p>
<hr />
<h2><a class="header" href="#suggestions-with-a-string-array" id="suggestions-with-a-string-array">Suggestions with a String Array</a></h2>
<p>The first method, <code>overrideSuggestions(String... suggestions)</code>, allows you to <em>replace</em> the suggestions normally associated with that argument with an array of strings.</p>
<div class="example">
<h3><a class="header" href="#example---teleport-to-worlds-by-overriding-suggestions" id="example---teleport-to-worlds-by-overriding-suggestions">Example - Teleport to worlds by overriding suggestions</a></h3>
<p>Say we're creating a plugin with the ability to teleport to different worlds on the server. If we were to retrieve a list of worlds, we would be able to override the suggestions of a typical <code>StringArgument</code> to teleport to that world. Let's create a command with the following structure:</p>
<pre><code>/tpworld &lt;world&gt;
</code></pre>
<p>We then implement our world teleporting command using <code>overrideSuggestions()</code> on the <code>StringArgument</code> to provide a list of worlds to teleport to:</p>
<pre><code class="language-java">//Populate a String[] with the names of worlds on the server
String[] worlds = Bukkit.getWorlds().stream().map(World::getName).toArray(String[]::new);

//Override the suggestions of the StringArgument with the aforementioned String[]
LinkedHashMap&lt;String, ArgumentType&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;world&quot;, new StringArgument().overrideSuggestions(worlds));

new CommandAPICommand(&quot;tpworld&quot;)
    .withArguments(arguments)
    .executesPlayer((player, args) -&gt; {
       	String world = (String) args[0];
		player.teleport(Bukkit.getWorld(world).getSpawnLocation());
    })
    .register();
</code></pre>
</div>
<hr />
<h2><a class="header" href="#suggestions-depending-on-a-command-sender" id="suggestions-depending-on-a-command-sender">Suggestions depending on a command sender</a></h2>
<p>The <code>overrideSuggestions(Function&lt;CommandSender, String[]&gt; suggestions)</code> method allows you to replace the suggestions normally associated with that argument with an array of strings that are evaluated dynamically using information about the command sender.</p>
<div class="example">
<h3><a class="header" href="#example---friend-list-by-overriding-suggestions" id="example---friend-list-by-overriding-suggestions">Example - Friend list by overriding suggestions</a></h3>
<p>Say you have a plugin which has a &quot;friend list&quot; for players. If you want to teleport to a friend in that list, you could use a <code>PlayerArgument</code>, which has the list of suggestions overridden with the list of friends that that player has. Since the list of friends <em>depends on the sender</em>, we can use the function to determine what our suggestions should be. Let's use the following command to teleport to a friend from our friend list:</p>
<pre><code>/friendtp &lt;friend&gt;
</code></pre>
<p>Let's say we have a simple class to get the friends of a command sender:</p>
<pre><code class="language-java">public class Friends {
    public static String[] getFriends(CommandSender sender) {
        if(sender instanceof Player) {
            return //Look up friends in a database or file
        } else {
            return new String[0];
        }
    }
}
</code></pre>
<p>We can then use this to generate our suggested list of friends:</p>
<pre><code class="language-java">LinkedHashMap&lt;String, ArgumentType&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;friend&quot;, new PlayerArgument().overrideSuggestions((sender) -&gt; {
    Friends.getFriends(sender);
}));

new CommandAPICommand(&quot;friendtp&quot;)
    .withArguments(arguments)
    .executesPlayer((player, args) -&gt; {
       	Player target = (Player) args[0];
		player.teleport(target);
    })
    .register();
</code></pre>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>The syntax of inlining the <code>.overrideSuggestions()</code> method has been designed to work well with Java's lambdas. For example, we could write the above code more consisely, such as:</p>
<pre><code class="language-java">LinkedHashMap&lt;String, ArgumentType&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;friend&quot;, new PlayerArgument().overrideSuggestions(Friends::getFriends));
</code></pre>
</blockquote>
</div>
<hr />
<h2><a class="header" href="#suggestions-depending-on-previous-arguments" id="suggestions-depending-on-previous-arguments">Suggestions depending on previous arguments</a></h2>
<p>The <code>overrideSuggestions(BiFunction&lt;CommandSender, Object[], String[]&gt; suggestions)</code> method is the most powerful suggestion overriding function that the CommandAPI offers. It has the capability to suggest arguments based on the values of previously inputted arguments.</p>
<p>This method requires a function that takes in a command sender and the <strong>list of previous arguments</strong> and must return a <code>String[]</code> of suggestions. The arguments are parsed exactly like any regular <code>CommandAPI</code> command argument.</p>
<div class="example">
<h3><a class="header" href="#example---sending-a-message-to-a-nearby-player" id="example---sending-a-message-to-a-nearby-player">Example - Sending a message to a nearby player</a></h3>
<p>Say we wanted to create a command that lets you send a message to a specific player in a given radius. <em>(This is a bit of a contrived example, but let's roll with it)</em>. To do this, we'll use the following command structure:</p>
<pre><code>/localmsg &lt;radius&gt; &lt;target&gt; &lt;message&gt;
</code></pre>
<p>When run, this command will send a message to a target player within the provided radius. To help identify which players are within a radius, we can override the suggestions on the <code>&lt;target&gt;</code> argument to include a list of players within the provided radius. We do this with the following code:</p>
<pre><code class="language-java">// Declare our arguments as normal
LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;radius&quot;, new IntegerArgument());

// Override the suggestions for the PlayerArgument, using (sender, args) as the parameters
// sender refers to the command sender that is running this command
// args refers to the Object[] of PREVIOUSLY DECLARED arguments (in this case, the IntegerArgument radius)
arguments.put(&quot;target&quot;, new PlayerArgument().overrideSuggestions((sender, args) -&gt; {

    // Cast the first argument (radius, which is an IntegerArgument) to get its value
	int radius = (int) args[0];
	
    // Get nearby entities within the provided radius
	Player player = (Player) sender;
	Collection&lt;Entity&gt; entities = player.getWorld().getNearbyEntities(player.getLocation(), radius, radius, radius);
	
    // Get player names within that radius
	return entities.stream()
		.filter(e -&gt; e.getType() == EntityType.PLAYER)
		.map(Entity::getName)
		.toArray(String[]::new);
}));
arguments.put(&quot;message&quot;, new GreedyStringArgument());

// Declare our command as normal
new CommandAPICommand(&quot;localmsg&quot;)
	.withArguments(arguments)
	.executesPlayer((player, args) -&gt; {
		Player target = (Player) args[1];
		String message = (String) args[2];
		target.sendMessage(message);
	})
	.register();
</code></pre>
<p>As shown in this code, we use the <code>(sender, args) -&gt; ...</code> lambda to override suggestions with previously declared arguments. In this example, our variable <code>args</code> will be <code>{ int }</code>, where this <code>int</code> refers to the radius. Note how this object array only has the previously declared arguments (and not for example <code>{ int, Player, String }</code>).</p>
</div>
<h1><a class="header" href="#primitive-arguments" id="primitive-arguments">Primitive arguments</a></h1>
<p>Primitive arguments are arguments that represent Java primitive types, such as <code>int</code>, <code>float</code>, <code>double</code>, <code>boolean</code> and <code>long</code>. These arguments are defined in their respective classes:</p>
<table><thead><tr><th>Primitive type</th><th>CommandAPI class</th></tr></thead><tbody>
<tr><td><code>int</code></td><td><code>IntegerArgument</code></td></tr>
<tr><td><code>float</code></td><td><code>FloatArgument</code></td></tr>
<tr><td><code>double</code></td><td><code>DoubleArgument</code></td></tr>
<tr><td><code>long</code></td><td><code>LongArgument</code></td></tr>
<tr><td><code>boolean</code></td><td><code>BooleanArgument</code></td></tr>
</tbody></table>
<p>These arguments simply cast to their primitive type and don't need any extra work.</p>
<hr />
<h2><a class="header" href="#boolean-arguments" id="boolean-arguments">Boolean arguments</a></h2>
<p>The <code>BooleanArgument</code> class represents the Boolean values <code>true</code> and <code>false</code>.</p>
<div class="example">
<h3><a class="header" href="#example---config-editing-plugin" id="example---config-editing-plugin">Example - Config editing plugin</a></h3>
<p>Say we want to create a plugin that lets you edit its own <code>config.yml</code> file using a command. To do this, let's create a command with the following structure:</p>
<pre><code>/editconfig &lt;config-key&gt; &lt;value&gt;
</code></pre>
<p>We first retrieve the keys from the configuration file using the typical Bukkit API. We construct our <code>LinkedHashMap</code> to hold our arguments, with the first parameter being a String key (in the form of a <code>TextArgument</code>, <a href="TODO">overridden with an array of suggestions</a>). Finally, we register our command and update the config, ensuring that we cast the <code>BooleanArgument</code> to <code>boolean</code>: </p>
<pre><code class="language-java">// Load keys from config file
String[] configKeys = getConfig().getKeys(true).toArray(new String[0]);

// Create arguments with the config key and a boolean value to set it to
LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;config-key&quot;, new TextArgument().overrideSuggestions(configKeys));
arguments.put(&quot;value&quot;, new BooleanArgument());

// Register our command
new CommandAPICommand(&quot;editconfig&quot;)
    .withArguments(arguments)
    .executes((sender, args) -&gt; {
        // Update the config with the boolean argument
        getConfig().set((String) args[0], (boolean) args[1]);
    })
    .register();
</code></pre>
</div>
<hr />
<h2><a class="header" href="#numerical-arguments" id="numerical-arguments">Numerical arguments</a></h2>
<p>Numbers are represented using the designated number classes:</p>
<table><thead><tr><th>Class</th><th>Description</th></tr></thead><tbody>
<tr><td><code>IntegerArgument</code></td><td>Whole numbers between <code>Integer.MIN_VALUE</code> and <code>Integer.MAX_VALUE</code></td></tr>
<tr><td><code>LongArgument</code></td><td>Whole numbers between <code>Long.MIN_VALUE</code> and <code>Long.MAX_VALUE</code></td></tr>
<tr><td><code>DoubleArgument</code></td><td>Double precision floating point numbers</td></tr>
<tr><td><code>FloatArgument</code></td><td>Single precision floating point numbers</td></tr>
</tbody></table>
<p>Each numerical argument can have ranges applied to them, which restricts the user to only entering numbers from within a certain range. This is done using the constructor, and the range specified:</p>
<table><thead><tr><th>Constructor</th><th>Description</th></tr></thead><tbody>
<tr><td><code>new IntegerArgument()</code></td><td>Any range</td></tr>
<tr><td><code>new IntegerArgument(min)</code></td><td>Values greater than <em>or equal to</em> <code>min</code></td></tr>
<tr><td><code>new IntegerArgument(min, max)</code></td><td>Values greater than or equal to <code>min</code> and less than or equal to <code>max</code></td></tr>
</tbody></table>
<p>Each range is <em>inclusive</em>, so it includes the number given to it. If the minimum value provided is larger than the maximum value, an <code>InvalidRangeException</code> is thrown.</p>
<h1><a class="header" href="#ranged-arguments" id="ranged-arguments">Ranged arguments</a></h1>
<p>Ranged arguments allow players to provide a range between two numbers, all within a single argument. The CommandAPI provides two ranged arguments, <code>IntegerRangeArgument</code> for ranges with only integer values, and <code>FloatRangeArgument</code> for ranged with potential floating point values.</p>
<p>These consist of values such as:</p>
<table><thead><tr><th>Input</th><th>What it means</th></tr></thead><tbody>
<tr><td><code>5</code></td><td>The number 5</td></tr>
<tr><td><code>5..10</code></td><td>Numbers between 5 and 10, including 5 and 10</td></tr>
<tr><td><code>5..</code></td><td>Numbers greater than or equal to 5 (bounded by Java's max number size)</td></tr>
<tr><td><code>..5</code></td><td>Numbers less than or equal to 5 (bounded by Java's min number size)</td></tr>
</tbody></table>
<p>This allows you to let users define a range of values, which can be used to limit a value, such as the number of players in a region or for a random number generator.</p>
<hr />
<h2><a class="header" href="#the-integerrange--floatrange-class" id="the-integerrange--floatrange-class">The IntegerRange &amp; FloatRange class</a></h2>
<p>The CommandAPI returns an <code>IntegerRange</code> from the <code>IntegerRangeArgument</code>, and a <code>FloatRange</code> from the <code>FloatRangeArgument</code>, which represents the upper and lower bounds of the numbers provided by the command sender, as well as a method to check if a number is within that range.</p>
<p>The <code>IntegerRange</code> class has the following methods:</p>
<pre><code class="language-java">class IntegerRange {
    public int getLowerBound();
    public int getUpperBound();
    public boolean isInRange(int);
}
</code></pre>
<p>The <code>FloatRange</code> class has the following methods:</p>
<pre><code class="language-java">class FloatRange {
    public float getLowerBound();
    public float getUpperBound();
    public boolean isInRange(float);
}
</code></pre>
<div class="example">
<h2><a class="header" href="#example---searching-chests-for-certain-items" id="example---searching-chests-for-certain-items">Example - Searching chests for certain items</a></h2>
<p>Say you're working on a plugin for server administrators to help them find restricted items. A method of doing so would be to search chests in a given radius for certain items. As such, we can use the following structure:</p>
<pre><code>/searchchests &lt;range&gt; &lt;item&gt;
</code></pre>
<p>Now, we simply create our arguments using <code>IntegerRangeArgument</code> for our range and <code>ItemStackArgument</code> as the item to search for. We can then find all chests in a given area and determine if it is within the range provided by the command sender by using <code>range.isInRange(distance)</code>:</p>
<pre><code class="language-java">// Declare our arguments for /searchrange &lt;IntegerRange&gt; &lt;ItemStack&gt;
LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;range&quot;, new IntegerRangeArgument());
arguments.put(&quot;item&quot;, new ItemStackArgument());

new CommandAPICommand(&quot;searchrange&quot;)
    .withArguments(arguments)
    .executesPlayer((player, args) -&gt; {
        // Retrieve the range from the arguments
        IntegerRange range = (IntegerRange) args[0];
        ItemStack itemStack = (ItemStack) args[1];

        // Store the locations of chests with certain items
        List&lt;Location&gt; locations = new ArrayList&lt;&gt;();

        // Iterate through all chunks, and then all tile entities within each chunk
        for(Chunk chunk : player.getWorld().getLoadedChunks()) {
            for(BlockState blockState : chunk.getTileEntities()) {

                // The distance between the block and the player
                int distance = (int) blockState.getLocation().distance(player.getLocation());

                // Check if the distance is within the specified range 
                if(range.isInRange(distance)) {

                    // Check if the tile entity is a chest
                    if(blockState instanceof Chest) {
                        Chest chest = (Chest) blockState;

                        // Check if the chest contains the item specified by the player
                        if(chest.getInventory().contains(itemStack.getType())) {
                            locations.add(chest.getLocation());
                        }
                    }
                }

            }
        }

        // Output the locations of the chests, or whether no chests were found
        if(locations.isEmpty()) {
            player.sendMessage(&quot;No chests were found&quot;);
        } else {
            player.sendMessage(&quot;Found &quot; + locations.size() + &quot; chests:&quot;);
            locations.forEach(location -&gt; {
                player.sendMessage(&quot;  Found at: &quot; 
                        + location.getX() + &quot;, &quot; 
                        + location.getY() + &quot;, &quot; 
                        + location.getZ());
            });
        }
    })
    .register();
</code></pre>
</div><h1><a class="header" href="#string-arguments" id="string-arguments">String arguments</a></h1>
<p>There are three types of arguments that return Java's <code>String</code> object. Each have their own unique set of features which make them suitable for specific needs.</p>
<hr />
<h2><a class="header" href="#string-argument" id="string-argument">String argument</a></h2>
<p>The <code>StringArgument</code> class is used to represent a single word. These words <strong>can only contain alphanumeric characters (A-Z, a-z and 0-9), and the underscore character</strong>.</p>
<p>Accepted <code>StringArgument</code> values:</p>
<pre><code>Hello
123
hello123
Hello_world
</code></pre>
<p>Rejected <code>StringArgument</code> values:</p>
<pre><code>hello@email.com
yesn't
</code></pre>
<div class="example">
<h3><a class="header" href="#examples-of-stringargument-uses" id="examples-of-stringargument-uses">Examples of StringArgument uses:</a></h3>
<ul>
<li>Entering strings to identify offline players</li>
</ul>
</div>
<hr />
<h2><a class="header" href="#text-argument" id="text-argument">Text argument</a></h2>
<p>The <code>TextArgument</code> acts similar to any String in Java. These can be single words, like to the <code>StringArgument</code>, or have additional characters (e.g. spaces, symbols) <strong>if surrounded by quotes</strong>. To type quotation marks, you can use <code>\&quot;</code> (as similar to Java) to escape these special characters.</p>
<p>Accepted <code>TextArgument</code> values:</p>
<pre><code>hello
&quot;hello world!&quot;
&quot;hello@gmail.com&quot;
&quot;this has \&quot; &lt;&lt;-- speech marks! &quot;
</code></pre>
<p>Rejected <code>TextArgument</code> values:</p>
<pre><code>hello world
私
&quot;speech marks: &quot;&quot;
</code></pre>
<div class="example">
<h3><a class="header" href="#examples-of-textargument-uses" id="examples-of-textargument-uses">Examples of TextArgument uses:</a></h3>
<ul>
<li>Editing the contents of a sign</li>
<li>A command that requires multiple text arguments (say, username and password?)</li>
</ul>
</div>
<hr />
<h2><a class="header" href="#greedy-string-argument" id="greedy-string-argument">Greedy string argument</a></h2>
<blockquote>
<p><strong>Greedy Arguments:</strong></p>
<p>The <code>GreedyStringArgument</code>, similar to the <code>ChatArgument</code> uses the entire argument array from its current position. This means that it never ends, therefore if it is used, it must be the last element of your <code>LinkedHashMap</code> of arguments.</p>
<p>For example, if you have a command <code>/message &lt;message&gt; &lt;target&gt;</code>, it would not be able to determine where the message ends and the <code>&lt;target&gt;</code> argument begins.</p>
<p>If a <code>GreedyStringArgument</code> or <code>ChatArgument</code> is not declared at the end of the <code>LinkedHashMap</code> of arguments, or multiple of these arguments are used in the same <code>LinkedHashMap</code>, the CommandAPI throws a <code>GreedyArgumentException</code>.</p>
</blockquote>
<p>The <code>GreedyStringArgument</code> takes the <code>TextArgument</code> a step further. <strong>Any characters and symbols are allowed</strong> and quotation marks are not required.</p>
<div class="example">
<h3><a class="header" href="#example---messaging-command" id="example---messaging-command">Example - Messaging command</a></h3>
<p>Say we have a simple message command of the following form:</p>
<pre><code>/message &lt;target&gt; &lt;message&gt;
</code></pre>
<p>This would be ideal for a greedy string, since it can consume all text after the player's name:</p>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;target&quot;, new PlayerArgument());
arguments.put(&quot;message&quot;, new GreedyStringArgument());

new CommandAPICommand(&quot;message&quot;)
    .withArguments(arguments)
    .executes((sender, args) -&gt; {
		((Player) args[0]).sendMessage((String) args[1]);
	})
    .register();
</code></pre>
<p>Any text entered after the <code>&lt;target&gt;</code> argument would be sent to the player. For example, the command could be used as follows:</p>
<pre><code>/message Skepter This is some incredibly long string with &quot;symbols&quot; and $p3c!aL characters~
</code></pre>
<p>Note how this only works if the greedy string argument is <em>at the end</em>. If, say, the command was <code>/message &lt;message&gt; &lt;target&gt;</code>, it would not be able to determine where the <code>&lt;message&gt;</code> argument ends and the <code>&lt;target&gt;</code> argument begins.</p>
</div>
<div class="example">
<h3><a class="header" href="#examples-of-greedystringargument-uses" id="examples-of-greedystringargument-uses">Examples of GreedyStringArgument uses:</a></h3>
<ul>
<li>A messaging/whisper command (as shown in the example above)</li>
<li>A mailing command</li>
<li>Any command involving lots of text, such as a command to write the contents of a book</li>
<li>Any command which involves an unreasonable/unknown amount of arguments</li>
<li>Any command where you want to parse arguments similar to how regular Bukkit would</li>
</ul>
</div>
<h1><a class="header" href="#position-based-arguments" id="position-based-arguments">Position-based arguments</a></h1>
<h1><a class="header" href="#location-arguments" id="location-arguments">Location arguments</a></h1>
<p>In the CommandAPI, there are two arguments used to represent location. The <code>LocationArgument</code> argument, which represents a 3D location \( (x, y, z) \) and the <code>Location2DArgument</code>, which represents 2D location \( (x, z) \). </p>
<hr />
<h2><a class="header" href="#location-3d-space" id="location-3d-space">Location (3D space)</a></h2>
<p>The <code>LocationArgument</code> class is used to specify a location in the <strong>command sender's current world</strong>, returning a Bukkit <code>Location</code> object. It allows the user to enter three numbers as coordinates, or use relative coordinates (i.e. the <code>~</code> and <code>^</code> operators).</p>
<p>The <code>LocationArgument</code> constructor requires a <code>LocationType</code>, which specifies the type of location that is accepted by the command. The <code>LocationType</code> enum consists of two values:</p>
<h3><a class="header" href="#locationtypeblock_position" id="locationtypeblock_position"><code>LocationType.BLOCK_POSITION</code></a></h3>
<p><code>BLOCK_POSITION</code> refers to integer block coordinates. When in-game as a player, the suggested location is the coordinates of block you are looking at when you type the command.</p>
<p><img src="https://user-images.githubusercontent.com/42968178/50574833-92ef9e00-0df0-11e9-9ae5-59235b1bb8cb.png" alt="BLOCK_POSITION" /></p>
<h3><a class="header" href="#locationtypeprecise_position" id="locationtypeprecise_position"><code>LocationType.PRECISE_POSITION</code></a></h3>
<p><code>PRECISE_PRECISION</code> uses exact coordinates, using the <code>double</code> primitive type. When in-game as a player, the suggested location is the exact coordinates of where your cursor is pointing at when you type the command.</p>
<p><img src="https://user-images.githubusercontent.com/42968178/50574841-b6b2e400-0df0-11e9-9003-481b139d190f.png" alt="PRECISE_POSITION" /></p>
<p>If no <code>LocationType</code> is provided, <strong>the <code>LocationArgument</code> will use <code>PRECISE_POSITION</code> by default</strong>.</p>
<hr />
<div class="example">
<h3><a class="header" href="#example---break-block-using-coordinates" id="example---break-block-using-coordinates">Example - Break block using coordinates</a></h3>
<p>We can declare a simple command to break a block:</p>
<pre><code>/break &lt;location&gt;
</code></pre>
<p>Simply put, given the coordinates provided to the command, &quot;break&quot; the block by setting it's type to <code>Material.AIR</code>. For this example, we're referring to block specific coordinates, so we want to use <code>LocationType.BLOCK_POSITION</code>:</p>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();

//We want to target blocks in particular, so use BLOCK_POSITION
arguments.put(&quot;block&quot;, new LocationArgument(LocationType.BLOCK_POSITION));

new CommandAPICommand(&quot;break&quot;)
    .withArguments(arguments)
    .executesPlayer((player, args) -&gt; {
        ((Location) args[0]).getBlock().setType(Material.AIR);
    })
    .register();
</code></pre>
</div>
<hr />
<h2><a class="header" href="#location-2d-space" id="location-2d-space">Location (2D space)</a></h2>
<p>The <code>Location2DArgument</code> is pretty much identical in use to the <code>LocationArgument</code> for 3D coordinates, except instead of returning a <code>Location</code> object, it instead returns a <code>Location2D</code> object that extends <code>Location</code> (thus, being compatible anywhere you would normally be able to use <code>Location</code>).</p>
<blockquote>
<p><strong>Note:</strong></p>
<p>The <code>Location2DArgument</code> cannot be used with <code>LocationType.PRECISE_POSITION</code> in Minecraft 1.13. However, it can be used normally with <code>LocationType.PRECISE_POSITION</code> in Minecraft versions 1.13.1 and later.</p>
</blockquote>
<h1><a class="header" href="#rotation-arguments" id="rotation-arguments">Rotation arguments</a></h1>
<p>The <code>RotationArgument</code> allows users to specify a pair of pitch and yaw coordinates. By default (using the <code>~</code> symbol), this refers to the player's current pitch and yaw of where they are looking at.</p>
<p>The <code>RotationArgument</code> class returns a <code>Rotation</code> object, which consists of the following methods:</p>
<table><thead><tr><th>Method name</th><th>What it does</th></tr></thead><tbody>
<tr><td><code>float getPitch()</code></td><td>Returns a player's pitch (up and down rotation)</td></tr>
<tr><td><code>float getYaw()</code></td><td>Returns a player's yaw (left and right rotation)</td></tr>
<tr><td><code>float getNormalizedPitch()</code></td><td>Returns a player's pitch between -90 and 90 degrees</td></tr>
<tr><td><code>float getNormalizedYaw()</code></td><td>Returns a player's yaw between -180 and 180 degrees</td></tr>
</tbody></table>
<div class="example">
<h3><a class="header" href="#example-rotate-an-armor-stand-head" id="example-rotate-an-armor-stand-head">Example: Rotate an armor stand head</a></h3>
<p>Say we want to make an armor stand look in a certain direction. To do this, we'll use the following command:</p>
<pre><code>/rotate &lt;rotation&gt; &lt;target&gt;
</code></pre>
<p>To do this, we'll use the rotation from the <code>RotationArgument</code> and select an entity using the <code>EntitySelectorArgument</code>, with <code>EntitySelector.ONE_ENTITY</code>. We then check if our entity is an armor stand and if so, we set its head pose to the given rotation.</p>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;rotation&quot;, new RotationArgument());
arguments.put(&quot;target&quot;, new EntitySelectorArgument(EntitySelector.ONE_ENTITY));

new CommandAPICommand(&quot;rotate&quot;)
    .withArguments(arguments)
    .executes((sender, args) -&gt; {
        Rotation rotation = (Rotation) args[0];
        Entity target = (Entity) args[1];

        if(target instanceof ArmorStand) {
            ArmorStand a = (ArmorStand) target;
            a.setHeadPose(new EulerAngle(Math.toRadians(rotation.getPitch()), Math.toRadians(rotation.getYaw() - 90), 0));
        }
    })
    .register();
</code></pre>
<p>Note how the head pose requires an <code>EulerAngle</code> as opposed to a pitch and yaw. To account for this, we convert our rotation (which is in degrees) into an <code>EulerAngle</code> in radians.</p>
</div><h1><a class="header" href="#axisargument" id="axisargument">AxisArgument</a></h1>
<p>The <code>AxisArgument</code> class refers to the x, y and z axes. When used with the CommandAPI, it returns an <code>EnumSet&lt;Axis&gt;</code> <em>(You can view the documentation for <code>EnumSet</code> <a href="https://docs.oracle.com/javase/7/docs/api/java/util/EnumSet.html">here</a>)</em>. </p>
<div class="example">
<h3><a class="header" href="#examples-of-axisargument-uses" id="examples-of-axisargument-uses">Examples of AxisArgument uses:</a></h3>
<ul>
<li>Reflecting a structure in the x, y or z axis</li>
</ul>
</div><h1><a class="header" href="#chat-arguments" id="chat-arguments">Chat arguments</a></h1>
<p>The CommandAPI provides three main classes to interact with chat formatting in Minecraft.</p>
<h2><a class="header" href="#chat-color-argument" id="chat-color-argument">Chat color argument</a></h2>
<p>The <code>ChatColorArgument</code> class is used to represent a given chat color (e.g. red or green) </p>
<div class="example">
<h3><a class="header" href="#example---username-color-changing-plugin" id="example---username-color-changing-plugin">Example - Username color changing plugin</a></h3>
<p>Say we want to create a plugin to change the color of a player's username. We want to create a command of the following form:</p>
<pre><code>/namecolor &lt;chatcolor&gt;
</code></pre>
<p>We then use the <code>ChatColorArgument</code> to change the player's name color:</p>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;chatcolor&quot;, new ChatColorArgument());

new CommandAPICommand(&quot;namecolor&quot;)
    .withArguments(arguments)
    .executesPlayer((player, args) -&gt; {
        ChatColor color = (ChatColor) args[0];
	    player.setDisplayName(color + player.getName());
    })
    .register();
</code></pre>
</div>
<hr />
<h1><a class="header" href="#spigot-based-chat-arguments" id="spigot-based-chat-arguments">Spigot-based chat arguments</a></h1>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>The two following classes, <code>ChatComponentArgument</code> and <code>ChatArgument</code> depend on a Spigot based server. This means that these arguments will not work on a non-Spigot based server, such as CraftBukkit. If you use this class on a non-Spigot based server, it will throw a <code>SpigotNotFoundException</code></p>
<p>Spigot based servers include, but are not limited to:</p>
<ul>
<li><a href="https://www.spigotmc.org/">Spigot</a></li>
<li><a href="https://papermc.io/">PaperSpigot</a></li>
<li><a href="https://tacospigot.github.io/">TacoSpigot</a></li>
</ul>
</blockquote>
<h2><a class="header" href="#chat-component-argument" id="chat-component-argument">Chat component argument</a></h2>
<p>The <code>ChatComponentArgument</code> class accepts raw chat-based JSON as valid input. Despite being regular JSON, it <em>must</em> conform to the standard declared <a href="https://minecraft.gamepedia.com/Raw_JSON_text_format">here</a>, which consists of JSON that has a limited subset of specific keys (In other words, you can have a JSON object that has the key <code>text</code>, but not one that has the key <code>blah</code>).</p>
<p>This is converted into Spigot's <code>BaseComponent[]</code>, which can be used for the following:</p>
<ul>
<li>
<p>Broadcasting messages to all players on the server using:</p>
<pre><code class="language-java">Bukkit.getServer().spigot().broadcast(BaseComponent[]);
</code></pre>
</li>
<li>
<p>Adding and setting pages to books using <code>BookMeta</code>:</p>
<pre><code class="language-java">BookMeta meta = // ...
meta.spigot().setPages(BaseComponent[]);
</code></pre>
</li>
<li>
<p>Sending messages to <code>Player</code> objects:</p>
<pre><code class="language-java">Player player = // ...
player.spigot().sendMessage(BaseComponent[]);
</code></pre>
</li>
<li>
<p>Sending messages to <code>CommandSender</code> objects:</p>
<pre><code class="language-java">CommandSender sender = // ...
sender.spigot().sendMessage(BaseComponent[]);
</code></pre>
</li>
</ul>
<div class="example">
<h3><a class="header" href="#example---book-made-from-raw-json" id="example---book-made-from-raw-json">Example - Book made from raw JSON</a></h3>
<p>Say we want to generate a book using raw JSON. For this example, we'll use the following JSON (generated from <a href="https://minecraftjson.com/">minecraftjson.com</a>) to generate our book:</p>
<pre><code class="language-json">[&quot;&quot;, {
    &quot;text&quot;: &quot;Once upon a time, there was a guy call &quot;
}, {
    &quot;text&quot;: &quot;Skepter&quot;,
    &quot;color&quot;: &quot;light_purple&quot;,
    &quot;hoverEvent&quot;: {
        &quot;action&quot;: &quot;show_entity&quot;,
        &quot;value&quot;: &quot;Skepter&quot;
    }
}, {
    &quot;text&quot;: &quot; and he created the &quot;
}, {
    &quot;text&quot;: &quot;CommandAPI&quot;,
    &quot;underlined&quot;: true,
    &quot;clickEvent&quot;: {
        &quot;action&quot;: &quot;open_url&quot;,
        &quot;value&quot;: &quot;https://github.com/JorelAli/1.13-Command-API&quot;
    }
}]
</code></pre>
<p>Since we're writing a book, we must ensure that all quotes have been escaped. This can also be performed on the <a href="https://minecraftjson.com/">minecraftjson.com</a> website by selecting &quot;book&quot;: </p>
<pre><code class="language-json">[&quot;[\&quot;\&quot;,{\&quot;text\&quot;:\&quot;Once upon a time, there was a guy call \&quot;},{\&quot;text\&quot;:\&quot;Skepter\&quot;,\&quot;color\&quot;:\&quot;light_purple\&quot;,\&quot;hoverEvent\&quot;:{\&quot;action\&quot;:\&quot;show_entity\&quot;,\&quot;value\&quot;:\&quot;Skepter\&quot;}},{\&quot;text\&quot;:\&quot; and he created the \&quot;},{\&quot;text\&quot;:\&quot;CommandAPI\&quot;,\&quot;underlined\&quot;:true,\&quot;clickEvent\&quot;:{\&quot;action\&quot;:\&quot;open_url\&quot;,\&quot;value\&quot;:\&quot;https://github.com/JorelAli/1.13-Command-API\&quot;}}]&quot;]
</code></pre>
<p>Now let's define our command. Since book text is typically very large - too large to be entered into a chat, we'll make a command block compatible command by providing a player parameter:</p>
<pre><code>/makebook &lt;player&gt; &lt;contents&gt;
</code></pre>
<p>Now we can create our book command. We use the player as the main target by using their name for the author field, as well as their inventory to place the book. We finally construct our book using the <code>.setPages(BaseComponent[])</code> method:</p>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;player&quot;, new PlayerArgument());
arguments.put(&quot;contents&quot;, new ChatComponentArgument());

new CommandAPICommand(&quot;makebook&quot;)
    .withArguments(arguments)
    .executes((sender, args) -&gt; {
        Player player = (Player) args[0];
        BaseComponent[] arr = (BaseComponent[]) args[1];
        
        //Create book
        ItemStack is = new ItemStack(Material.WRITTEN_BOOK);
        BookMeta meta = (BookMeta) is.getItemMeta(); 
        meta.setTitle(&quot;Custom Book&quot;);
        meta.setAuthor(player.getName());
        meta.spigot().setPages(arr);
        is.setItemMeta(meta);
        
        //Give player the book
        player.getInventory().addItem(is);
    })
    .register();
</code></pre>
</div>
<hr />
<h2><a class="header" href="#chat-argument" id="chat-argument">Chat argument</a></h2>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>As of the time of writing (25th June 2020), it has been observed that the <code>ChatArgument</code> does not work on Spigot 1.16.1. This is not the case however for Spigot versions 1.15.2 and below.</p>
</blockquote>
<blockquote>
<p><strong>Note:</strong></p>
<p>The <code>ChatArgument</code> class is an argument similar to the <a href="./stringarguments.html#greedy-string-argument"><code>GreedyStringArgument</code></a>, in the sense that it has no terminator and must be defined at the end of your <code>LinkedHashMap</code> of arguments. For more information on this, please read the section on <a href="./stringarguments.html#greedy-string-argument">Greedy arguments</a>.</p>
</blockquote>
<p>The <code>ChatArgument</code> is basically identical to the <code>GreedyStringArgument</code>, with the added functionality of enabling <em>entity selectors</em>, such as <code>@e</code>, <code>@p</code> and so on. The <code>ChatArgument</code> also returns a <code>BaseComponent[]</code>, similar to the <code>ChatComponentArgument</code>.</p>
<div class="example">
<h3><a class="header" href="#example---sending-personalized-messages-to-players" id="example---sending-personalized-messages-to-players">Example - Sending personalized messages to players</a></h3>
<p>Say we wanted to broadcast a &quot;personalized&quot; message to players on the server. By &quot;personalized&quot;, we mean a command which changes its output depending on who we are sending the output to. Simply put, we want a command of the following structure:</p>
<pre><code>/pbroadcast &lt;message&gt;
</code></pre>
<p>Say we're on a server with 2 players: <em>Bob</em> and <em>Michael</em>. If I were to use the following command:</p>
<pre><code>/pbroadcast Hello @p
</code></pre>
<p><em>Bob</em> would receive the message &quot;Hello Bob&quot;, whereas <em>Michael</em> would receive the message &quot;Hello Michael&quot;. We can use the <code>ChatArgument</code> to create this &quot;personalized&quot; broadcast:</p>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;message&quot;, new ChatArgument());

new CommandAPICommand(&quot;pbroadcast&quot;)
    .withArguments(arguments)
    .executes((sender, args) -&gt; {
        BaseComponent[] message = (BaseComponent[]) args[0];
    
        //Broadcast the message to everyone on the server
        Bukkit.getServer().spigot().broadcast(message);
    })
    .register();
</code></pre>
</div><h1><a class="header" href="#entity--player-arguments" id="entity--player-arguments">Entity &amp; player arguments</a></h1>
<h2><a class="header" href="#entity-selector-argument" id="entity-selector-argument">Entity selector argument</a></h2>
<p>Minecraft's <a href="https://minecraft.gamepedia.com/Commands#Target_selectors">target selectors</a> (e.g. <code>@a</code> or <code>@e</code>) are implemented using the <code>EntitySelectorArgument</code> class. This allows you to select specific entities based on certain attributes.</p>
<p>The <code>EntitySelectorArgument</code> constructor requires an <code>EntitySelector</code> argument to determine what type of data to return. There are 4 types of entity selections which are available:</p>
<ul>
<li><code>EntitySelector.ONE_ENTITY</code> - A single entity, which returns a <code>Entity</code> object.</li>
<li><code>EntitySelector.MANY_ENTITIES</code>  - A collection of many entities, which returns a <code>Collection&lt;Entity&gt;</code> object.</li>
<li><code>EntitySelector.ONE_PLAYER</code> - A single player, which returns a <code>Player</code> object.</li>
<li><code>EntitySelector.MANY_PLAYERS</code> - A collection of players, which returns a <code>Collection&lt;Player&gt;</code> object.</li>
</ul>
<p>The return type is the type to be cast when retrieved from the <code>Object[] args</code> in the command declaration.</p>
<div class="example">
<h3><a class="header" href="#example---remove-entities-command" id="example---remove-entities-command">Example - Remove entities command</a></h3>
<p>Say we want a command to remove certain types of entities. Typically, this would be implemented using a simple command like:</p>
<pre><code>/remove &lt;player&gt;
/remove &lt;mob type&gt;
/remove &lt;radius&gt;
</code></pre>
<p>Instead, we can combine all of these into one by using the <code>EntitySelectorArgument</code>. We want to be able to target multiple entities at a time, so we want to use the <code>EntitySelector.MANY_ENTITIES</code> value in our constructor. We can simply retrieve the <code>Collection&lt;Entity&gt;</code> from this argument and iteratively remove each entity:</p>
<pre><code class="language-java">//LinkedHashMap to store arguments for the command
LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();

//Using a collective entity selector to select multiple entities
arguments.put(&quot;entities&quot;, new EntitySelectorArgument(EntitySelector.MANY_ENTITIES));

new CommandAPICommand(&quot;remove&quot;)
    .withArguments(arguments)
    .executes((sender, args) -&gt; {
        //Parse the argument as a collection of entities (as stated above in the documentation)
        @SuppressWarnings(&quot;unchecked&quot;)
        Collection&lt;Entity&gt; entities = (Collection&lt;Entity&gt;) args[0];
        
        sender.sendMessage(&quot;Removed &quot; + entities.size() + &quot; entities&quot;);
        for(Entity e : entities) {
            e.remove();
        }
    })
    .register();
</code></pre>
<p>We could then use this to target specific entities, for example:</p>
<ul>
<li>To remove all cows:
<pre><code>/remove @e[type=cow]
</code></pre>
</li>
<li>To remove the 10 furthest pigs from the command sender:
<pre><code>/remove @e[type=pig,limit=10,sort=furthest]
</code></pre>
</li>
</ul>
</div>
<hr />
<h2><a class="header" href="#player-argument" id="player-argument">Player argument</a></h2>
<p>The <code>PlayerArgument</code> class is very similar <em>(almost identical)</em> to <code>EntitySelectorArgument</code>, with the EntitySelector <code>ONE_PLAYER</code>. It also allows you to select a player based on their UUID.</p>
<blockquote>
<p><strong>Developer's Note:</strong> </p>
<p>I've not tested the <code>PlayerArgument</code> enough to recommend using it over the <code>EntitySelectorArgument(EntitySelector.ONE_PLAYER)</code>. There may be other advantages to using this than the regular EntitySelectorArgument, but as of writing this documentation, I know not of the advantages nor disadvantages to using this argument type. Internally, the <code>PlayerArgument</code> uses the <code>GameProfile</code> class from Mojang's authlib, which may be able to retrieve offline players (untested).</p>
<p><em>(Of course, if anyone is able to confirm any major differences between the <code>PlayerArgument</code> and the <code>EntitySelectorArgument(EntitySelector.ONE_PLAYER)</code>, I would be more than happy to include your findings in the documentation. If so, feel free to make a documentation amendment <a href="https://github.com/JorelAli/1.13-Command-API/issues/new/choose">here</a>.)</em></p>
</blockquote>
<hr />
<h2><a class="header" href="#entity-type-argument" id="entity-type-argument">Entity type argument</a></h2>
<p>The <code>EntityTypeArgument</code> class is used to retrieve a type of entity as defined in the <a href="https://hub.spigotmc.org/javadocs/bukkit/org/bukkit/entity/EntityType.html"><code>EntityType</code></a> enum. In other words, this is an entity type, for example a pig or a zombie.</p>
<div class="example">
<h3><a class="header" href="#example---spawning-entities" id="example---spawning-entities">Example - Spawning entities</a></h3>
<p>Say we want a command to spawn a specific type of entity, similar to the <code>/summon</code> command in Vanilla Minecraft, with the addition of specifying how many entities to spawn. We want to create a command of the following form:</p>
<pre><code>/spawnmob &lt;entity&gt; &lt;amount&gt;
</code></pre>
<p>Since we're trying to specify an entity type, we will use the <code>EntityTypeArgument</code> as our argument type for <code>&lt;entity&gt;</code>. We combine this with the <code>IntegerArgument</code> class with a specified range of \( 1 \le \textit{amount} \le 100 \):</p>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();

arguments.put(&quot;entity&quot;, new EntityTypeArgument());
arguments.put(&quot;amount&quot;, new IntegerArgument(1, 100)); //Prevent spawning too many entities

new CommandAPICommand(&quot;spawnmob&quot;)
    .withArguments(arguments)
    .executesPlayer((Player player, Object[] args) -&gt; {
        for(int i = 0; i &lt; (int) args[1]; i++) {
            player.getWorld().spawnEntity(player.getLocation(), (EntityType) args[0]);
        }
    })
    .register();
</code></pre>
<p>Note how in this example above, we have to explicitly state <code>Player player, Object[] args</code>. This is due to a limitation of Java's type inference system which is discussed <a href="./commandregistration.html#setting-the-commands-executor">here</a>.</p>
</div><h1><a class="header" href="#scoreboard-arguments" id="scoreboard-arguments">Scoreboard arguments</a></h1>
<h1><a class="header" href="#scoreboard-arguments-1" id="scoreboard-arguments-1">Scoreboard arguments</a></h1>
<p>The CommandAPI uses two classes to provide information about a scoreboard:</p>
<ul>
<li>The <code>ScoreHolderArgument</code> class represents <strong>score holder</strong> - a player's name or an entity's UUID that has scores in an objective. This is described in more detail <a href="https://minecraft.gamepedia.com/Scoreboard#Objectives">on the Minecraft Wiki</a>.</li>
<li>The <code>ScoreboardSlotArgument</code> class represents a <strong>display slot</strong> (sidebar, list or belowName) as well as the team color if the display is the sidebar. This is described in more detail <a href="https://minecraft.gamepedia.com/Scoreboard#Display_slots">on the Minecraft Wiki</a>.</li>
</ul>
<hr />
<h2><a class="header" href="#score-holder-argument" id="score-holder-argument">Score holder argument</a></h2>
<p>The score holder argument can accept either a single entity or a collection of multiple entities. In order to specify which one to use, you must provide a <code>ScoreHolderType</code> enum value to the <code>ScoreHolderArgument</code> constructor, which is either <code>ScoreHolderType.SINGLE</code> or <code>ScoreHolderType.MULTIPLE</code>:</p>
<pre><code class="language-java">new ScoreHolderArgument(ScoreHolderType.SINGLE);
new ScoreHolderArgument(ScoreHolderType.MULTIPLE);
</code></pre>
<p>Depending on which constructor is used, the cast type changes. If you use a <code>ScoreHolderType.SINGLE</code>, the argument must be casted to a <code>String</code>. Otherwise, if you use <code>ScoreHolderType.MULTIPLE</code>, the argument must be casted to a <code>Collection&lt;String&gt;</code>.</p>
<div class="example">
<h3><a class="header" href="#example---rewarding-players-with-scoreboard-objectives" id="example---rewarding-players-with-scoreboard-objectives">Example - Rewarding players with scoreboard objectives</a></h3>
<p>Say we want to reward all players that fit a certain criteria. We want a command with the following structure:</p>
<pre><code>/reward &lt;players&gt;
</code></pre>
<p>Since we could have multiple players that fit a certain criterion, we want to use <code>ScoreHolderType.MULTIPLE</code> as the parameter for the argument's constructor.</p>
<p>To give this example a bit more context, let's say we want to reward all players that have died less than 10 times in the server. To do this, we will use the following command:</p>
<pre><code>/reward @e[type=player,scores={deaths=..9}]
</code></pre>
<p>Note how we use <code>..9</code> to represent 9 or less deaths (since ranges are inclusive). Also note how we restrict our input to players via the command using <code>type=player</code>. We can now implement our command:</p>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
//We want multiple players, so we use ScoreHolderType.MULTIPLE in the constructor
arguments.put(&quot;players&quot;, new ScoreHolderArgument(ScoreHolderType.MULTIPLE));

new CommandAPICommand(&quot;reward&quot;)
    .withArguments(arguments)
    .executes((sender, args) -&gt; {
        //Get player names by casting to Collection&lt;String&gt;
        @SuppressWarnings(&quot;unchecked&quot;)
        Collection&lt;String&gt; players = (Collection&lt;String&gt;) args[0];
        
        for(String playerName : players) {
            Bukkit.getPlayer(playerName).getInventory().addItem(new ItemStack(Material.DIAMOND, 3));
        }
    })
    .register();
</code></pre>
</div>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>In the example above, we have our user use the <code>@e[type=player]</code> entity selector to restrict the <code>Collection&lt;String&gt;</code> so it only returns player names, which allows us to use <code>Bukkit.getPlayer(playerName)</code>. In practice, we cannot guarantee that such a selector will be used, so we could update the code to accept both entities and players. For example, we can differentiate between players and entities by using the <code>UUID.fromString(String)</code> method:</p>
<pre><code class="language-java">Collection&lt;String&gt; entitiesAndPlayers = (Collection&lt;String&gt;) args[0];
for(String str : entitiesAndPlayers) {
    try {
        UUID uuid = UUID.fromString(str);
        //Is a UUID, so it must by an entity
        Bukkit.getEntity(uuid);
    } catch(IllegalArgumentException exception) {
        //Not a UUID, so it must be a player name
        Bukkit.getPlayer(str); 
    }
}
</code></pre>
</blockquote>
<hr />
<h2><a class="header" href="#scoreboard-slot-argument" id="scoreboard-slot-argument">Scoreboard slot argument</a></h2>
<p>The <code>ScoreboardSlotArgument</code> represents where scoreboard information is displayed. Since the Bukkit scoreboard <code>DisplaySlot</code> is not able to represent the case where team colors are provided, the CommandAPI uses the <code>ScoreboardSlot</code> wrapper class as the representation of the <code>ScoreboardSlotArgument</code>.</p>
<h3><a class="header" href="#scoreboardslot-wrapper" id="scoreboardslot-wrapper"><code>ScoreboardSlot</code> wrapper</a></h3>
<p>The <code>ScoreboardSlot</code> wrapper class has 3 methods:</p>
<pre><code class="language-java">class ScoreboardSlot {
    public DisplaySlot getDisplaySlot();
    public ChatColor getTeamColor();
    public boolean hasTeamColor();
}
</code></pre>
<p>The <code>getDisplaySlot()</code> method returns the display slot that was chosen. If the display slot is <code>DisplaySlot.SIDEBAR</code> and <code>hasTeamColor()</code> returns true, then it is possible to use <code>getTeamColor()</code> to get the team color provided.</p>
<div class="example">
<h3><a class="header" href="#example---clearing-objectives-in-a-scoreboard-slot" id="example---clearing-objectives-in-a-scoreboard-slot">Example - Clearing objectives in a scoreboard slot</a></h3>
<p>Say we want to clear all objectives in a specific scoreboard slot. In this example, we will use the main server scoreboard, which is accessed using <code>Bukkit.getScoreboardManager.getMainScoreboard()</code>. We want a command with the following structure:</p>
<pre><code>/clearobjectives &lt;slot&gt;
</code></pre>
<p>We implement this simply by using the <code>ScoreboardSlotArgument</code> as our argument, and then we can clear the slot using the scoreboard <code>clearSlot(DisplaySlot)</code> method.</p>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;slot&quot;, new ScoreboardSlotArgument());

new CommandAPICommand(&quot;clearobjectives&quot;)
    .withArguments(arguments)
    .executes((sender, args) -&gt; {
		Scoreboard scoreboard = Bukkit.getScoreboardManager().getMainScoreboard();
        DisplaySlot slot = ((ScoreboardSlot) args[0]).getDisplaySlot();
        scoreboard.clearSlot(slot);
    })
    .register();
</code></pre>
</div><h1><a class="header" href="#objective-arguments" id="objective-arguments">Objective arguments</a></h1>
<p>In the CommandAPI, objectives are split into two classes: </p>
<ul>
<li>The <code>ObjectiveArgument</code> class, which represents objectives as a whole</li>
<li>The <code>ObjectiveCriteriaArgument</code> class, which represents objective criteria</li>
</ul>
<hr />
<h2><a class="header" href="#objective-argument" id="objective-argument">Objective argument</a></h2>
<p>The objective argument refers to a single scoreboard objective. Unconventionally, the <code>ObjectiveArgument</code> must be cast to <code>String</code> due to implementation limitations.</p>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>The two classes <code>ObjectiveArgument</code> and <code>TeamArgument</code> must both be cast to <code>String</code>, as opposed to <code>Objective</code> and <code>Team</code> respectively. This is due to the fact that commands are typically registered in the <code>onLoad()</code> method during a plugin's initialization. At this point in the server start-up sequence, the main server scoreboard is not initialized, so it cannot be used.</p>
</blockquote>
<div class="example">
<h3><a class="header" href="#example---move-objective-to-sidebar" id="example---move-objective-to-sidebar">Example - Move objective to sidebar</a></h3>
<p>As an example, let's create a command to move an objective to a player's sidebar. To do this, we will use the following command structure:</p>
<pre><code>/sidebar &lt;objective&gt;
</code></pre>
<p>Given that an objective has to be casted to a String, we have to find a way to convert it from its name to a Bukkit <code>Objective</code> object. We can do that by using the <code>getObjective(String)</code> method from a Bukkit <code>Scoreboard</code>:</p>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;objective&quot;, new ObjectiveArgument());

new CommandAPICommand(&quot;sidebar&quot;)
    .withArguments(arguments)
    .executes((sender, args) -&gt; {
        //The ObjectArgument must be casted to a String
        String objectiveName = (String) args[0];
        
        //An objective name can be turned into an Objective using getObjective(String)
        Objective objective = Bukkit.getScoreboardManager().getMainScoreboard().getObjective(objectiveName);
        
        //Set display slot
        objective.setDisplaySlot(DisplaySlot.SIDEBAR);
    })
    .register();
</code></pre>
</div>
<hr />
<h2><a class="header" href="#objective-criteria-argument" id="objective-criteria-argument">Objective criteria argument</a></h2>
<p>The <code>ObjectiveCriteriaArgument</code> is fairly straight forward - it represents the criteria for an objective. Similar to Bukkit, the objective criteria is simply represented as a <code>String</code>, so it must be casted to a <code>String</code> when being used.</p>
<div class="example">
<h3><a class="header" href="#example---unregister-all-objectives-by-criteria" id="example---unregister-all-objectives-by-criteria">Example - Unregister all objectives by criteria</a></h3>
<p>Say we wanted to create a command to unregister all objectives based on a given criteria. Let's create a command with the following form:</p>
<pre><code>/unregisterall &lt;objective critera&gt;
</code></pre>
<p>To do this, we're going to take advantage of Bukkit's <code>Scoreboard.getObjectivesByCriteria(String)</code> method</p>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;objective criteria&quot;, new ObjectiveCriteriaArgument());

new CommandAPICommand(&quot;unregisterall&quot;)
    .withArguments(arguments)
    .executes((sender, args) -&gt; {
        String objectiveCriteria = (String) args[0];
        Set&lt;Objective&gt; objectives = Bukkit.getScoreboardManager().getMainScoreboard().getObjectivesByCriteria(objectiveCriteria);
        
        //Unregister the objectives
        for(Objective objective : objectives) {
            objective.unregister();
        }
    })
    .register();
</code></pre>
</div><h1><a class="header" href="#team-arguments" id="team-arguments">Team arguments</a></h1>
<p>The <code>TeamArgument</code> class interacts with the Minecraft scoreboard and represents a team. Similar to the <code>ObjectiveArgument</code> class, the <code>TeamArgument</code> class must be casted to a String.</p>
<div class="example">
<h3><a class="header" href="#example---toggling-friendly-fire-in-a-team" id="example---toggling-friendly-fire-in-a-team">Example - Toggling friendly fire in a team</a></h3>
<p>Let's say we want to create a command to toggle the state of friendly fire in a team. We want a command of the following form</p>
<pre><code>/togglepvp &lt;team&gt;
</code></pre>
<p>To do this, given a team we want to use the <code>setAllowFriendlyFire(boolean)</code> function. As with the <code>ObjectiveArgument</code>, we must convert the <code>String</code> into a <code>Team</code> object.</p>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;team&quot;, new TeamArgument());

new CommandAPICommand(&quot;togglepvp&quot;)
    .withArguments(arguments)
    .executes((sender, args) -&gt; {
        //The TeamArgument must be casted to a String
        String teamName = (String) args[0];
        
        //A team name can be turned into a Team using getTeam(String)
        Team team = Bukkit.getScoreboardManager().getMainScoreboard().getTeam(teamName);
        
        //Toggle pvp
        team.setAllowFriendlyFire(team.allowFriendlyFire());
    })
    .register();
</code></pre>
</div><h1><a class="header" href="#miscellaneous-arguments" id="miscellaneous-arguments">Miscellaneous arguments</a></h1>
<h1><a class="header" href="#advancement-arguments" id="advancement-arguments">Advancement arguments</a></h1>
<p>The <code>AdvancementArgument</code> class represents in-game advancements. As expected, the <code>AdvancementArgument</code> can be casted to Bukkit's <code>Advancement</code> class.</p>
<div class="example">
<h3><a class="header" href="#example---awarding-a-player-an-advancement" id="example---awarding-a-player-an-advancement">Example - Awarding a player an advancement</a></h3>
<p>Say we want to award a player an advancement. First, we need the structure of our command:</p>
<pre><code>/award &lt;player&gt; &lt;advancement&gt;
</code></pre>
<p>Since we require a player, we will use the <code>PlayerArgument</code> for this example. Given a player, we can simply get the <code>AdvancementProgress</code> for that player, and then award the criteria required to fully complete the provided advancement.</p>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;player&quot;, new PlayerArgument());
arguments.put(&quot;advancement&quot;, new AdvancementArgument());

new CommandAPICommand(&quot;award&quot;)
    .withArguments(arguments)
    .executes((sender, args) -&gt; {
        Player target = (Player) args[0];
        Advancement advancement = (Advancement) args[1];
        
        //Award all criteria for the advancement
        AdvancementProgress progress = target.getAdvancementProgress(advancement);
        for(String criteria : advancement.getCriteria()) {
            progress.awardCriteria(criteria);
        }
    })
    .register();
</code></pre>
</div><h1><a class="header" href="#biome-arguments" id="biome-arguments">Biome arguments</a></h1>
<p>In Minecraft 1.16, they added the ability to refer to in-game biomes. The CommandAPI implements this using the <code>BiomeArgument</code>. As expected, this returns Bukkit's <code>Biome</code> enum when used.</p>
<blockquote>
<p><strong>Note:</strong></p>
<p>The <code>BiomeArgument</code> is only supported in Minecraft versions 1.16 and later. Attempting to use the <code>BiomeArgument</code> on an incompatible version of Minecraft will throw a <code>BiomeArgumentException</code>.</p>
</blockquote>
<div class="example">
<h3><a class="header" href="#example---setting-the-biome-of-a-chunk" id="example---setting-the-biome-of-a-chunk">Example - Setting the biome of a chunk</a></h3>
<p>Say you want to set the biome of the current chunk that a player is in. We can do this using the <code>World.setBiome(x, y, z, biome)</code> method for a given world. We will use this command structure to set the biome of our current chunk:</p>
<pre><code>/setbiome &lt;biome&gt;
</code></pre>
<p>And we can set the biome of the current chunk as expected:</p>
<pre><code>LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;biome&quot;, new BiomeArgument());

new CommandAPICommand(&quot;setbiome&quot;)
	.withArguments(arguments)
	.executesPlayer((player, args) -&gt; {
		Biome biome = (Biome) args[0];

		Chunk chunk = player.getLocation().getChunk();
		player.getWorld().setBiome(chunk.getX(), player.getLocation().getBlockY(), chunk.getZ(), biome);
	})
	.register();
</code></pre>
</div><h1><a class="header" href="#enchantment-argument" id="enchantment-argument">Enchantment argument</a></h1>
<p>The <code>EnchantmentArgument</code> class lets users input a specific enchantment. As you would expect, the cast type is Bukkit's <code>Enchantment</code> class.</p>
<div class="example">
<h3><a class="header" href="#example---giving-a-player-an-enchantment-on-their-current-item" id="example---giving-a-player-an-enchantment-on-their-current-item">Example - Giving a player an enchantment on their current item</a></h3>
<p>Say we want to give a player an enchantment on the item that the player is currently holding. We will use the following command structure:</p>
<pre><code>/enchantitem &lt;enchantment&gt; &lt;level&gt;
</code></pre>
<p>Since most enchantment levels range between 1 and 5, we will also make use of the <code>IntegerArgument</code> to restrict the level of the enchantment by usng its range constructor.</p>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;enchantment&quot;, new EnchantmentArgument());
arguments.put(&quot;level&quot;, new IntegerArgument(1, 5));

new CommandAPICommand(&quot;enchantitem&quot;)
    .withArguments(arguments)
    .executesPlayer((player, args) -&gt; {
		Enchantment enchantment = (Enchantment) args[0];
		int level = (int) args[1];
		
		//Add the enchantment
		player.getInventory().getItemInMainHand().addEnchantment(enchantment, level);
    })
    .register();
</code></pre>
</div>
<h1><a class="header" href="#environment-arguments" id="environment-arguments">Environment arguments</a></h1>
<p>The <code>EnvironmentArgument</code> class allows a command sender to refer to a specific world environment, declared in Bukkit's <code>World.Environment</code> class. This includes the following three environments: <code>NORMAL</code>, <code>NETHER</code> and <code>THE_END</code>.</p>
<blockquote>
<p><strong>Note:</strong></p>
<p>The <code>EnvironmentArgument</code> is only supported in Minecraft versions 1.13.1 and later, meaning it <em>will not work</em> on Minecraft 1.13. This is due to fact that Minecraft added the environment argument in 1.13.1. Attempting to use the <code>EnvironmentArgument</code> on Minecraft 1.13 will throw an <code>EnvironmentArgumentException</code>.</p>
</blockquote>
<div class="example">
<h3><a class="header" href="#example---creating-a-new-world" id="example---creating-a-new-world">Example - Creating a new world</a></h3>
<p>Say we want to create a new world on our Minecraft server. To do this, we need to know the name of the world, and the type (i.e. overworld, nether or the end). As such, we want to create a command with the following structure:</p>
<pre><code>/createworld &lt;worldname&gt; &lt;type&gt;
</code></pre>
<p>Using the world name and the environment of the world, we can use Bukkit's <code>WorldCreator</code> to create a new world that matches our provided specifications:</p>
<pre><code class="language-java">// Declare our arguments
LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;worldname&quot;, new StringArgument());
arguments.put(&quot;type&quot;, new EnvironmentArgument());

new CommandAPICommand(&quot;createworld&quot;)
    .withArguments(arguments)
    .executes((sender, args) -&gt; {
        String worldName = (String) args[0];
        Environment environment = (Environment) args[1];

        // Create a new world with the specific world name and environment
        Bukkit.getServer().createWorld(new WorldCreator(worldName).environment(environment));
        sender.sendMessage(&quot;World created!&quot;);
    })
    .register();
</code></pre>
</div><h1><a class="header" href="#itemstack-arguments" id="itemstack-arguments">Itemstack arguments</a></h1>
<p>The <code>ItemStackArgument</code> class represents in-game items. As expected, this should be casted to Bukkit's <code>ItemStack</code> object.</p>
<div class="example">
<h3><a class="header" href="#example---giving-a-player-an-itemstack" id="example---giving-a-player-an-itemstack">Example - Giving a player an itemstack</a></h3>
<p>Say we want to create a command that gives you items. For this command, we will use the following structure:</p>
<pre><code>/item &lt;itemstack&gt;
</code></pre>
<p>With this structure, we can easily create our command:</p>
<pre><code class="language-java">// Declare our arguments
LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;itemstack&quot;, new ItemStackArgument());

new CommandAPICommand(&quot;item&quot;)
    .withArguments(arguments)
    .executesPlayer((player, args) -&gt; {
        player.getInventory().addItem((ItemStack) args[0]);
    })
    .register();
</code></pre>
</div><h1><a class="header" href="#loottable-argument" id="loottable-argument">LootTable argument</a></h1>
<p>The <code>LootTableArgument</code> class can be used to get a Bukkit <code>LootTable</code> object.</p>
<div class="example">
<h3><a class="header" href="#example---filling-an-inventory-with-loot-table-contents" id="example---filling-an-inventory-with-loot-table-contents">Example - Filling an inventory with loot table contents</a></h3>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;loottable&quot;, new LootTableArgument());

new CommandAPICommand(&quot;giveloottable&quot;)
    .withArguments(arguments)
    .executesPlayer((player, args) -&gt; {
        LootTable lootTable = (LootTable) args[0];
    
    	LootContext context = /* Some generated LootContext relating to the lootTable*/
		lootTable.fillInventory(player.getInventory(), new Random(), context);
    })
    .register();
</code></pre>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>Honestly, I've not managed to get a successful example of using a <code>LootTable</code> in practice, due to being unable to generate a suitable <code>LootContext</code>. If you believe you can supply a suitable example for this page, feel free to send an example <a href="https://github.com/JorelAli/1.13-Command-API/issues/new/choose">on the CommandAPI issues page</a>.</p>
</blockquote>
</div><h1><a class="header" href="#mathoperation-arguments" id="mathoperation-arguments">MathOperation arguments</a></h1>
<p>The CommandAPI's <code>MathOperationArgument</code> is used to represent the Minecraft scoreboard arithmetic operation to alter scoreboard scores. Since there is no default representation in the Bukkit API, the CommandAPI provides the <code>MathOperation</code> class to represent each operation:</p>
<table><thead><tr><th align="center">Symbol (in Minecraft)</th><th>MathOperation enum value</th></tr></thead><tbody>
<tr><td align="center">\(+=\)</td><td><code>MathOperation.ADD</code></td></tr>
<tr><td align="center">\(-=\)</td><td><code>MathOperation.SUBTRACT</code></td></tr>
<tr><td align="center">\(*=\)</td><td><code>MathOperation.MULTIPLY</code></td></tr>
<tr><td align="center">\(/=\)</td><td><code>MathOperation.DIVIDE</code></td></tr>
<tr><td align="center">\(\%=\)</td><td><code>MathOperation.MOD</code></td></tr>
<tr><td align="center">\(=\)</td><td><code>MathOperation.ASSIGN</code></td></tr>
<tr><td align="center">\(&lt;\)</td><td><code>MathOperation.MIN</code></td></tr>
<tr><td align="center">\(&gt;\)</td><td><code>MathOperation.MAX</code></td></tr>
<tr><td align="center">\(&gt;&lt;\)</td><td><code>MathOperation.SWAP</code></td></tr>
</tbody></table>
<hr />
<p>The <code>MathOperationArgument</code> also has two methods:</p>
<pre><code class="language-java">public int apply(int val1, int val2);
public float apply(float val1, float val2);
</code></pre>
<p>These methods are used to provide a basic implementation of these math operations on a given input. Given the values <code>val1</code> and <code>val2</code>, these are the operation that the <code>apply(val1, val2)</code> method performs:</p>
<table><thead><tr><th>MathOperation enum value</th><th>Result</th></tr></thead><tbody>
<tr><td><code>MathOperation.ADD</code></td><td><code>val1 + val2</code></td></tr>
<tr><td><code>MathOperation.SUBTRACT</code></td><td><code>val1 - val2</code></td></tr>
<tr><td><code>MathOperation.MULTIPLY</code></td><td><code>val1 * val2</code></td></tr>
<tr><td><code>MathOperation.DIVIDE</code></td><td><code>val1 / val2</code></td></tr>
<tr><td><code>MathOperation.MOD</code></td><td><code>val1 % val2</code></td></tr>
<tr><td><code>MathOperation.ASSIGN</code></td><td><code>val2</code></td></tr>
<tr><td><code>MathOperation.MIN</code></td><td><code>Math.min(val1, val2)</code></td></tr>
<tr><td><code>MathOperation.MAX</code></td><td><code>Math.max(val1, val2)</code></td></tr>
<tr><td><code>MathOperation.SWAP</code></td><td><code>val2</code></td></tr>
</tbody></table>
<hr />
<div class="example">
<h3><a class="header" href="#example---changing-a-players-level" id="example---changing-a-players-level">Example - Changing a player's level</a></h3>
<p>Say we wanted to create a player's level. Typically, this is implemented in the following manner:</p>
<pre><code>/xp set &lt;player&gt; &lt;level&gt;
/xp add &lt;player&gt; &lt;levels&gt;
</code></pre>
<p>Using the <code>MathOperationArgument</code>, we can extend the functionality of adding and setting a player's level by allowing the user to choose what operation they desire. To do this, we'll use the following structure:</p>
<pre><code>/changelevel &lt;player&gt; &lt;operation&gt; &lt;value&gt;
</code></pre>
<p>As with any command, we declare our arguments, cast them properly and then we write our main code. In this example, we use the <code>apply(int, int)</code> method from our <code>MathOperation</code> to calculate the player's new level.</p>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;player&quot;, new PlayerArgument());
arguments.put(&quot;operation&quot;, new MathOperationArgument());
arguments.put(&quot;value&quot;, new IntegerArgument());

new CommandAPICommand(&quot;changelevel&quot;)
    .withArguments(arguments)
    .executes((sender, args) -&gt; {
        Player target = (Player) args[0];
        MathOperation op = (MathOperation) args[1];
        int value = (int) args[2];

        target.setLevel(op.apply(target.getLevel(), value));
    })
	.register();
</code></pre>
<hr />
<p>There are various applications for the <code>changelevel</code> command based on what the user inputs. For example:</p>
<ul>
<li>
<p>To set the player <em>Notch</em> to level 10:</p>
<pre><code>/changelevel Notch = 10
</code></pre>
</li>
<li>
<p>To double the player <em>Notch's</em> level:</p>
<pre><code>/changelevel Notch *= 2
</code></pre>
</li>
<li>
<p>To set the player <em>Notch</em>'s level to 20, or keep it as their current level if it is higher than 20:</p>
<pre><code>/changelevel Notch &gt; 20
</code></pre>
</li>
</ul>
</div><h1><a class="header" href="#particle-arguments" id="particle-arguments">Particle arguments</a></h1>
<p>The <code>ParticleArgument</code> class represents Minecraft particles. As expected, this is casted to the Bukkit <code>Particle</code> class.</p>
<div class="example">
<h3><a class="header" href="#example---show-particles-at-a-players-location" id="example---show-particles-at-a-players-location">Example - Show particles at a player's location</a></h3>
<p>Say we wanted to have a command that displayed particles at a player's location. We will use the following command structure:</p>
<pre><code>/showparticle &lt;particle&gt;
</code></pre>
<p>With this, we can simply spawn the particle using the <code>World.spawnParticle(Particle, Location, int)</code> method:</p>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;particle&quot;, new ParticleArgument());

new CommandAPICommand(&quot;showparticle&quot;)
    .withArguments(arguments)
    .executesPlayer((player, args) -&gt; {
        player.getWorld().spawnParticle((Particle) args[0], player.getLocation(), 1);
    })
    .register();
</code></pre>
</div><h1><a class="header" href="#potion-effect-arguments" id="potion-effect-arguments">Potion effect arguments</a></h1>
<p>The <code>PotionEffectArgument</code> class represents Minecraft potion effects. When used, this argument is casted to Bukkit's <code>PotionEffectType</code> class.</p>
<div class="example">
<h3><a class="header" href="#example---giving-a-player-a-potion-effect" id="example---giving-a-player-a-potion-effect">Example - Giving a player a potion effect</a></h3>
<p>Say we wanted to have a command that gives a player a potion effect. For this command, we'll use the following structure:</p>
<pre><code>/potion &lt;target&gt; &lt;potion&gt; &lt;duration&gt; &lt;strength&gt;
</code></pre>
<p>In this example, we utilize some of the other arguments that we've described earlier, such as the <code>PlayerArgument</code> and <code>TimeArgument</code>. Since duration for the <code>PotionEffect</code> constructor is in ticks, this is perfectly fit for the <code>TimeArgument</code>, which is represented in ticks.</p>
<pre><code class="language-java">//Declare our arguments
LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;target&quot;, new PlayerArgument());
arguments.put(&quot;potion&quot;, new PotionEffectArgument());
arguments.put(&quot;duration&quot;, new TimeArgument());
arguments.put(&quot;strength&quot;, new IntegerArgument());

new CommandAPICommand(&quot;potion&quot;)
    .withArguments(arguments)
    .executes((sender, args) -&gt; {
        Player target = (Player) args[0];
        PotionEffectType potion = (PotionEffectType) args[1];
        int duration = (int) args[2];
        int strength = (int) args[3];
        
        //Add the potion effect to the target player
        target.addPotionEffect(new PotionEffect(potion, duration, strength));
    })
    .register();
</code></pre>
</div><h1><a class="header" href="#recipe-arguments" id="recipe-arguments">Recipe arguments</a></h1>
<p>The <code>RecipeArgument</code> class lets you retrieve Bukkit's <code>Recipe</code> object. Unlike the other arguments, <strong>this argument has a slightly different implementation for Minecraft 1.15+</strong>.</p>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>In Minecraft 1.15 and onwards, Bukkit now has the <a href="https://hub.spigotmc.org/javadocs/bukkit/org/bukkit/inventory/ComplexRecipe.html"><code>ComplexRecipe</code></a> class. This class is a subclass of the typical <code>Recipe</code> class, so casting still works when casting to <code>Recipe</code>. The only major difference is the <code>ComplexRecipe</code> class also inherits the <code>Keyed</code> interface, allowing you to access its <code>NamespacedKey</code>. This is used to grant the recipe to players. (This is shown in the second example below).</p>
</blockquote>
<div class="example">
<h3><a class="header" href="#example---giving-a-player-the-result-of-a-recipe" id="example---giving-a-player-the-result-of-a-recipe">Example - Giving a player the result of a recipe</a></h3>
<p>Say we want to give youself the result of a specific recipe. Since Bukkit's <code>Recipe</code> class contains the <code>getResult()</code> method, we will use that in our example. We want to create the following command:</p>
<pre><code>/giverecipe &lt;recipe&gt;
</code></pre>
<p>As such, we easily implement it by specifying the <code>RecipeArgument</code>, casting it and adding it to the player's inventory:</p>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;recipe&quot;, new RecipeArgument());

new CommandAPICommand(&quot;giverecipe&quot;)
    .withArguments(arguments)
    .executesPlayer((player, args) -&gt; {
        Recipe recipe = (Recipe) args[0];
    	player.getInventory().addItem(recipe.getResult());
    })
    .register();
</code></pre>
</div>
<div class="example">
<h3><a class="header" href="#example---unlocking-a-recipe-for-a-player-115-only" id="example---unlocking-a-recipe-for-a-player-115-only">Example - Unlocking a recipe for a player (1.15+ only)</a></h3>
<p>Since 1.15 has the <code>ComplexRecipe</code> class, we will take advantage of this to unlock a recipe for a player. For this command, we'll use the following structure:</p>
<pre><code>/unlockrecipe &lt;player&gt; &lt;recipe&gt;
</code></pre>
<p>Since the <code>discoverRecipe(NamespacedKey)</code> method for a player requires a <code>NamespacedKey</code>, we have to ensure that this recipe is of type <code>ComplexRecipe</code>. This is simply done by using <code>instanceof</code>. If this is the case, then we can unlock the recipe for the player. Otherwise, we cannot, so we fail gracefully using the <code>CommandAPI.fail(String)</code> method;</p>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;player&quot;, new PlayerArgument());
arguments.put(&quot;recipe&quot;, new RecipeArgument());

new CommandAPICommand(&quot;unlockrecipe&quot;)
    .withArguments(arguments)
    .executes((sender, args) -&gt; {
        Player target = (Player) args[0];
        Recipe recipe = (Recipe) args[1];
		
        //Check if we're running 1.15+
        if(recipe instanceof ComplexRecipe) {
            ComplexRecipe complexRecipe = (ComplexRecipe) recipe;
            target.discoverRecipe(complexRecipe.getKey());
        } else {
            //Error here, can't unlock recipe for player
            CommandAPI.fail(&quot;Cannot unlock recipe for player (Are you using version 1.15 or above?)&quot;);
        }
    })
    .register();
</code></pre>
</div><h1><a class="header" href="#sound-arguments" id="sound-arguments">Sound arguments</a></h1>
<p>The <code>SoundArgument</code> class allows a command sender to retrieve the Bukkit <code>Sound</code> object to represent in-game sound effects (such as mob sounds or ambient sound effects), as well as in-game music.</p>
<div class="example">
<h3><a class="header" href="#example---playing-sound-to-yourself" id="example---playing-sound-to-yourself">Example - Playing sound to yourself</a></h3>
<p>Say we want a simple command that plays a specific sound at your location. To do this, we will make the following command:</p>
<pre><code>/sound &lt;sound&gt;
</code></pre>
<p>This command simply plays the provided sound to the current player:</p>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;sound&quot;, new SoundArgument());

new CommandAPICommand(&quot;sound&quot;)
    .withArguments(arguments)
    .executesPlayer((player, args) -&gt; {
        player.getWorld().playSound(player.getLocation(), (Sound) args[0], 100.0f, 1.0f);
    })
    .register();
</code></pre>
</div><h1><a class="header" href="#time-arguments" id="time-arguments">Time arguments</a></h1>
<p>The <code>TimeArgument</code> class represents in-game time, <em>in the number of in-game ticks</em>. This allows command senders to specify a certain number of ticks in a simpler way, by including the characters <code>d</code> to specify the numbers of days, <code>s</code> to specify the number of seconds or <code>t</code> to specify a number of ticks.</p>
<p>The CommandAPI converts the inputs provided by the command sender into a number of ticks as an integer.</p>
<blockquote>
<p><strong>Note:</strong></p>
<p>The <code>TimeArgument</code> is only supported in Minecraft versions 1.14 and later, meaning it <em>will not work</em> on Minecraft versions 1.13, 1.13.1 or 1.13.2. This is due to the fact that Minecraft added the time argument in 1.14. Attempting to use the <code>TimeArgument</code> on an incompatible version will throw a <code>TimeArgumentException</code>.</p>
</blockquote>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>The <code>TimeArgument</code> provides inputs such as <code>2d</code> (2 in-game days), <code>10s</code> (10 seconds) and <code>20t</code> (20 ticks), but does <strong>not</strong> let you combine them, such as <code>2d10s</code>.</p>
</blockquote>
<div class="example">
<h3><a class="header" href="#example---displaying-a-server-wide-announcement" id="example---displaying-a-server-wide-announcement">Example - Displaying a server-wide announcement</a></h3>
<p>Say we have a command <code>bigmsg</code> that displays a title message to all players for a certain duration:</p>
<pre><code>/bigmsg &lt;duration&gt; &lt;message&gt;
</code></pre>
<pre><code class="language-java">//Declare our arguments
LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;duration&quot;, new TimeArgument());
arguments.put(&quot;message&quot;, new GreedyStringArgument());

new CommandAPICommand(&quot;bigmsg&quot;)
    .withArguments(arguments)
    .executes((sender, args) -&gt; {
        //Duration in ticks
        int duration = (int) args[0];
        String message = (String) args[1];

        for(Player player : Bukkit.getOnlinePlayers()) {
            //Display the message to all players, with the default fade in/out times (10 and 20).
            player.sendTitle(message, &quot;&quot;, 10, duration, 20);
        }
    })
    .register();
</code></pre>
</div><h1><a class="header" href="#nbt-arguments" id="nbt-arguments">NBT arguments</a></h1>
<p>The CommandAPI includes support for NBT compounds by using the <a href="https://www.spigotmc.org/resources/nbt-api.7939/">NBT API by tr7zw</a>. To use NBT, use the <code>NBTCompoundArgument</code> and simply cast the argument to an <code>NBTContainer</code>.</p>
<p>Since this argument depends on the NBT API, if this is used and the NBT API is not available on the server, an <code>NBTAPINotFoundException</code> will be thrown.</p>
<div class="example">
<h3><a class="header" href="#example---" id="example---">Example - ???</a></h3>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;nbt&quot;, new NBTCompoundArgument());

new CommandAPICommand(&quot;award&quot;)
    .withArguments(arguments)
    .executes((sender, args) -&gt; {
        NBTContainer nbt = (NBTContainer) args[0];
        
        //Do something with &quot;nbt&quot; here...
    })
    .register();
</code></pre>
</div>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>I haven't personally explored much with using this argument, so this example isn't great. If you believe you can supply a suitable example for this page, feel free to send an example <a href="https://github.com/JorelAli/1.13-Command-API/issues/new/choose">on the CommandAPI issues page</a>.</p>
</blockquote>
<h1><a class="header" href="#literal-arguments" id="literal-arguments">Literal arguments</a></h1>
<p>Literal arguments are used to represent &quot;forced options&quot; for a command. For instance, take Minecraft's <code>/gamemode</code> command. The syntax consists of the following:</p>
<pre><code>/gamemode &lt;mode&gt; [player]
</code></pre>
<p>It consists of a gamemode, followed by an optional player argument. The list of gamemodes are as follows:</p>
<pre><code>/gamemode survival 
/gamemode creative
/gamemode adventure
/gamemode spectator
</code></pre>
<p>Unlike regular commands (as those implemented by Bukkit for example), these four options are &quot;hardcoded&quot; - they're not &quot;suggestions&quot;. The user can <em>only</em> enter one of these four examples, no other values are allowed.</p>
<hr />
<h2><a class="header" href="#literal-arguments-vs-regular-arguments" id="literal-arguments-vs-regular-arguments">Literal arguments vs regular arguments</a></h2>
<p>Unlike regular arguments that are shown in this chapter, the literal argument is <em>technically</em> not an argument. Due to this fact, <strong>the literal argument is not present in the <code>args[]</code> for the command declaration.</strong></p>
<div class="example">
<h3><a class="header" href="#example---literal-arguments-and-regular-arguments" id="example---literal-arguments-and-regular-arguments">Example - Literal arguments and regular arguments</a></h3>
<p>To illustrate the behavior of literal arguments, we create a command of the following form:</p>
<pre><code>/mycommand &lt;literal&gt; &lt;text&gt;
</code></pre>
<p>As an example, let's declare the literal &quot;hello&quot; as a valid literal for this command. When we retrieve the result from <code>args[0]</code>, it returns the value of the <code>TextArgument</code>, as opposed to the literal &quot;hello&quot;:</p>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;literal&quot;, new LiteralArgument(&quot;hello&quot;));
arguments.put(&quot;text&quot;, new TextArgument());

new CommandAPICommand(&quot;mycommand&quot;)
    .withArguments(arguments)
    .executes((sender, args) -&gt; {
        // This gives the variable &quot;text&quot; the contents of the TextArgument, and not the literal &quot;hello&quot;
		String text = (String) args[0];
    })
    .register();
</code></pre>
<p>If I were to run the following command:</p>
<pre><code>/mycommand hello goodbye
</code></pre>
<p>The value of <code>text</code> in the code above would be &quot;goodbye&quot;.</p>
</div>
<div class="example">
<h2><a class="header" href="#example---gamemode-command-using-literal-arguments" id="example---gamemode-command-using-literal-arguments">Example - Gamemode command using literal arguments</a></h2>
<p>This is a demonstration of how you could create a command similar to Minecraft's <code>/gamemode</code> command by using literal arguments. To do this, we are effectively registering 4 separate commands, each called <code>/gamemode</code>, but with different literal arguments.</p>
<pre><code class="language-java">//Create a map of gamemode names to their respective objects
HashMap&lt;String, GameMode&gt; gamemodes = new HashMap&lt;&gt;();
gamemodes.put(&quot;adventure&quot;, GameMode.ADVENTURE);
gamemodes.put(&quot;creative&quot;, GameMode.CREATIVE);
gamemodes.put(&quot;spectator&quot;, GameMode.SPECTATOR);
gamemodes.put(&quot;survival&quot;, GameMode.SURVIVAL);

//Iterate over the map
for(String key : gamemodes.keySet()) {
    
    //Create our arguments as usual, using the LiteralArgument for the name of the gamemode
	LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
	arguments.put(key, new LiteralArgument(key));
    
    //Register the command as usual
    new CommandAPICommand(&quot;changegamemode&quot;)
        .withArguments(arguments)
        .executesPlayer((player, args) -&gt; {
            //Retrieve the object from the map via the key and NOT the args[]
	        player.setGameMode(gamemodes.get(key));
        })
        .register();
}
</code></pre>
<p>Note how, since we don't have access to the literal from <code>args</code>, we must access the provided gamemode from elsewhere.</p>
</div>
<hr />
<h2><a class="header" href="#literal-argument-warnings" id="literal-argument-warnings">Literal argument warnings</a></h2>
<p>Literal arguments require a string in the constructor. If the literal is an empty String or is null, the CommandAPI will throw a <code>BadLiteralException</code>.</p>
<p>Because literal arguments are <em>&quot;hardcoded&quot;</em>, each literal is effectively mapped to a single command. This is shown when using the configuration option <code>create-dispatcher-json: true</code> which shows the JSON result of registered commands. For instance, take the <code>/defaultgamemode</code> command:</p>
<pre><code class="language-json">&quot;defaultgamemode&quot;: {
    &quot;type&quot;: &quot;literal&quot;,
    &quot;children&quot;: {
        &quot;adventure&quot;: {
            &quot;type&quot;: &quot;literal&quot;,
            &quot;executable&quot;: true
        },
        &quot;creative&quot;: {
            &quot;type&quot;: &quot;literal&quot;,
            &quot;executable&quot;: true
        },
        &quot;spectator&quot;: {
            &quot;type&quot;: &quot;literal&quot;,
            &quot;executable&quot;: true
        },
        &quot;survival&quot;: {
            &quot;type&quot;: &quot;literal&quot;,
            &quot;executable&quot;: true
        }
    }
},
</code></pre>
<p>Each option produces a new &quot;command&quot; in the tree of commands. This means that having exceptionally large lists of literals, or nested literals (e.g. <code>/command &lt;literal1&gt; &lt;literal2&gt;</code>) can cause very large trees which cannot be sent to the clients <em>(it can cause clients to crash)</em>.</p>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>Take care when using literal arguments. If your list of arguments is exceptionally large, or contains many nested arguments, the server may be unable to send the command information to the client. If many command argument choices are required, consider using a <code>StringArgument</code> and using <code>.overrideSuggestions()</code> to create your own list of required arguments.</p>
</blockquote>
<h1><a class="header" href="#custom-arguments" id="custom-arguments">Custom arguments</a></h1>
<p>Custom arguments are arguably the most powerful argument that the CommandAPI offers. This argument is used to represent any String, or Minecraft key <em>(Something of the form <code>String:String</code>, such as <code>minecraft:diamond</code>)</em>. They basically represent <code>StringArgument</code> with overrideable suggestions and a built-in parser for any object of your choice. They are designed to be used for multiple commands - you define the argument once and can use it wherever you want when declaring commands.</p>
<hr />
<p>The <code>CustomArgument&lt;T&gt;</code> has two constructors, declared as follows:</p>
<pre><code class="language-java">public CustomArgument(CustomArgumentFunction&lt;T&gt; parser);
public CustomArgument(CustomArgumentFunction&lt;T&gt; parser, boolean keyed);
</code></pre>
<p>The first argument is the <code>CustomArgumentFunction</code>, which is a lambda that takes in a String and returns some custom object of type <code>T</code>. The first constructor will construct a <code>CustomArgument</code> which uses the <code>StringArgument</code> as a base (thus, only simple strings). The second argument has the field <code>keyed</code>. When this field is set to <code>true</code>, the <code>CustomArgument</code> will use a <code>Minecraft key</code> as a base, allowing you to use Minecraft keys as input.</p>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>I may have complicated this too much, so let me clarify what I mean. The <code>CustomArgument</code> constructor is of the following forms:</p>
<pre><code class="language-java">CustomArgument((String) -&gt; { ... return T; });
CustomArgument((String) -&gt; { ... return T; }, boolean keyed);
</code></pre>
<p>Both constructors take in a <strong>String</strong> as input and return <code>T</code>. When enabling <code>keyed</code>, it allows the input to be of the form of a Minecraft key, but doesn't change the input type.</p>
</blockquote>
<p>The custom argument requires the type of the target object that the custom argument will return when parsing the arguments for a command. For instance, if you have a <code>CustomArgument&lt;Player&gt;</code>, then when parsing the arguments for the command, you would cast it to a <code>Player</code> object.</p>
<div class="example">
<h3><a class="header" href="#example---world-argument" id="example---world-argument">Example - World argument</a></h3>
<p>Say we want to create an argument to represents the list of available worlds on the server. We basically want to have an argument which always returns a Bukkit <code>World</code> object as the result. Here, we create a method <code>worldArgument()</code> that returns our custom argument that returns a <code>World</code>. First, we retrieve our <code>String[]</code> of world names to be used for our suggestions. We then write our custom argument that creates a <code>World</code> object from the input (in this case, we simply convert the String to a <code>World</code> using <code>Bukkit.getWorld(String)</code>). We perform error handling before returning our result:</p>
<pre><code class="language-java">//Function that returns our custom argument
public Argument worldArgument() {

    //List of worlds on the server, as Strings
    String[] worlds = Bukkit.getWorlds().stream().map(World::getName).toArray(String[]::new);

    //Construct our CustomArgument that takes in a String input and returns a World object
    return new CustomArgument&lt;World&gt;((input) -&gt; {
        //Parse the world from our input
        World world = Bukkit.getWorld(input);

        if(world == null) {
            throw new CustomArgumentException(new MessageBuilder(&quot;Unknown world: &quot;).appendArgInput());
        } else {
            return world;
        }
    }).overrideSuggestions(worlds);
}
</code></pre>
<p>In our error handling step, we check if the world is equal to null (since the <code>Bukkit.getWorld(String)</code> is <code>@Nullable</code>). To handle this case, we throw a <code>CustomArgumentException</code> with an error from a <code>MessageBuilder</code>. The <code>CustomArgumentException</code> has two constructors, so a message builder isn't required each time:</p>
<pre><code class="language-java">new CustomArgumentException(String message);
new CustomArgumentException(MessageBuilder message);
</code></pre>
<hr />
<p>We can use our custom argument like any other argument. Say we wanted to write a command to teleport to a specific world. We will create a command of the following structure:</p>
<pre><code>/tpworld &lt;world&gt;
</code></pre>
<p>Since we have defined the method <code>worldArgument()</code> which automatically generates our argument, we can use it as follows:</p>
<pre><code class="language-java">LinkedHashMap&lt;String, ArgumentType&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;world&quot;, worldArgument());

new CommandAPICommand(&quot;tpworld&quot;)
    .withArguments(arguments)
    .executesPlayer((player, args) -&gt; {
        player.teleport(Bukkit.getWorld((World) args[0])).getSpawnLocation());
    })
    .register();
</code></pre>
<hr />
<p>By using a <code>CustomArgument</code> (as opposed to a simple <code>StringArgument</code> and overriding its suggestions), we are able to provide a much more powerful form of error handling (automatically handled inside the argument), and we can reuse this argument for other commands.</p>
</div>
<hr />
<h2><a class="header" href="#message-builders" id="message-builders">Message Builders</a></h2>
<p>The <code>MessageBuilder</code> class is a class to easily create messages to describe errors when a sender sends a command which does not meet the expected syntax for an argument. It acts in a similar way to a <code>StringBuilder</code>, where you can append content to the end of a String.</p>
<p>The following methods are as follows:</p>
<table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody>
<tr><td><code>appendArgInput()</code></td><td>Appends the argument that failed that the sender submitted to the end of the builder. E.g. <code>/foo bar</code> will append <code>bar</code></td></tr>
<tr><td><code>appendFullInput()</code></td><td>Appends the full command that a sender submitted to the end of the builder. E.g. <code>/foo bar</code> will append <code>foo bar</code></td></tr>
<tr><td><code>appendHere()</code></td><td>Appends the text <code>&lt;--[HERE]</code> to the end of the builder</td></tr>
<tr><td><code>append(Object)</code></td><td>Appends an object to the end of the builder</td></tr>
</tbody></table>
<div class="example">
<h3><a class="header" href="#example---message-builder-for-invalid-objective-argument" id="example---message-builder-for-invalid-objective-argument">Example - Message builder for invalid objective argument</a></h3>
<p>To create a <code>MessageBuilder</code>, simply call its constructor and use whatever methods as you see fit. Unlike a <code>StringBuilder</code>, you don't have to &quot;build&quot; it when you're done - the CommandAPI does that automatically:</p>
<pre><code class="language-java">new MessageBuilder(&quot;Unknown world: /&quot;).appendFullInput().appendHere();
</code></pre>
</div><h1><a class="header" href="#functions" id="functions">Functions</a></h1>
<p>The CommandAPI has support to use Minecraft's <a href="https://minecraft.gamepedia.com/Function_(Java_Edtion)">functions</a> within your plugins. This is handled by using a class provided by the CommandAPI called <code>FunctionWrapper</code>, which allows you to execute functions. The CommandAPI also provides support to let you run your own commands within Minecraft function files.</p>
<hr />
<h2><a class="header" href="#functions-in-116" id="functions-in-116">Functions in 1.16+</a></h2>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>Minecraft 1.16+ change the way that datapacks are loaded on the server, so that they load before plugins are enabled. This means that non-vanilla commands that are declared in functions and tags will be detected as invalid, causing the server to throw a lot of errors at the very start.</p>
<p>The CommandAPI reloads datapacks once the server has finished loading using all declared commands, therefore <strong>the error messages at the start of the server can be ignored</strong>. However, in order to do this, <strong>your server must be running Java version 8, 9, 10 or 11</strong>.</p>
</blockquote>
<hr />
<h2><a class="header" href="#using-custom-commands-in-functions" id="using-custom-commands-in-functions">Using custom commands in functions</a></h2>
<p>In order to use a command from your plugin in a <code>.mcfunction</code> file, you must register your command in your plugin's <code>onLoad()</code> method, instead of the <code>onEnable()</code> method. Failure to do so will not allow the command to be registered for Minecraft functions, causing the function file to fail to load during the server startup phase.</p>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>In short, if you want to register a command which can be used in Minecraft functions, register it in your plugin's <code>onLoad()</code> method.</p>
</blockquote>
<div class="example">
<h3><a class="header" href="#example---registering-command-for-use-in-a-function" id="example---registering-command-for-use-in-a-function">Example - Registering command for use in a function</a></h3>
<p>Say we have a command <code>/killall</code> that simply kills all entities in all worlds on the server. If we were to register this in our <code>onLoad()</code> method, this would allow us to use the <code>/killall</code> command in Minecraft functions and tags.</p>
<pre><code class="language-java">public class Main extends JavaPlugin {

	@Override
	public void onLoad() {
		//Commands which will be used in Minecraft functions are registered here

        new CommandAPICommand(&quot;killall&quot;)
            .executes((sender, args) -&gt; {
                //Kills all enemies in all worlds
                Bukkit.getWorlds().forEach(w -&gt; w.getLivingEntities().forEach(e -&gt; e.setHealth(0)));
        	})
            .register();
	}
    
    @Override
    public void onEnable() {
        //Register all other commands here
    } 
}
</code></pre>
</div><h1><a class="header" href="#setting-up-functions--tags" id="setting-up-functions--tags">Setting up functions &amp; tags</a></h1>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>Most developers can completely skip this section. This is for those that are unfamiliar with functions and tags and is less about how the CommandAPI works.</p>
</blockquote>
<p>This section explains how functions are declared and set up for use in a Minecraft server. This is ideal for server owners who've never set up functions, or developers <em>(like the Command API's creator)</em> that has no idea how to set this sort of thing up.</p>
<hr />
<h2><a class="header" href="#creating-functions" id="creating-functions">Creating functions</a></h2>
<p>Functions are text files <em>(with the <code>.mcfunction</code> extension)</em> which contains lists of functions which are executed one after another. Each line of the file is a valid Minecraft command. Say we have <code>text.mcfunction</code>:</p>
<pre><code>killall
say Killed all living entities on the server
</code></pre>
<p>This will run the custom command killall <em>(as declared in <strong>Chapter 6 - Functions &amp; Tags</strong>)</em>, and then broadcast a message to all players stating that all entities were killed.</p>
<hr />
<h2><a class="header" href="#creating-tags" id="creating-tags">Creating tags</a></h2>
<p>Tags are json files which contain a list of functions. Tags let you run multiple functions at a time. Say we have a tag called <code>mytag.json</code>:</p>
<pre><code class="language-json">{
    &quot;values&quot;: [
    	&quot;mycustomnamespace:test&quot;,
    	&quot;mycustomnamespace:test2&quot;
    ]
}
</code></pre>
<p>This will run the function <code>test</code> and the function <code>test2</code>, which are in the namespace <code>mycustomnamespace</code>.</p>
<hr />
<h2><a class="header" href="#namespaces--where-to-place-everything" id="namespaces--where-to-place-everything">Namespaces &amp; where to place everything</a></h2>
<p>The following hierarchy explains where functions and tags go. In this diagram, the two functions <code>test</code> and <code>test2</code> are in a directory called <code>functions</code>. There is also a tag called <code>mytag</code> which is placed in the <code>tags</code> directory under <code>functions</code>. These are all under the <em>namespace</em> called <code>mycustomnamespace</code></p>
<pre><code>server/
├── world/
│   ├── advancements/
│   ├── data/
│   ├── datapacks/
│   │   └── bukkit/
│   │       ├── pack.mcmeta
│   │       └── data/
│   │           └── mycustomnamespace/
│   │               ├── functions/
│   │               │   ├── test.mcfunction
│   │               │   └── test2.mcfunction
│   │               └── tags/
│   │                   └── functions/
│   │                       └── mytag.json
│   └── ...
├── world_nether/
├── world_the_end/
├── ...
└── spigot.jar
</code></pre>
<p>To execute the <code>test</code> function, you would run the following command:</p>
<pre><code>/function mycustomnamespace:test
</code></pre>
<p>To execute the <code>mytag</code> tag, you would run the following command:</p>
<pre><code>/function #mycustomnamespace:mytag
</code></pre>
<h1><a class="header" href="#the-functionwrapper" id="the-functionwrapper">The FunctionWrapper</a></h1>
<p>The CommandAPI includes the <code>FunctionWrapper</code> class which is a wrapper for Minecraft's functions. It allows you to execute the commands that are represented by the respective <code>.mcfunction</code> file. There most important thing to note with the <code>FunctionWrapper</code>, and that it <em>does not &quot;store&quot; the functions inside it</em>, instead it just <em>stores what the function does</em>. In other words, you cannot &quot;extract&quot; the list of commands from a <code>FunctionWrapper</code> object.</p>
<h2><a class="header" href="#functionwrapper-methods" id="functionwrapper-methods">FunctionWrapper methods</a></h2>
<p>The <code>FunctionWrapper</code> class consists of two methods:</p>
<table><thead><tr><th>Method</th><th>Result on execution</th></tr></thead><tbody>
<tr><td><code>run()</code></td><td>Executes the Minecraft function</td></tr>
<tr><td><code>runAs(Entity)</code></td><td>Executes the Minecraft function as a specific Entity</td></tr>
</tbody></table>
<p>The <code>FunctionWrapper</code> also implements the <code>Keyed</code> interface, allowing you to retrieve the <code>NamespacedKey</code> for this function using <code>getKey()</code>.</p>
<h1><a class="header" href="#function-arguments" id="function-arguments">Function arguments</a></h1>
<p>The <code>FunctionArgument</code> class is used to represent a function or a tag in Minecraft. When retrieving an instance of the argument, it will return a <code>FunctionWrapper[]</code>, where each <code>FunctionWrapper</code> consists of a Minecraft function.</p>
<p>Therefore, if a user supplies a single function, the <code>FunctionWrapper[]</code> will be of size 1, and if the user supplies a tag which can consist of multiple functions, the <code>FunctionWrapper[]</code> will consist of the array of functions as declared by that tag.</p>
<div class="example">
<h3><a class="header" href="#example---minecrafts-function-command" id="example---minecrafts-function-command">Example - Minecraft's /function command</a></h3>
<p>Since it's a little difficult to demonstrate a custom use for the <code>FunctionArgument</code>, we will show how you can implement Vanilla Minecraft's <code>/function</code> command. In this example, we want a command that uses the following structure:</p>
<pre><code>/runfunction &lt;function&gt;
</code></pre>
<p>When provided with a function, it will execute that function. If instead a tag is provided, it will execute that tag (i.e. execute all functions declared in that tag).</p>
<pre><code class="language-java">LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;function&quot;, new FunctionArgument());

new CommandAPICommand(&quot;runfunction&quot;)
    .withArguments(arguments)
    .executes((sender, args) -&gt; {
        FunctionWrapper[] functions = (FunctionWrapper[]) args[0];

        //Run all functions in our FunctionWrapper[]
        for(FunctionWrapper function : functions) {
            function.run();
        }
    })
    .register();
</code></pre>
</div><h1><a class="header" href="#permissions" id="permissions">Permissions</a></h1>
<p>Permissions let you control which players are allowed to execute which commands. This is handled using the <code>CommandPermission</code> class, which has the following uses:</p>
<table><thead><tr><th>Permission</th><th>What it does</th></tr></thead><tbody>
<tr><td><code>CommandPermission.OP</code></td><td>Requires OP to execute the command</td></tr>
<tr><td><code>CommandPermission.NONE</code></td><td>Anyone can execute the command</td></tr>
<tr><td><code>CommandPermission.fromString(&quot;my.permission&quot;)</code></td><td>Requires a specific permission node to execute the command</td></tr>
</tbody></table>
<p>In addition to the <code>CommandPermission</code> class, there are two different ways to assign permissions (compared to the simple <code>CommandSender.hasPermission()</code> method that is provided by Bukkit).</p>
<hr />
<h2><a class="header" href="#adding-permissions-to-commands" id="adding-permissions-to-commands">Adding permissions to commands</a></h2>
<p>To add a permission to a command, you can use the <code>withPermission(CommandPermission)</code> method <em>when declaring a command</em>.</p>
<div class="example">
<h3><a class="header" href="#example---god-command-with-permissions" id="example---god-command-with-permissions">Example - /god command with permissions</a></h3>
<p>Say we created a command <code>/god</code> that sets a player as being invulnerable. Since this is a pretty non-survival command, we want to restrict who can run this command. As such, we want our player to have the permission <code>command.god</code> in order to run this command. To do this, we simply use the <code>withPermission(CommandPermission)</code> method from our command builder:</p>
<pre><code class="language-java">// Register the /god command with the permission node &quot;command.god&quot;
new CommandAPICommand(&quot;god&quot;)
	.withPermission(CommandPermission.fromString(&quot;command.god&quot;))
	.executesPlayer((player, args) -&gt; {
		player.setInvulnerable(true);
	})
	.register();
</code></pre>
</div>
<hr />
<h2><a class="header" href="#registering-permissions-to-arguments" id="registering-permissions-to-arguments">Registering permissions to arguments</a></h2>
<p>For further fine-tuning of permission management, the CommandAPI allows you to add permissions to individual arguments. This prevents the user from executing a command <em>with a specific argument</em> if they do not have a specific permission.</p>
<p>This is done by using the <code>withPermission(CommandPermission)</code> method <em>at the end of an argument</em>.</p>
<p>If a player does not have the required permission:</p>
<ul>
<li>The argument hover text which suggests what the command is will not be shown</li>
<li>The player will receive an error if they try to type something in for that argument</li>
<li>Suggestions, such as a list of materials or players, will not be shown</li>
</ul>
<div class="example">
<h3><a class="header" href="#example---kill-command-with-argument-permissions" id="example---kill-command-with-argument-permissions">Example - /kill command with argument permissions</a></h3>
<p>For example, say we're registering a command <code>/kill</code>:</p>
<pre><code>/kill          - Kills yourself
/kill &lt;target&gt; - Kills a target player
</code></pre>
<p>We first declare the command as normal. Nothing fancy is going on here:</p>
<pre><code class="language-java">// Register /kill command normally. Since no permissions are applied, anyone can run this command
new CommandAPICommand(&quot;kill&quot;)
	.executesPlayer((player, args) -&gt; {
		player.setHealth(0);
	})
	.register();
</code></pre>
<p>Now we declare our command with arguments. We use a <code>PlayerArgument</code> and apply the permission <em>to the argument</em>. After that, we register our command as normal:</p>
<pre><code class="language-java">// Declare our arguments
LinkedHashMap&lt;String, Argument&gt; arguments = new LinkedHashMap&lt;&gt;();
arguments.put(&quot;target&quot;, new PlayerArgument().withPermission(CommandPermission.OP));

// Adds the OP permission to the &quot;target&quot; argument. The sender requires OP to execute /kill &lt;target&gt;
new CommandAPICommand(&quot;kill&quot;)
	.withArguments(arguments)
	.executesPlayer((player, args) -&gt; {
		((Player) args[0]).setHealth(0);
	})
	.register();
</code></pre>
</div>
<hr />
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>As you can see, there are multiple ways of applying permissions to commands with arguments. In the <code>/god</code> command shown above, the permission was applied to the whole command. In the <code>/kill</code> command shown above, the permission was applied to the argument. </p>
<p>There's not really much difference between the two methods, but I personally would use <em>argument permissions</em> as it has greater control over arguments.</p>
</blockquote>
<h1><a class="header" href="#aliases" id="aliases">Aliases</a></h1>
<p>Aliases for commands can be added by using the <code>withAliases()</code> method when registering a command. Aliases allow you to run the same command with a different 'name' from the original registered command name.</p>
<div class="example">
<h3><a class="header" href="#example---using-aliases-for-getpos" id="example---using-aliases-for-getpos">Example - Using aliases for /getpos</a></h3>
<p>In this example, we register the command <code>/getpos</code> that returns the command sender's location. We apply the aliases <code>/getposition</code>, <code>/getloc</code>, <code>/getlocation</code> and <code>/whereami</code> as well, using the <code>withAliases()</code> method.</p>
<pre><code class="language-java">new CommandAPICommand(&quot;getpos&quot;)
    // Declare your aliases
    .withAliases(&quot;getposition&quot;, &quot;getloc&quot;, &quot;getlocation&quot;, &quot;whereami&quot;)
  
    //Declare your implementation
    .executesEntity((entity, args) -&gt; {
        entity.sendMessage(String.format(&quot;You are at %d, %d, %d&quot;, 
            entity.getLocation().getBlockX(), 
            entity.getLocation().getBlockY(), 
            entity.getLocation().getBlockZ())
        );
    })
    .executesCommandBlock((block, args) -&gt; {
        block.sendMessage(String.format(&quot;You are at %d, %d, %d&quot;, 
            block.getBlock().getLocation().getBlockX(), 
            block.getBlock().getLocation().getBlockY(), 
            block.getBlock().getLocation().getBlockZ())
        );
    })
  
    //Register the command
    .register();
</code></pre>
</div><h1><a class="header" href="#command-conversion" id="command-conversion">Command conversion</a></h1>
<p>Since the CommandAPI is used to register commands as a vanilla Minecraft command, you may want to use other plugins that are not written with the CommandAPI. For instance, if you want to include a command from a plugin which doesn't use the CommandAPI in a commandblock, <em>(such as the <code>/execute</code> command)</em>, you can use the CommandAPI's command conversion system.</p>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>The command conversion system is nowhere near perfect. It tries its best to connect Bukkit plugins to vanilla Minecraft commands, but is not guaranteed to run flawlessly. If possible, consider forking/requesting a plugin and writing it with compatibility for the CommandAPI.</p>
</blockquote>
<hr />
<h2><a class="header" href="#entire-plugins" id="entire-plugins">Entire plugins</a></h2>
<p>To register all commands that are declared by a plugin, the <code>Converter.convert(Plugin)</code> method can be used. This attempts to register all commands declared in a plugin's <code>plugin.yml</code> file, as well as any aliases or permissions stated in the <code>plugin.yml</code> file.</p>
<p>It is important to note that the plugin must be loaded before your plugin before attempting conversion. <em>(Use <code>loadbefore: [YourPlugin, CommandAPI]</code> to ensure it loads before your plugin)</em></p>
<div class="example">
<h3><a class="header" href="#example---converting-commands-for-a-plugin" id="example---converting-commands-for-a-plugin">Example - Converting commands for a plugin</a></h3>
<p>Say you have some <code>plugin.yml</code> file for a plugin that adds some basic functionality to a server. The plugin in this example is called &quot;myPlugin&quot;:</p>
<pre><code class="language-yaml">name: myPlugin
main: some.random.package.Main
version: 1.0
commands:
  gmc:
    aliases: gm1
  gms:
  i:
    permission: item.permission
</code></pre>
<p>As you can see, it declares 3 commands: <code>/gmc</code>, <code>/gms</code> and <code>/i</code>. <strong>Since this plugin hasn't been told to load before the CommandAPI, we must first modify the <code>plugin.yml</code> file:</strong></p>
<pre><code class="language-yaml">name: myPlugin
main: some.random.package.Main
loadbefore: [CommandAPI]
version: 1.0
commands:
  gmc:
    aliases: gm1
  gms:
  i:
    permission: item.permission
</code></pre>
<hr />
<p>Now that the plugin has been loaded before the CommandAPI, we can now begin writing our own plugin that uses the CommandAPI converter. We will call this plugin &quot;MyCoolPlugin&quot;:</p>
<pre><code class="language-java">public class MyCoolPlugin extends JavaPlugin {
    
    @Override
    public void onEnable() {
        Converter.convert(Bukkit.getPluginManager().getPlugin(&quot;myPlugin&quot;));
        //Other code goes here...
    }
    
}
</code></pre>
<p>To ensure that <em>MyCoolPlugin</em> loads <em>after</em> <em>myPlugin</em>, we must ensure that the <code>plugin.yml</code> for <em>myPlugin</em> states this. So, we update the <code>plugin.yml</code> for <em>myPlugin</em> again:</p>
<pre><code class="language-yaml">name: myPlugin
main: some.random.package.Main
loadbefore: [MyCoolPlugin, CommandAPI]
version: 1.0
commands:
  gmc:
    aliases: gm1
  gms:
  i:
    permission: item.permission
</code></pre>
<p>When this is run, the commands <code>/gmc</code>, <code>/gm1</code>, <code>/gms</code> and <code>/i</code> will all be registered by the CommandAPI.</p>
<hr />
<p>So to summarise, our plugin loading order is the following:</p>
<p>\[ \texttt{myPlugin} \xrightarrow{then} \texttt{CommandAPI} \xrightarrow{then} \texttt{MyCoolPlugin} \]</p>
</div>
<hr />
<h2><a class="header" href="#only-specific-commands" id="only-specific-commands">Only specific commands</a></h2>
<p>In addition to converting the whole plugin, the CommandAPI allows you to convert single commands at a time using the <code>Converter.convert(Plugin, String)</code> method, where the <code>String</code> argument refers to the command name as declared in the plugin's <code>plugin.yml</code> file.</p>
<h1><a class="header" href="#upgrading-guide" id="upgrading-guide">Upgrading guide</a></h1>
<h2><a class="header" href="#from-version-23-to-30" id="from-version-23-to-30">From version 2.3 to 3.0</a></h2>
<p>The CommandAPI's upgrade from version 2.3 to 3.0 is very intense and various refactoring operations took place, which means that plugins that implement the CommandAPI version 2.3 or will not to work with the CommandAPI version 3.0. This page outlines the few major changes and points you to the various pages in the documentation that covers how to use version 3.0.</p>
<hr />
<h3><a class="header" href="#imports--renaming" id="imports--renaming">Imports &amp; Renaming</a></h3>
<p>The default package name has been changed. Instead of being registered under the <code>io.github.jorelali</code> package, the CommandAPI has been moved to the <code>dev.jorel</code> package:</p>
<p>\[\texttt{io.github.jorelali.commandapi.api}\rightarrow\texttt{dev.jorel.commandapi}\]</p>
<p>To organise classes with other classes of similar functions, new packages have been introduced. These can be fully explored using the <a href="https://www.jorel.dev/1.13-Command-API/javadocs/html/annotated.html">new JavaDocs</a></p>
<hr />
<h3><a class="header" href="#removed-classes--alternatives" id="removed-classes--alternatives">Removed classes &amp; Alternatives</a></h3>
<p>To reduce redundancies, the CommandAPI removed a few classes:</p>
<table><thead><tr><th>Removed class</th><th>Alternative</th></tr></thead><tbody>
<tr><td><code>SuggestedStringArgument</code></td><td>Use <code>.overrideSuggestions(String[])</code> for the relevant argument, as described <a href="./arguments.html#overriding-argument-suggestions">here</a></td></tr>
<tr><td><code>DefinedCustomArguments</code> for Objectives</td><td>Use <a href="./objectivearguments.html"><code>ObjectiveArgument</code></a></td></tr>
<tr><td><code>DefinedCustomArguments</code> for Teams</td><td>Use <a href="./teamarguments.html"><code>TeamArgument</code></a></td></tr>
</tbody></table>
<hr />
<h3><a class="header" href="#command-registration-1" id="command-registration-1">Command registration</a></h3>
<p>The way that commands are registered has been completely changed. It is highly recommended to switch to the new system, which is described <a href="./commandregistration.html"><strong>here</strong></a>.</p>
<p>The following methods have been removed:</p>
<pre><code class="language-java">CommandAPI.getInstance().register(String, LinkedHashMap, CommandExecutor);
CommandAPI.getInstance().register(String, String[], LinkedHashMap, CommandExecutor);
CommandAPI.getInstance().register(String, CommandPermission, LinkedHashMap, CommandExecutor);
CommandAPI.getInstance().register(String, CommandPermission, String[], LinkedHashMap, CommandExecutor);

CommandAPI.getInstance().register(String, LinkedHashMap, ResultingCommandExecutor);
CommandAPI.getInstance().register(String, String[], LinkedHashMap, ResultingCommandExecutor);
CommandAPI.getInstance().register(String, CommandPermission, LinkedHashMap, ResultingCommandExecutor);
CommandAPI.getInstance().register(String, CommandPermission, String[], LinkedHashMap, ResultingCommandExecutor);
</code></pre>
<p>Additionally, the CommandAPI is no longer accessed by using <code>CommandAPI.getInstance()</code>. This has been replaced with static methods that can be accessed without an instance of the CommandAPI, so you can use the following:</p>
<pre><code class="language-java">CommandAPI.fail(String command);
CommandAPI.canRegister();
CommandAPI.unregister(String command);
CommandAPI.unregister(String command, boolean force);
</code></pre>
<h1><a class="header" href="#troubleshooting" id="troubleshooting">Troubleshooting</a></h1>
<p>This section basically summarizes the list of things that <em>could</em> go wrong with the CommandAPI and how to mitigate these circumstances.</p>
<h2><a class="header" href="#commandapi-errors-when-reloading-datapacks" id="commandapi-errors-when-reloading-datapacks">CommandAPI errors when reloading datapacks</a></h2>
<p>If you get an error along the lines of:</p>
<pre><code class="language-log">[14:47:25] [Server thread/INFO]: [CommandAPI] Reloading datapacks...
[14:47:25] [Server thread/WARN]: java.lang.NoSuchFieldException: modifiers
[14:47:25] [Server thread/WARN]:     at java.base/java.lang.Class.getDeclaredField(Class.java:2489)
[14:47:25] [Server thread/WARN]:     at dev.jorel.commandapi.nms.NMS_1_16_R1.reloadDataPacks(NMS_1_16_R1.java:154)
[14:47:25] [Server thread/WARN]:     at dev.jorel.commandapi.CommandAPI.cleanup(CommandAPI.java:43)
[14:47:25] [Server thread/WARN]:     at dev.jorel.commandapi.CommandAPIMain.lambda$onEnable$0(CommandAPIMain.java:52)
[14:47:25] [Server thread/WARN]:     at org.bukkit.craftbukkit.v1_16_R1.scheduler.CraftTask.run(CraftTask.java:81)
[14:47:25] [Server thread/WARN]:     at org.bukkit.craftbukkit.v1_16_R1.scheduler.CraftScheduler.mainThreadHeartbeat(CraftScheduler.java:400)
[14:47:25] [Server thread/WARN]:     at net.minecraft.server.v1_16_R1.MinecraftServer.b(MinecraftServer.java:1061)
[14:47:25] [Server thread/WARN]:     at net.minecraft.server.v1_16_R1.DedicatedServer.b(DedicatedServer.java:354)
[14:47:25] [Server thread/WARN]:     at net.minecraft.server.v1_16_R1.MinecraftServer.a(MinecraftServer.java:1009)
[14:47:25] [Server thread/WARN]:     at net.minecraft.server.v1_16_R1.MinecraftServer.v(MinecraftServer.java:848)
[14:47:25] [Server thread/WARN]:     at net.minecraft.server.v1_16_R1.MinecraftServer.lambda$0(MinecraftServer.java:164)
[14:47:25] [Server thread/WARN]:     at java.base/java.lang.Thread.run(Thread.java:832)
</code></pre>
<p>This is likely due to using an incompatible version of Java. The CommandAPI was designed to run on Java 8 and <em>should</em> be able to support Java 8, 9, 10, 11, 12, 13, 14 and 15 for OpenJDK. For an Oracle Java installation, it is recommended to use Java 8.</p>
<h2><a class="header" href="#server-errors-when-loading-datapacks-in-116" id="server-errors-when-loading-datapacks-in-116">Server errors when loading datapacks in 1.16+</a></h2>
<p>If you get an error at the very start of the server's startup sequence along the lines of:</p>
<pre><code class="language-log">[15:57:29] [Worker-Main-5/ERROR]: Failed to load function mycustomnamespace:test
java.util.concurrent.CompletionException: java.lang.IllegalArgumentException: Whilst parsing command on line 2: Unknown or incomplete command, see below for error at position 0: &lt;--[HERE]
    at java.util.concurrent.CompletableFuture.encodeThrowable(Unknown Source) ~[?:1.8.0_261]
    at java.util.concurrent.CompletableFuture.completeThrowable(Unknown Source) [?:1.8.0_261]
    at java.util.concurrent.CompletableFuture$AsyncSupply.run(Unknown Source) [?:1.8.0_261]
    at java.util.concurrent.CompletableFuture$AsyncSupply.exec(Unknown Source) [?:1.8.0_261]
    at java.util.concurrent.ForkJoinTask.doExec(Unknown Source) [?:1.8.0_261]
    at java.util.concurrent.ForkJoinPool$WorkQueue.runTask(Unknown Source) [?:1.8.0_261]
    at java.util.concurrent.ForkJoinPool.runWorker(Unknown Source) [?:1.8.0_261]
    at java.util.concurrent.ForkJoinWorkerThread.run(Unknown Source) [?:1.8.0_261]
Caused by: java.lang.IllegalArgumentException: Whilst parsing command on line 2: Unknown or incomplete command, see below for error at position 0: &lt;--[HERE]
    at net.minecraft.server.v1_16_R1.CustomFunction.a(SourceFile:62) ~[spigot-1.16.1.jar:git-Spigot-758abbe-8dc1da1]
    at net.minecraft.server.v1_16_R1.CustomFunctionManager.a(SourceFile:84) ~[spigot-1.16.1.jar:git-Spigot-758abbe-8dc1da1]
    ... 6 more
</code></pre>
<p>You can safely ignore it - the CommandAPI fixes this later. This is described in more detail <a href="./functions.html#functions-in-116">here</a>.</p>
<h2><a class="header" href="#serverplugin-reloading" id="serverplugin-reloading">Server/Plugin reloading</a></h2>
<p>Due to the implementation of the CommandAPI, the CommandAPI does <strong>not</strong> support plugin reloading for plugins that use the CommandAPI. This includes, but is not limited to:</p>
<ul>
<li>The <code>/reload</code> command which reloads all plugins on the server</li>
<li>Plugin reloading plugins, such as <a href="https://dev.bukkit.org/projects/plugman">PlugMan</a></li>
<li>Any form of plugin enabling/disabling process for plugins which register commands via the CommandAPI</li>
</ul>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>Plugin reloading gets very complicated with respect to the CommandAPI. Since the loading sequence of Minecraft commands is so picky, reloading the CommandAPI or a plugin which registers commands can cause commands to be re-registered. This can lead to very odd effects, such as command collisions <em>(commands just don't work)</em>, to duplicate commands being registered under different namespaces <em>(e.g. plugins are registered under Bukkit as well as Minecraft)</em>. These effects are not &quot;100% guaranteed&quot; and have only been seen during dodgy tests. In short, <strong>do not enable or reload plugins</strong>, and <strong>absolutely do not reload the server with <code>/reload</code></strong></p>
</blockquote>
<h2><a class="header" href="#players-cannot-connecttimeout-when-joining" id="players-cannot-connecttimeout-when-joining">Players cannot connect/timeout when joining</a></h2>
<p>If players cannot connect, this could be due to the size of the command data packet. To see the resultant packet being sent to players when they log in, enable the <code>create-dispatcher-json: true</code> setting and view the file size of the resultant file. If the file size is abnormally large <em>(Over 2MB is considered very large)</em>, consider reducing the number of <code>LiteralArguments</code> which your plugin uses.</p>
<h2><a class="header" href="#command-conversion-throws-a-nullpointerexception" id="command-conversion-throws-a-nullpointerexception">Command conversion throws a <code>NullPointerException</code></a></h2>
<p>This is likely caused by the fact that the plugin you want to convert hasn't been loaded yet. Ensure that it loads before your plugin by adding the following to the target plugin's <code>plugin.yml</code> file:</p>
<pre><code class="language-yaml">loadbefore: [YourPlugin, CommandAPI]
</code></pre>
<h2><a class="header" href="#my-issue-isnt-on-here-what-do-i-do" id="my-issue-isnt-on-here-what-do-i-do">My issue isn't on here, what do I do?!</a></h2>
<p>If you've found a bug that isn't solved here, submit a bug report on <a href="https://github.com/JorelAli/1.13-Command-API/issues/new/choose">the CommandAPI's issues page</a> and I'll try my best to resolve the issue!</p>
<h1><a class="header" href="#afterword" id="afterword">Afterword</a></h1>
<div class="example">
<p><strong>Developer's Note:</strong></p>
<p>Congratulations on making it to the end of the documentation! I hope it was easy to understand everything ... I feel like it's a bit content heavy.</p>
<hr />
<p>This project is by far my most worked on and probably the project I'm most proud of. If you're interested in reading about my journey with the CommandAPI, I've written about it a few times on my blog:</p>
<ul>
<li>You can read about the creation of the CommandAPI in my blog post <a href="https://www.jorel.dev/blog/Creating-the-CommandAPI/">here</a>.</li>
<li>You can read about the CommandAPI's first issue in my blog post <a href="https://www.jorel.dev/blog/Run-commands-as-chickens/">here</a>.</li>
<li>You can read about my self-review of the CommandAPI, two months after its creation <a href="https://www.jorel.dev/blog/Return-of-the-Command-API/">here</a>.</li>
</ul>
<hr />
<p>I'd like to give credit to all of the people that have opened issues on GitHub, that have truly made it what it is now. In addition to <a href="https://github.com/JorelAli/1.13-Command-API/stargazers">my stargazers</a>, I'd like to personally thank:</p>
<ul>
<li><strong><a href="https://github.com/Combustible">Combustible</a></strong>, who was my #1 supporter and motivated me to keep this project alive after its initial release. They also helped raise awareness of the CommandAPI throughout Spigot's forums.</li>
<li><strong><a href="https://github.com/DerpNerb">DerpNerb</a></strong>, who gave me the idea to convert the CommandAPI to a Maven project which resulted in making the CommandAPI much more accessible for everyone.</li>
<li><strong><a href="https://github.com/Draycia">Draycia</a></strong>, who suggested that I put <code>CommandSender</code> objects inside <code>DynamicSuggestedStringArguments</code>, which allow dynamic arguments to be much more powerful.</li>
<li><strong><a href="https://github.com/HielkeMinecraft">HielkeMinecraft</a></strong>, who suggested various improvements for the <code>LocationArgument</code> class; suggested adding results and successes for commands and being a great bug reporter in general.</li>
<li><strong><a href="https://github.com/i509VCB">i509VCB</a></strong>, who is an absolute genius and a really good bug spotter. They pointed out a severe bug that made libraries depending on the CommandAPI depend on Brigadier; created the documentation for using the CommandAPI with Gradle and suggested using the NBTAPI to include NBT support.</li>
<li><strong><a href="https://github.com/Loapu">Loapu</a></strong>, who helped debug an incredibly difficult bug where command executors were not working properly. They were able to quickly communicate and explore the issue even when I was unable to replicate the issue on my machine.</li>
<li><strong><a href="https://github.com/Minenash">Minenash</a></strong>, who was the driving force for the 3.0 release which adds a plethora of additional arguments. They continued to research, write documentation examples, bug test, code review and basically oversee the project throughout its development.</li>
<li><strong><a href="https://github.com/Tinkot">Tinkot</a></strong>, who gave a review of the CommandAPI on its spigot page. This motivated me to fix a 6 month old bug. Somehow.</li>
<li><strong><a href="https://github.com/ZiluckMichael">ZiluckMichael</a></strong>, who truly changed the CommandAPI for the better. Refactored the entire code base to make the CommandAPI much more maintainable, as well as removing a lot of unnecessary reflection.</li>
</ul>
<hr />
<p>I never really expected more than 5 or so people to use this API, so it was truly an exciting time creating this for everyone - seeing everyone's responses, issues and problems helped me keep going.</p>
<p>In short, thank you, and everyone else that helped make the CommandAPI what it is.</p>
</div>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        <script type="text/javascript" src="sidebar.js"></script>
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            MathJax.Hub.Register.StartupHook('End', function() {
                window.setTimeout(window.print, 100);
            });
        });
        </script>
        
        

    </body>
</html>
